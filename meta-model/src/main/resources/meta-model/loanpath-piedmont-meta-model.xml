<?xml version="1.0" encoding="UTF-8"?>
<meta-model default-package="com.thirdpillar.codify.loanpath.model" xmlns="http://www.thirdpillar.com/codify/metamodel" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <module name="common" depends-on="cbc">
        <entity name="MetaInfo" stereotype="embeddable">
            <field name="createdAt" type="date-time" internal="true" label="Created Date"/>
            <field name="lastModifiedAt" type="date-time" internal="true" label="Last Updated Date"/>
            <reference name="createdByUser" entity-type="User" internal="true" relation="refers-to" label="Created By"/>
            <reference name="lastModifiedByUser" entity-type="User"  internal="true" relation="refers-to" label="Last Updated By"/>
        </entity>
		<entity name="Checkout" stereotype="embeddable">
            <reference name="checkedOutByUser" entity-type="User" internal="true" relation="refers-to" label="Checkout By User"/>
            <field name="checkedOutAt" type="date-time" internal="true" label="Checkout Date"/>
            <reference name="lastCheckedInByUser" entity-type="User" internal="true" relation="refers-to" label="Checkin By User"/>
            <field name="lastCheckedInAt" type="date-time" internal="true" label="Checkout Date"/>
        </entity>        
        <entity name="BinaryType" stereotype="embeddable">
            <field name="value" type="binary" />
            <field name="name" type="text" internal="true"/>
            <field name="contentType" type="text" />
        </entity>
        <entity name="IconLibrary" stereotype="configuration">
            <field name="refNumber" type="auto" internal="true"/>
            <field name="name" type="text"/>
            <field name="iconFile" type="binary"/>
            <display-format>$o.Name$</display-format>
            <find-queries>
                <query name="quickSearch" select="many">where name like :q</query>
            </find-queries>
        </entity>
 
        <entity name="AttributeChoice">
            <display-format>$o.displayValue$</display-format>
            <quick-search>where code like :q</quick-search>
        </entity>           
        <entity name="Address" stereotype="managed">
        	<!-- <field name="refNumber" type="auto"/> -->
			<field name="address1" type="text" label="Suite/Street Name" />
            <field name="address2" type="text" label="Address Line 2" />
            <field name="city" type="text" />
            <reference name="country" entity-type="Country" relation="refers-to" label="Country" ruleTriggerOnEvent="true"/>
            <reference name="stateProvince" entity-type="State" relation="refers-to" label="State/Province">
            	<filters>
					<filter expr="entity.active"/>
 			  	</filters>
            </reference>
            <field name="county" type="text" />
            <field name="postalCode" type="text" />
            <field name="postalCodePlus4" type="text" label="Zip Extn"/>
            <collection name="usage" entity-type="AttributeChoice" relation="refers-to" label="Use Type" collection-type="list">
                <lookup>
                    <param name="key">ADDRESS_USE_TYPE</param>
                </lookup>
            </collection>
            <!-- <reference name="use" entity-type="AttributeChoice" relation="refers-to" label="Use Type">
                <lookup>
                    <param name="key">ADDRESS_USE_TYPE</param>
                </lookup>
            </reference> -->            
            <field name="displayAddress" type="derived:text"/>
            <field name="servicingIdentifier" type="text" length="36" indexed="true"/>
            <field name="externalIdentifier" type="text" length="36" indexed="true" />
            <display-format>$o.displayAddress$</display-format>
            <find-queries>
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
                <query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query>
            </find-queries>                              
        </entity>
        <entity name="Contact" stereotype="managed">
        	<field name="refNumber" type="auto" tags="Header"/>
        	<field name="derLastNameFirstName" type="derived:text"/>
            <reference name="title" entity-type="AttributeChoice" relation="refers-to" label="Title">
                <lookup>
                    <param name="key">TITLE</param>
                </lookup>
            </reference>
            <field name="businessTitle" type="text" label="Business Title"/>            
        	<field name="firstName" type="text" label="First Name"/>
            <field name="middleName" type="text" label="Middle Initial"/>
            <field name="lastName" type="text" label="Last Name"/>
            <reference name="suffix" entity-type="AttributeChoice" relation="refers-to" label="Suffix">
                <lookup>
                    <param name="key">SUFFIX</param>
                </lookup>
            </reference>   
            <reference name="role" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ROLE_TYPE</param>
                </lookup>
            </reference>          
            <field name="displayName" type="derived:text"/>
            <field name="homePhone" type="phone" label="Home Phone"/>
            <field name="homePhone2" type="phone" label="Home Phone 2"/>
            <field name="businessPhone" type="phone" label="Business Phone"/>
            <field name="businessPhone2" type="phone" label="Business Phone 2"/>
            <field name="mobilePhone" type="phone" label="Mobile Phone"/>
            <field name="mobilePhone2" type="phone" label="Mobile Phone 2"/>
            <field name="otherPhone" type="phone" label="Other Phone"/>
            <field name="otherPhone2" type="phone" label="Other Phone 2"/>
            <field name="homeFax" type="phone" label="Home Fax"/>
            <field name="businessFax" type="phone" label="Business Fax"/>
            <field name="otherFax" type="phone" label="Other Fax"/>
            <field name="email" type="email" label="Email"/>          
            <field name="servicingIdentifier" type="text" internal="true" tags="Header" indexed="true"/>  
            <collection name="addresses" collection-type="list" entity-type="Address" relation="owner" label="Addresses"/>
            <field name="externalIdentifier" type="text" length="36" indexed="true" />    
            <display-format>$o.displayName$</display-format>  
            <find-queries>
            	<query name="byRefNumber" select="one">where refNumber = :refNumber</query>
            	<!-- <query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query> -->
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
            </find-queries>                  
        </entity>        
 
        <entity name="User">
<!--             <field name="accountExpiryDate" type="date-time" required="false" label="Account Expiry Date"/> -->
<!--             <field name="lastPasswordResetDate" type="date-time" internal="true"/>          -->
            
            <!-- <field name="proxyStartDttm" type="date-time"/>
            <field name="proxyEndDttm" type="date-time"/> -->

            <find-queries>
                <query name="byUsernameAndSource" select="one" cacheable="true">where username = :username and userSource.key = :userSource</query>
                <query name="byExternalIdentifier" select="many" cacheable="true">where externalIdentifier = :principal</query> 
            </find-queries>
        </entity>
        
        <entity name="Document">
            <reference name="documentClass" entity-type="AttributeChoice" relation="refers-to" label="Document Group" required="false" >
                <lookup>
                    <param name="key">DOCUMENT_CLASS</param>
                </lookup>
				<filters>
					<filter triggerExpr="isdef root_documentGroup_generatedDocuments" expr="if(isdef root_documentGroup_generatedDocuments){ entity.key == ('DOCUMENT_CLASS_CREDIT')||entity.key == ('DOCUMENT_CLASS_SALES')} else {entity.key == ('DOCUMENT_CLASS_CREDIT')||entity.key == ('DOCUMENT_CLASS_SALES')||entity.key == ('DOCUMENT_CLASS_UPLOADED_DOC')} "/>
				</filters>
				</reference>
            <reference name="documentCategory" entity-type="AttributeChoice" relation="refers-to" label="Document Category" required="false" >
                 <lookup>
                 	<param name="key">DOCUMENT_CATEGORY</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.documentClass != null) { if(thiz.documentClass.key == ('DOCUMENT_CLASS_UPLOADED_DOC')) { return 'DOCUMENT_CLASS_UPLOADED_DOC_CATEGORY';} else {return thiz.documentClass.key; }} else { return null; }]]></param>
                </lookup>
            </reference>
            <reference name="documentType" entity-type="AttributeChoice" relation="refers-to" label="Document Type" required="false" ruleTriggerOnEvent="true">
                 <lookup>
                 	<param name="key">DOCUMENT_TYPE</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.documentCategory != null) { if(thiz.documentClass.key == ('DOCUMENT_CLASS_UPLOADED_DOC')) { return 'DOCUMENT_CLASS_UPLOADED_DOC_CATEGORY';} else {return thiz.documentCategory.key; }} else { return null; }]]></param>
                </lookup>
            </reference>
            <reference name="documentStatus" entity-type="AttributeChoice" relation="refers-to" label="Document Status" required="false">
                <lookup>
                    <param name="key">DOCUMENT_STATUS</param>
                </lookup> 
                <filters>
                 <filter triggerExpr="isdef root_documentGroup_uploadedDocuments" expr="
                 if(isdef root_documentGroup_uploadedDocuments)
		      					{
		         				  entity.key == 'DOCUMENT_STATUS_ARCHIVED' || entity.key == 'DOCUMENT_STATUS_REJECTED' || entity.key == 'DOCUMENT_STATUS_APPROVED' || entity.key == 'DOCUMENT_STATUS_PENDING_REVIEW' || entity.key == 'DOCUMENT_STATUS_DECLINED' || entity.key == 'DOCUMENT_STATUS_ACCEPTED' || entity.key == 'DOCUMENT_STATUS_SIGNING_COMPLETED' || entity.key == 'DOCUMENT_STATUS_SIGNING_IN_COMPLETE'
		         				}"/>
                </filters>
            </reference>
            <field name="readOnly" type="boolean" required="false"/>
            <field name="esignatureRqd" type="boolean" label="E-Signature" tags="Header" internal="true"/>                    
<!--             <field name="printJobDttm" type="date-time"/> -->
            <field name="printJobDttm" type="date"/>
            <field name="selectSigners" type="text"/>
            <field name="fax" type="text" length="50"/>
            <field name="blankDocument" type="boolean"/>
            <field name="requestNumber" type="derived:text"/>
            <field name="customerName" type="derived:text"/>
            <field name="pagesIncludingCoverSheet" type="integer" label="Number of pages including cover sheet"/>
            <field name="initializeDttm" type="date-time"/>
			<field name="wetSignature" type="boolean" tags="Header" ruleTriggerOnEvent="true"/>
            <field name="uploadedStream" type="binary" ruleTriggerOnEvent="true"/>
            <field name="generatedStream" type="binary" ruleTriggerOnEvent="true"/>
            <field name="archiveStream" type="binary"/>
            <field name="shared" type="boolean"/>	
            <field name="comment" type="text"/>		
<!--             <field name="description" type="text"/> -->
            <field name="description" type="textarea"/>
			
            <field name="documentName" type="text" label="Document Filename" internal="true" tags="Header"/>
            <field name="documentRepoId" type="text"/>
            <field name="uploadedBy" type="text"/>
            <field name="contentType" type="text" length="100"/>
            <field name="refNumber" type="auto"/>
            <field name="fileSize" type="integer"/>
            <field name="versionNumber" type="integer" label="Document Version" required="false"/>
            <field name="numIndex" type="integer"/>
            <field name="requiredFlag" type="boolean" required="false"/>
            <field name="coversheetStream" type="binary"/>
            <field name="uploadedFlag" type="boolean" required="false"/>
            <field name="generatedFlag" type="boolean" required="false"/>
            <field name="receivedDttm" type="date-time"/>
            <field name="uploadDttm" type="date-time" label="Uploaded Date and Time"/>
            <field name="generatedDttm" type="date-time" label="Uploaded Date and Time"/>
            <reference name="uploadedStreamBy" entity-type="User" relation="refers-to"/>
            <reference name="generatedStreamBy" entity-type="User" relation="refers-to"/>
            <reference name="documentClassRef" entity-type="DocumentClass" relation="owner"/>
            <collection name="documentPublishHistories" collection-type="list" entity-type="DocumentPublishHistory" referred-by="document" relation="owner"/>
			<collection name="emailForGenerateDoc" collection-type="list" entity-type="DocumentPublishHistory" referred-by="emailForGenDoc" relation="owner"/>
			<collection name="faxForGenerateDoc" collection-type="list" entity-type="DocumentPublishHistory" referred-by="faxForGenDoc" relation="owner"/>
			<collection name="emailForSendDoc" collection-type="list" entity-type="DocumentPublishHistory" referred-by="emailForSendDoc" relation="owner"/>
			<collection name="faxForSendDoc" collection-type="list" entity-type="DocumentPublishHistory" referred-by="faxForSendDoc" relation="owner"/>           
			<reference name="documentCategoryRef" entity-type="DocumentCategory" relation="owner" />
            <reference name="documentTypeRef" entity-type="DocumentType" relation="owner" /><!-- required="true" -->
            <reference name="approval" entity-type="Approval" relation="owner"/>
            <field name="coverSheetFlag" type="boolean" label="Cover Sheet"/>
            <field name="autoDocId" type="derived:text" label="Automated Document ID"/>
            <field name="templateName" type="text" label="Template Name"/>
            <field name="lookupId" type="text"/> <!-- used for mapping ucc serach record with document -->
            
            <reference name="generatedDocumentGroup" entity-type="DocumentGroup" relation="refers-to"/>
            <reference name="uploadedDocumentGroup" entity-type="DocumentGroup" relation="refers-to"/>          
            <!-- Temporary fields, to support UI End -->
            <reference name="documentGroup" entity-type="DocumentGroup" relation="refers-to" required="false" />
 
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="documentRelatedTo" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">DOCUMENT_RELATED_TO</param>
				</lookup>
			</reference>
            <field name="requestLevel" type="boolean" ruleTriggerOnEvent="true"/>
            <field name="relatedTo" type="derived:text"/>
            <collection name="publishedTo" collection-type="list" entity-type="DocumentPublishHistory" relation="owner"/>
            <reference name="associatedRequest" entity-type="Request" relation="refers-to"/>
			<!-- <collection name="associatedFacilities" collection-type="list" entity-type="Facility" relation="refers-to">
                <lookup name="mvel">
                    <param name="expr">root.allFacilities</param>
                </lookup>
                 <filters>
                 <filter triggerExpr="isdef root_documentGroup_generatedDocuments" expr="if(isdef root_documentGroup_generatedDocuments){entity.wfStatus.statusKey == ('FACILITY_STATUS_DOCUMENTATION') || entity.wfStatus.statusKey == ('FACILITY_STATUS_DOCS_CREATED') || entity.wfStatus.statusKey == ('FACILITY_STATUS_FUNDED')} else {return true;}"/>
                </filters>
            </collection> -->
            <collection name="associatedCustomers" collection-type="list" entity-type="FacilityCustomerRole" relation="refers-to">
                <lookup name="mvel">
                    <param name="expr">root.getAllFacilityCustomerRoles</param>
                </lookup>
            </collection>
            <collection name="associatedPartners" collection-type="list" entity-type="Partner" relation="refers-to"/>
			<reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true">
				<lookup>
					<param name="workflowEntity">WORKFLOW_ENTITY_DOCUMENT</param>
				</lookup>
			</reference>
            <collection name="documentSigners" collection-type="list" entity-type="DocumentSigner" referred-by="document" relation="owner" />
            <collection name="documentPagesAsImages" collection-type="list" entity-type="PageAsImage" referred-by="document" relation="owner" />
            <field name="signingMetadata" type="binary"/>            		
            <field name="iconName" type="derived:text" />
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.IDocument</data>
            	<data>com.thirdpillar.foundation.model.ICheckout</data>
                <data>com.thirdpillar.foundation.model.Metafied</data>
				<data>com.thirdpillar.foundation.model.WorkflowAware</data>
                <data>com.thirdpillar.foundation.model.Iconized</data>
            </feature>
            <display-format>$o.documentName$</display-format>
			<icon>entity.iconName</icon>            
            <find-queries>
            	<query name="docsToPrint" select="many">where printJobDttm is null and uploadedStreamSize is not null and documentStatus.key = 'DOCUMENT_STATUS_APPROVED' and documentType.key in (:documentTypes)</query>
            	<query name="findByClassCategory" select="one">where documentClass.key =:documentClass and documentCategory.key =:documentCategory</query>
            </find-queries>
        </entity>
        <entity name="DocumentGroup">
            <collection name="allDocuments" collection-type="list" entity-type="Document" referred-by="documentGroup" relation="owner"/>
            <collection name="documentPackages" collection-type="list" entity-type="DocumentPackage" referred-by="documentGroup" relation="owner"/>
        </entity>
        <entity name="DocumentPublishHistory" stereotype="managed">
            <field name="comments" type="text"/>
            <field name="email" type="text"/>
            <field name="firstName" type="text"/>
			<field name="lastName" type="text"/>
			<field name="fax" type="text" length="50"/>
            <reference name="contact" entity-type="Contact" relation="owner"/>
            <reference name="document" entity-type="Document" relation="refers-to"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<reference name="emailForGenDoc" entity-type="Document" relation="refers-to"/>
			<reference name="documentPackage" entity-type="DocumentPackage" relation="refers-to"/>
			<reference name="faxForGenDoc" entity-type="Document" relation="refers-to"/>
			<reference name="emailForSendDoc" entity-type="Document" relation="refers-to"/>
			<reference name="faxForSendDoc" entity-type="Document" relation="refers-to"/>
        </entity>        
        <entity name="DocumentSigner" stereotype="managed">
            <reference name="request" entity-type="Request" relation="refers-to"/>
            <reference name="document" entity-type="Document" relation="refers-to"/>
            <field name="signerType" type="text"/>
            <field name="signerId" type="text"/>
            <field name="name" type="text"/>
            <field name="signerRefId" type="text"/>
            <field name="docSignedFlag" type="boolean"/>
            <field name="signedDttm" type="date-time"/>
        </entity>        
        <entity name="PageAsImage" stereotype="managed">
            <reference name="document" entity-type="Document" relation="refers-to"/>
            <field name="page" type="integer"/>
            <field name="image" type="binary"/>
            <field name="imageWidth" type="integer"/>
            <field name="imageHeight" type="integer"/>
        </entity>      
        <entity name="DocumentCatalogItem" stereotype="configuration" label="Document Catalog">
<!--             <field name="description" type="text" length="755"/> -->
            <field name="description" type="textarea"/>
            <reference name="documentCategoryDetail" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DOCUMENT_CATEGORY</param>
                </lookup>
            </reference>
            <reference name="documentClassDetail" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DOCUMENT_CLASS</param>
                </lookup>
            </reference>
            <reference name="documentTypeDetail" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DOCUMENT_TYPE</param>
                </lookup>
            </reference>
            <reference name="esignRequired" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="autoDocId" type="text" label="Automated Document ID"/>
            <find-queries>
                <query name="getAutoDocId" select="one">where documentCategoryDetail.key like :documentCategoryDetail_key and documentClassDetail.key like :documentClassDetail_key and documentTypeDetail.key like :documentTypeDetail_key</query>
            </find-queries>
        </entity>
          
        <!-- Approval -->
        <entity name="Approval" stereotype="managed">
            <field name="name" type="text"/>
            <field name="entityId" type="text" length="36"/>
            <field name="processInstanceId" type="text" length="36"/>
            <field name="refNumber" type="auto"/>
            <field name="inactive" type="boolean"/>
            <reference name="approvalType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">APPROVAL_TYPE</param>
                </lookup>
            </reference>
            <reference name="decision" entity-type="AttributeChoice" relation="refers-to" internal="true">
                <lookup>
                    <param name="key">APPROVAL_DECISION</param>
                </lookup>
            </reference>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">APPROVAL_STATUS</param>
                </lookup>
            </reference>
            <reference name="parent" entity-type="Approval" relation="refers-to"/>
			<collection name="orderedApprovalLevels" collection-type="derived:list" entity-type="ApprovalLevel" relation="refers-to"/>
            <collection name="approvalLevels" collection-type="list" entity-type="ApprovalLevel" referred-by="approval" relation="owner"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>            
            <find-queries>
                <query name="byId" select="one">where id = :id</query>
            </find-queries>
        </entity>
        <entity name="ApprovalLevel" stereotype="managed">
            <field name="name" type="text" required="true"/>
            <field name="uppercaseName" type="derived:text"/>
            <field name="minRespReqPct" type="percent"/>
            <reference name="approval" entity-type="Approval" relation="refers-to"/>
            <reference name="decision" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">APPROVAL_DECISION</param>
                </lookup>
            </reference>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">APPROVAL_STATUS</param>
                </lookup>
            </reference>
            <collection name="approverList" collection-type="list" entity-type="Approver" referred-by="approvalLevel" relation="owner"/>
            <field name="approverTeamList" type="derived:text"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
            <find-queries>
                <query name="byId" select="one">where id = :id</query>
            </find-queries>
        </entity>
        <entity name="Approver" stereotype="managed">
            <field name="requiredFlag" type="boolean" required="false"/>
            <field name="decisionDer" type="derived:text" />
            <reference name="approvalLevel" entity-type="ApprovalLevel" relation="refers-to"/>
            <reference name="approverType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">APPROVER_TYPE</param>
                </lookup>
            </reference>
            <reference name="decision" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">APPROVAL_DECISION</param>
                </lookup>
            </reference>
            <reference name="user" entity-type="User" relation="refers-to">
             	<filters>
                    <filter triggerExpr="isdef root" expr=" entity.wfStatus !=null  &amp;&amp;  entity.wfStatus.statusKey !='USER_STATUS_INACTIVE' &amp;&amp; ( entity.hasRoleCategory('ROLE_CATEGORY_CREDIT_ANALYST')  || entity.hasRoleCategory('ROLE_CATEGORY_CREDIT_MANAGER') || entity.hasRoleCategory('ROLE_CATEGORY_SUPER_ADMINISTRATOR')) "/>
                </filters>
            </reference>
             <reference name="team" entity-type="Team" relation="refers-to"/>
            <reference name="deferTo" entity-type="User" relation="refers-to"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">APPROVAL_STATUS</param>
                </lookup>
            </reference>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
            <display-format>$o.user.contact.displayName$</display-format>            
            <find-queries>
                <query name="byId" select="one">where id = :id</query>
            </find-queries>
        </entity>        
        
        <!--  Customer Module -->
        <entity name="Customer" stereotype="business-entity" label="Counterparty">
			<change-log compare-profile="changeLog-Customer"/>
            <reference name="customerType" entity-type="AttributeChoice" relation="refers-to" label="Customer Type">
                <lookup>
                    <param name="key">CUSTOMER_TYPE</param>
                    <param name="groupMvel"><![CDATA[if(thiz.isDebtor()||thiz.isAccount()) {return 'CUSTOMER_TYPE_ROLE_DEBTOR'; } else {return 'CUSTOMER_TYPE_ANY_ROLE'; }]]></param>
                </lookup>
            </reference>
        	<field name="publicCompany" type="boolean"/>
            <field name="soleProprietor" type="boolean" label="Sole Proprietor"/>
            <field name="refNumber" type="auto" tags="Header"/>
            <field name="firstName" type="text" indexed="true" ruleTriggerOnEvent="true"/>            
            <field name="middleName" type="text" ruleTriggerOnEvent="true"/>
            <field name="lastName" type="text" indexed="true" ruleTriggerOnEvent="true"/>
            <field name="legalName" type="text" length="60" label="Legal Name" required="false" indexed="true"/>
            <reference name="companyType" entity-type="AttributeChoice" relation="refers-to" label="Company Type">
                <lookup>
                    <param name="key">COMPANY_TYPE</param>
                </lookup>
            </reference> 
             <reference name="percentOwnership" entity-type="AttributeChoice" relation="refers-to" label="% Ownership">
                <lookup>
                    <param name="key">COMPANY_OWNERSHIP_PERCENT</param>
                </lookup>
            </reference> 
            <field name="fdicNumber" type="text"/>
            <field name="occNumber" type="text"/> 
            <field name="ibr" type="percent"/>
            <field name="ownershipValue" type="number"/>
            <field name="currCitiEmployee" type="boolean" />
            <field name="estimatedAnnualSpend" type="money"/>
            <field name="customerRunRateDlrs" type="percent"/>
            <field name="guarantrAddress" type="derived:text"/>
            <field name="abaNumber" type="text"/>
			<field name="sfdcByUser" type="text" label="SFDC Created By" internal="true"/>
			<field name="emailOptOut" type="boolean"/>
			<field name="doNotCall" type="boolean"/>
			<field name="privacyIndicator" type="boolean"/>
			<field name="yearsInOwnership" type="text"/>
			<field name="salutation" type="text" length="25"/>
            <reference name="suffix" entity-type="AttributeChoice" relation="refers-to" label="Suffix">
                <lookup>
                    <param name="key">SUFFIX</param>
                </lookup>
            </reference>    
            <reference name="title" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">TITLE</param>
                </lookup>
            </reference>
            <reference name="source" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SOURCE</param>
                </lookup>
            </reference>
            
            <field name="verifiedForDeDup" type="boolean" internal="true"/>
            <field name="customerName" type="derived:text" label="Customer Name"/>
            <field name="fieldName" type="derived:text" label="Field Name"/>
            <field name="federalTaxId" type="secret" input-mask="99-9999999" label="Federal Tax ID"/>
            <field name="duns" type="secret" input-mask="*********"/>
            <field name="dunsLookup" type="secret"/>
            <field name="ssn" type="secret" input-mask="999-999-999" label="Social Security Number"/>
        	<field name="externalIdentifier" type="text" length="36" label="External ID" internal="true" tags="Header" indexed="true" unique="externalIdentifier"/>
        	<field name="portalCustomerId" type="text" length="36" label="Portal Customer ID" internal="true" tags="Header" indexed="true"/>
  			<field name="obligorNumber" type="text" label="Obligor Number"/>
  			<field name="obligorNumberDer" type="derived:text" label="Obligor Number"/>
			<reference name="primarySite" entity-type="CustomerSite" relation="owner" ruleTriggerOnEvent="true"/>
            <collection name="sites" collection-type="list" entity-type="CustomerSite" relation="owner"/>
            <collection name="bureauData" collection-type="list" entity-type="BureauData" relation="owner"/>
            <reference name="defaultBureauData" entity-type="derived:BureauData" relation="owner"/>
            <reference name="assetLiability" entity-type="FinancialAssetLiability" relation="owner"/>
            <reference name="incomeExpense" entity-type="FinancialIncomeExpense" relation="owner"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
            
            <!-- Business Details -->
            <reference name="businessDetail" entity-type="BusinessDetail" relation="owner" />
            <field name="website" type="url"/>
            <field name="sosWebsite" type="derived:url" internal="true"/>
            <reference name="legalEntityType" entity-type="AttributeChoice" relation="refers-to" label="Legal Entity Type" required="false">
                <lookup>
                    <param name="key">LEGAL_ENTITY_TYPE</param>
                </lookup>
            </reference>
            <field name="otherLegalEntityType" type="text" label="Other Legal Entity Type"/>
            <field name="numOfEmployees" type="integer" label="Number of employees" length="9"/>
            <field name="businessStartDttm" type="date" ruleTriggerOnEvent="true"/>
            <field name="timeInbusiness" type="derived:integer"/>
            <field name="description" type="textarea"/>
            <field name="annualRevenue" type="money" label="Annual Revenue"/>
            <field name="annualNetProfit" type="money" label="Annual Net Profit"/>
            <reference name="natureOfBusiness" entity-type="AttributeChoice" relation="refers-to" label="Premier Page">
                <lookup>
                    <param name="key">NATURE_OF_BUSINESS</param>
                </lookup>
            </reference>
            <reference name="ownership" entity-type="AttributeChoice" relation="refers-to" label="Premier Page">
                <lookup>
                    <param name="key">OWNERSHIP_TYPE</param>
                </lookup>
            </reference>
            <field name="businessDescription" type="text"/>
            <field name="sfdcSiteName" type="text"/>
            <field name="plStatementDate" type="date-time" label="P And L Statement Date"/>
            <reference name="sicCode" entity-type="AttributeChoice" relation="refers-to" label="SIC Code" required="false">
                <lookup>
                    <param name="key">SIC_CODE</param>
                </lookup>
            </reference>
            <reference name="naicsCode" entity-type="AttributeChoice" relation="refers-to">
                <filters>
                    <filter triggerExpr="entity.attribute != null" expr="entity.attribute.key=='NAICS_CODE'" />
                </filters>
            </reference>  
            <field name="naicsDescDer" type="derived:text"/>                     
            <field name="currentManagementStartDttm" type="date-time" label="Management Control Date"/>
			<reference name="stateIncorporated" entity-type="State" relation="refers-to" label="Organized under laws of (State/Jurisdiction)"/>
			<reference name="partyExposure" entity-type="PartyExposure" relation="owner"/>            
            <field name="bankruptcyDeclared" type="boolean" label="Have you ever declared Bankruptcy?"/>
            <field name="medicalOrDentalProvider" type="boolean" required="false" label="Medical Or Dental Provider"/>
           <reference name="stateOfIncorp" entity-type="State" relation="refers-to"/>
			<!-- Individual Details -->
            <reference name="countryOfCitizenship" entity-type="Country" relation="refers-to"/>
            <reference name="countryResidence" entity-type="Country" relation="refers-to" />
			<field name="usCitizen" type="boolean" label="US Citizen"/>
            <reference name="insStatus" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INS_STATUS</param>
                </lookup>
            </reference>
            <field name="nationality" type="text"/>
            <field name="birthCity" type="text" length="36" label="Place Of Birth (City)"/>
            <reference name="birthCountry" entity-type="Country" relation="refers-to" label="Place Of Birth (Country)"/>
            <field name="birthDate" type="date" label="Date of Birth" required="false" ruleTriggerOnEvent="true"/>
            <field name="adjustedGrossIncome" type="money"/>
            <field name="adjustedNetWorth" type="money"/>
            <field name="yrsMoveToUs" type="number" label="Year moved to US" length="9"/>
			<field name="disclosePersonalInfo" type="boolean" label="Disclose personal information for marketing purposes"/>
			<field name="yearsWithCompany" type="integer" length="9"/>
			<field name="partyPermissionPullBureau" type="boolean" label="Party has given permissionto pull Bureau Report"/>
			<reference name="disclosureMethod" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">DISCLOSURE_METHOD</param>
                </lookup>
            </reference>
			<field name="disclosuresAccepted" type="boolean" />
			<field name="disclosuresDate" type="date-time"/>
			<reference name="disclosuresVerifiedBy" entity-type="User" relation="refers-to"/>
			<field name="disclosureStmtCommunicated" type="boolean"/>
			<field name="electronicComAgrAccepted" type="boolean"/>
			<reference name="homeOwnOrRent" entity-type="AttributeChoice" relation="refers-to" label="Home Own/Rent">
                <lookup>
                    <param name="key">OWN_RENT</param>
                </lookup>
            </reference>
			<field name="yearsAtCurrentResidence" type="integer" label="Years at current residence"/>
			<field name="totalLiquidAssets" type="money"/>
			<field name="annualIncome" type="money" label="Annual Income"/>
            <field name="placeOfEmployment" type="text" label="Place of Employment"/>
            <field name="lengthOfEmployment" type="number" label="Length of employment in current position" length="9"/>
            <field name="limitEscalationDate" type="date-time"/>
			<collection name="riskRatings" collection-type="list" entity-type="RiskRating" relation="owner"/>
			<collection name="borrowerRatings" collection-type="list" entity-type="BorrowerRating" relation="owner"/>
			<reference name="orr" entity-type="derived:AttributeChoice" relation="refers-to"/>			
			<collection name="dbas" collection-type="list" entity-type="PartyDba" relation="refers-to"/>
			<collection name="externalIdentifiers" collection-type="list" entity-type="PartyExtIdentifier" relation="owner"/>
			<collection name="licenseInformation" collection-type="list" entity-type="LicenseInformation" relation="owner"/>
			<collection name="partyOwnedAssets" collection-type="list" entity-type="PartyOwnedAsset" referred-by="customer" relation="owner"/>			
            <collection name="partyLiabilities" collection-type="list" entity-type="PartyLiability" referred-by="customer" relation="owner"/>
            <collection name="bankTrades" collection-type="list" entity-type="BankAndTrade" referred-by="customer" relation="owner"/>				
            <collection name="holds" collection-type="list" entity-type="Hold" referred-by="customer" relation="owner"/>            
            <reference name="bankruptcyInfo" entity-type="BankruptcyInfo" relation="owner"/> <!--  should we keep this? -->   
            <reference name="branchInformation" entity-type="BranchInformation" relation="owner"/>   
            <reference name="pdLgdRating" entity-type="PdLgdRating" relation="owner"/> 
            <collection name="defaultEvents" collection-type="list" entity-type="DefaultEvents" relation="owner"/>
            <collection name="negotiableSecurities" collection-type="list" entity-type="NegotiableSecurity" relation="owner" referred-by="customer"/>      
            <field name="totalNegotiableSecurities" type="derived:money"/>
			<collection name="customerExposureLimits" collection-type="list" entity-type="CustomerExposureLimit" relation="owner" referred-by="customer" internal="true"/>      
            <reference name="securitiesLendingExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="reposExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="reverseReposExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="placementsExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="fedFundsExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="settlementExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="safekeepingExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="nostroBalanceExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="interestRateDerivativesExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="creditDefaultSwapsExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="coveredBondsExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="corporateDebtExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="partyDetail" entity-type="PartyDetail" relation="owner"/>
			<reference name="fxInOutSwapsExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="unallocatedLimitsExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
			<reference name="countryLimitsExposure" entity-type="derived:CustomerExposureLimit" relation="refers-to"/>
            <field name="totalExposureLimitAmt" type="derived:money"/>
        	<field name="totalExposureAmt" type="derived:money"/>
            <field name="unusedCreditLines" type="derived:money"/>
        	<field name="eligibleGuarantees" type="money"  internal="true"/>
            <field name="eligibleEquityCreditDer" type="money" internal="true"/>
        	<field name="otherEligigbleHedges" type="money" internal="true"/>
        	<field name="effectOfBilateralAgreements" type="money" internal="true"/>
            <field name="totalEligibleCollateral" type="derived:money"/>
        	<field name="netExposure" type="derived:money"/>
        	<field name="ageofCustomer" type="derived:integer"/>
        	<field name="reviewDate" type="date-time"/>
        	<field name="yearsInBusiness" type="integer"/>
        	<field name="yearsInBusinessDer" type="derived:text"/>
        	<reference name="approved" entity-type="AttributeChoice" relation="refers-to">
        		<lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
        	</reference>
        	<field name="creditLimit" type="amount" length="18"/>
        	<field name="maxCreditPeriod" type="integer" length="9" />
        	<field name="daysBeyondTerms" type="integer" length="9"/>
        	<field name="industryDBT" type="text" length="9"/>
        	<field name="servicingIdentifier" type="text" internal="true" tags="Header" indexed="true" unique="true"/>
        	<reference name="debtorContact" entity-type="Contact" relation="owner"/>
        	<collection name="collaterals" collection-type="list" entity-type="Collateral" relation="owner" referred-by="customer"/>
            
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to">
                <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_CUSTOMER</param>
                </lookup>
            </reference>
           	 <field name="formattedTaxIDNum" type="derived:text" />
			 <reference name="provisioned" entity-type="AttributeChoice"	relation="refers-to" internal="true">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			 </reference>			 
			 <collection name="customerRelations" collection-type="list" entity-type="CustRelationManagement" relation="owner" referred-by="customer"/>
			 <reference name="keyPricing" entity-type="KeyPricing" relation="owner"/> 
			<field name="riskScoreDttm" type="date-time"/>
	         <reference name="riskScore" entity-type="AttributeChoice" relation="refers-to">
	             <lookup>
	                 <param name="key">DEBTOR_RISK_SCORE</param>
	             </lookup>
	         </reference>
	         <reference name="adjRiskScore" entity-type="AttributeChoice" relation="refers-to">
	             <lookup>
	                 <param name="key">DEBTOR_RISK_SCORE</param>
	             </lookup>
	         </reference>
			 <feature operation="implements">
                <data>com.thirdpillar.foundation.model.WorkflowAware</data>
            </feature>
            <display-format>$o.customerName$</display-format>
            <find-queries>
            	<!-- <query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query> -->
                <query name="quickSearch" select="many">where firstName like :q or lastName like :q or legalName like :q</query>
                <query name="byRefNumber" select="one">where refNumber = :refNumber</query>
                <query name="bySalesForcecomId" select="one">where externalIdentifier = :externalIdentifier</query>
                <query name="byPortalCustomerId" select="one">where portalCustomerId = :portalCustomerId</query>
                <query name="bySsn" select="many">where ssn = :customerSSN</query>
                <query name="bySsnAndId" select="many">where ssn = :customerSSN and id != :id</query>
                <query name="byFein" select="many">where federalTaxId = :customerFEIN</query>
                <query name="byFeinAndId" select="many">where federalTaxId = :customerFEIN and id != :id</query>
                <query name="byDunsLookup" select="one">where dunsLookup = :dunsLookup</query>
                <query name="byDunsAndId" select="many">where duns = :duns and id != :id</query>
				<query name="byCustTypeAndId" select="many">where customerType.key in (:customerType) and primarySite.siteDetails.email= (:email) and id != :id</query>
				<query name="byCustType" select="many">where customerType.key in (:customerType) and primarySite.siteDetails.email= (:email)</query>
                <query name="byExposureAmountAboveThreshold" select="many">cust inner join fetch cust.customerExposureLimits as cel where cel.exposureAmt.amount > (0.9 * cel.exposureLimitAmt.amount) and cust.limitEscalationDate is null</query>
                <query name="byExposureAmountAboutToExpire" select="many">cust inner join fetch cust.customerExposureLimits as cel where cel.expiryDate between :startdate and :enddate and cust.limitEscalationDate is null</query>
            </find-queries>
        </entity>   
        
        <entity name="BureauData" stereotype="managed">
        	<field name="agencyRatingDate" type="date-time"/>
        	<reference name="agencyRating" entity-type="AttributeChoice" relation="refers-to" label="Agency Rating">
				<lookup>
					<param name="key">AGENCY_RATING</param>
				</lookup>
			</reference>
        	<reference name="paydexTrend" entity-type="AttributeChoice" relation="refers-to" label="Paydex Trend">
				<lookup>
					<param name="key">PAYDEX_TREND</param>
				</lookup>
			</reference>
			<field name="dnbReportDate" type="date-time" />
        	<field name="dnbCreditScore" type="integer"/>
        	<field name="dnbViabilityRating" type="integer"/>
        	<field name="dnbDataDepthIndicator" type="text"/>
        	<field name="industryDBT" type="integer"/>
        	<field name="companyDBT" type="integer"/>
        </entity>
         
        <entity name="CustomerExposureLimit" stereotype="managed">
        	<reference name="productType" entity-type="AttributeChoice" relation="refers-to" label="Product Type">
				<lookup>
					<param name="key">EXPOSURE_LIMIT_FACILITY_TYPE</param>
				</lookup>
			</reference>
        	<field name="exposureLimitAmt" type="money"/>        	
        	<field name="volatility" type="number"/>
        	<field name="expiryDate" type="date-time"/>

        	<field name="exposureAmt" type="money"/>
        	<field name="exposureAsofDate" type="date-time"/>
        	<reference name="customer" entity-type="Customer" relation="refers-to"/>
        </entity>    
        <entity name="NegotiableSecurity" stereotype="managed">
        	<reference name="negotiableSecurityType" entity-type="AttributeChoice" relation="refers-to" label="Negotiable Security">
				<lookup>
					<param name="key">NEGOTIABLE_SECURITY_TYPE</param>
				</lookup>
			</reference>
        	<field name="description" type="text"/>
        	<field name="identifier" type="text"/>
        	<field name="quantity" type="integer"/>
        	<field name="value" type="money"/>
        	<field name="haircut" type="number"/>
        	<field name="assetValue" type="derived:money" />
        	<field name="valuationDate" type="date-time"/>
        	<reference name="customer" entity-type="Customer" relation="refers-to"/>
        	<find-queries>
                <query name="byIdentifier" select="one">where identifier = :identifier</query>
        	</find-queries>
        </entity>    
        <entity name="CustomerSite" stereotype="managed">
            <field name="refNumber" type="auto" internal="true"/>
            <field name="siteName" type="text" length="1020" required="false"/>
            <field name="city" type="derived:text" />
            <field name="state" type="derived:text" />
            <field name="usage" type="derived:text" />
            <reference name="defaultAddress" entity-type="derived:Address" relation="owner"/>
			<reference name="siteUse" entity-type="AttributeChoice" relation="refers-to" label="Non-compete Terms?">
				<lookup>
					<param name="key">SITE_USE_TYPE</param>
				</lookup>
			</reference>
			<field name="officeSize" type="number" label="Office Size (S.F.)"/>
            <field name="curOfficeHoursDayPerWeek" type="number" label="Current office hours (Days per week)"/>
            <field name="newOfficeHoursDayPerWeek" type="number" label="New Office hours (Days per week)"/>
			<reference name="nonCompeteTerms" entity-type="AttributeChoice" relation="refers-to" label="Non-compete Terms?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="officeComputerized" entity-type="AttributeChoice" relation="refers-to" label="Office Computerized?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<field name="leasePayment" type="money" label="Lease Payment"/>
			<field name="leaseExpirDttm" type="date-time" label="Lease Expiration Date"/>
			<field name="yrsRemainLease" type="number" label="Years Remaining on Lease (Incl. Renewal)"/>
			<field name="leaseAmtProposed" type="money" label="Lease Amount - Proposed"/>			
            <reference name="active" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="practiceInformation" entity-type="PracticeInformation" relation="owner"/>            
            <reference name="siteDetails" entity-type="Contact" relation="owner"/>
            <collection name="contacts" collection-type="list" entity-type="Contact" relation="owner"/>
        </entity>
        
        
        <entity name="RiskRating" stereotype="managed">
            <field name="riskEvaluationDttm" type="date-time" required="true"/>
            <reference name="current" entity-type="AttributeChoice" relation="refers-to" required="true">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="obligorRR" entity-type="AttributeChoice" relation="refers-to" required="true">
                <lookup>
                    <param name="key">RISK_RATING</param>
                </lookup>
            </reference>
            <reference name="source" entity-type="AttributeChoice" relation="refers-to" required="true">
                <lookup>
                    <param name="key">ORR_SOURCE</param>
                </lookup>
            </reference>
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
        </entity>
        
        <entity name="BorrowerRating" stereotype="managed">
            <field name="fraudScoreDttm" type="date-time"/>
            <field name="fraudScore" type="integer" length="3"/>
            <field name="adjFraudScore" type="integer" length="3"/>
            <field name="riskScoreDttm" type="date-time"/>
            <reference name="riskScore" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">RISK_SCORE</param>
                </lookup>
            </reference>
            <reference name="adjRiskScore" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">RISK_SCORE</param>
                </lookup>
            </reference>
        </entity>
        
        <entity name="PdLgdRating" stereotype="managed">
        	<field name="partyRatingDttm" type="date-time"/>
        	<field name="rawModelPartyRating" type="number"/>
        	<field name="rawModelPartyCdtScore" type="number"/>
        	<field name="rawModelLgdScore" type="number" scale="3"/>
        	<field name="lgdRatingDttm" type="date-time"/>
        	<field name="lgdRatingModelName" type="text"/>
        </entity>
         <entity name="DefaultEvents" stereotype="managed">
         	<reference name="defaultEvent" entity-type="AttributeChoice" relation="refers-to" label="Default Event">
                <lookup>
                    <param name="key">DEFAULT_EVENT</param>
                </lookup>
            </reference>
        	<field name="defaultEventDttm" type="date-time"/>
        	<field name="defaultEpisodeStartDttm" type="date-time"/>
        	<reference name="customer" entity-type="Customer" relation="refers-to"/>
        </entity>
        <entity name="PartyDba" stereotype="managed" label="Party DBA">
            <field name="refNumber" type="auto" tags="Header"/>
            <field name="dbaName" type="text" label="DBA Name"/>
            <field name="primaryDbaFlag" type="boolean"/>
            <field name="servicingIdentifier" type="text" tags="Header"/>
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
            <reference name="debtorCustomer" entity-type="DebtorCustomer" relation="refers-to"/>
            <find-queries>
        		<!-- <query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query> -->
        		<query name="byRefNumber" select="one">where refNumber = :refNumber</query>
            </find-queries>
        </entity>        
        
        <entity name="LicenseInformation" stereotype="managed">
            <field name="externalIdentifier" type="text"/>
            <field name="licenseNumber" type="text" length="1020"/>
            <field name="licensedSince" type="date-time" />
            <field name="licenseExpDate" type="date-time" />
            <field name="licenseRenewalDate" type="date-time" />
            <reference name="licenseStatus" entity-type="AttributeChoice" relation="refers-to" label="License Status">
                <lookup>
                    <param name="key">LICENSE_STATUS</param>
                </lookup>
            </reference>
            <reference name="licenseApprover" entity-type="User" relation="refers-to"/>
            <!-- <field name="licenseApprover" type="text"/> -->
            <field name="licenseStatusDate" type="date-time"/>
            <field name="licenseType" type="text"/>  
			<field name="licenseComment" type="textarea" />
            <field name="licenseState" type="text"/>                  
            <find-queries>
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
            </find-queries>
        </entity>
        
        <entity name="PartyExtIdentifier" stereotype="managed">
            <field name="expirationDate" type="date-time"/>
            <field name="taxIdNumber" type="secret" input-mask="99-9999999" label="Federal Tax ID"/>
            <reference name="active" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="identifierValue" entity-type="AttributeChoice" relation="refers-to" label="Taxpayer ID">
                <lookup>
                    <param name="key">TAXPAYER_ID</param>
                </lookup>
            </reference>
            <reference name="extIdentifierType" entity-type="AttributeChoice" relation="refers-to" label="Type" required="true">
                <lookup>
                    <param name="key">EXT_IDENTIFIER_TYPE</param>
                </lookup>
            </reference>
            
        </entity>        
        <entity name="Hold" stereotype="managed">
            <field name="holdFlag" type="boolean" required="false"/>
            <field name="holdDttm" type="date-time"/>
            <field name="comments" type="text"/>
            <reference name="holdType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">HOLD_TYPE</param>
                </lookup>
            </reference>
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
            <reference name="partner" entity-type="Partner" relation="refers-to"/>
            <reference name="holdBy" entity-type="User" relation="refers-to"/>
            <feature operation="implements">
				<data>com.thirdpillar.foundation.model.Metafied</data>
			</feature>
        </entity>
        <entity name="PartyCaution" stereotype="managed">
            <field name="cautionType" type="text"/>
            <field name="statusDttm" type="date-time"/>
            <reference name="statusFlag" entity-type="AttributeChoice" relation="refers-to" label="CSR">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="bankruptcyFilingDttm" type="date-time"/>
            <field name="bankruptcyRelDttm" type="date-time"/>
            <reference name="bankruptcyChapter" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BANKRUPTCY_CHAPTER</param>
                </lookup>
            </reference>
            <reference name="bankruptcyType" entity-type="AttributeChoice" relation="refers-to" label="Bankruptcy Type">
                <lookup>
                    <param name="key">BANKRUPTCY_TYPE</param>
                </lookup>
            </reference>
            <field name="comments" type="textarea"/>
            <field name="outofBusinessDttm" type="date-time"/>
            <field name="outofBusinessRecDttm" type="date-time"/>
            <reference name="flaggedBy" entity-type="User" relation="refers-to"/>
            <feature operation="implements">
				<data>com.thirdpillar.foundation.model.Metafied</data>
			</feature>
        </entity>
        
        <entity name="PracticeInformation" stereotype="managed" label="Practice Information">
			<field name="noCagesRun" type="number" label="Number of Cages / Runs"/>
            <field name="noCagesRunProposed" type="number" label="Number of Cages / Runs (Proposed)"/>
            <field name="noXrayRoomProposed" type="number" label="Number of Xray Rooms (Proposed)"/>
            <field name="noDarkRoom" type="number" label="Number of Dark Rooms"/>
            <field name="noXrayRoom" type="number" label="Number of Xray Rooms"/>
            
            <field name="noDarkRoomProposed" type="number" label="Number of Dark Rooms (Proposed)"/>
            <field name="noOfSurgeryRoom" type="number" label="Number Of Surgery Rooms"/>
           <field name="noOfTreatementRooms" type="number" label="Number of Treatement Rooms"/>
            <field name="noOfSurgProcRoomsProposed" type="number" label="Number of Surgery/Procedure Rooms (Proposed)"/>
            <field name="equipOpsExamLanesProposed" type="number"/>
            <field name="noOfTreatementTables" type="number"/>
            <field name="avrgTransactionCharge" type="amount" label="Average transaction charge"/>
            <field name="perOfSmallAnimalProcedure" type="percent" label="What percentage of Small Animal procedures are performend in the surrounding municipality? (VET)"/>
            <field name="perOfOthrAnimalProcedure" type="percent" label="What percentage of Other Animal procedures are performend in the surrounding municipality? (VET)"/>
			<field name="noOfOperatoriesEqvpd" type="number" label=" Number Of Operatories – Equipped"/>
            <field name="noOfOperatoriesEqvpdPsd" type="number" label=" Number Of Operatories – Equipped (Proposed)"/>
            <!-- <field name="totalNumberOfFloors" type="number" label="Total Number of Floors"/>
            <field name="totalNumberOfTenants" type="number" label="Total Number of Tenants"/>
            <field name="ownerOccupied" type="boolean" label="Will the Practice be at least 51% owner occupied?"/>
            <field name="monthlyAssociationDues" type="amount" label="Monthly Association Dues"/>
            <field name="annualPropertyTax" type="amount" label="Annual Property Tax"/>  -->
            <field name="officeSize" type="number" label="Office Size (S.F.)"/>
            <field name="ageOfEqupmentYears" type="number" label="Age of Equipment (Years)"/>
            <field name="yrsRemainingOnLease" type="number" label="Years Remaining On Lease"/>
            <field name="noOfOperatoriesPlmd" type="number" label=" Number Of Operatories – Plumbed"/>
            <field name="monthlyOprtryRvnu" type="amount" label=" Monthly Operatory Revenue"/>
            <field name="crntMonthlyRent" type="amount" label=" Current Rent (Monthly):"/>
            <field name="proposedRent" type="amount" label=" Proposed Rent (Monthly):"/>
            <field name="noOfActivePatients" type="number" label=" # Of Active Patients"/>
            <field name="estAvgFeePerPatient" type="amount" label=" Est. Avg. Fee per Patient"/>
            <field name="noOfnewPatientsPerMth" type="number" label="# New Patients/Month"/>
			<field name="yrCompletedResidency" type="integer" label="Year completed residency (if applicable)?" length="4"/>
			<field name="borrowerOwnPriorPrac" type="number" label="How Long the borrower owned prior practice?"/>
			<field name="borrowerOwnCurrentPrac" type="number" label="How Long the borrower owned current practice?"/>
			<reference name="typeOfSpecialist" entity-type="AttributeChoice" relation="refers-to" label="Type of specialist (if applicable)?">
                <lookup>
                    <param name="key">TYPE_OF_SPECIALIST</param>
                </lookup>
            </reference>			
            <field name="yearsInPractice" type="text"/>
            <field name="yrsOfExperience" type="number"/>
            <field name="howLongdocAssoWithSector" type="number"/>
            <field name="yrsPreviousExp" type="number"/>
            <field name="asOfDate" type="date-time"/>
            <field name="revenuesSf" type="amount" internal="true"/>
			<field name="amtOfMalpracticeCoverage" type="amount"/>
			<reference name="specialIndustryType" entity-type="AttributeChoice" relation="refers-to" label="Special Industry">
                <lookup>
                    <param name="key">SPECIAL_INDUSTRY_TYPE</param>
                </lookup>
            </reference>
            <reference name="practiceSpeciality" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRACTICE_SPECIALITY</param>
                </lookup>
            </reference>
            <reference name="speciality" entity-type="AttributeChoice" relation="refers-to">
                <lookup name="mvel">
                    <param name="expr">if(thiz.practiceSpeciality != null  &amp;&amp; thiz.practiceSpeciality.relatedChoices != null) {return thiz.physicianSpeciality.relatedChoices;}else{ return new java.util.ArrayList();}</param>
                </lookup>
            </reference>
			
           <reference name="currentPrevPractice" entity-type="AttributeChoice" relation="refers-to">
                 <lookup>
                  <param name="key">CURRENT_PREVIOUS_PRACTICE</param>
                 </lookup>
             </reference>
          <reference name="malPracticeClaims" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                <param name="key">YES_OR_NO</param>
                </lookup>
          </reference>
          <reference name="doctorHaveLocal" entity-type="AttributeChoice" relation="refers-to" label="Does the doctor have local hospital privileges?">
            <lookup>
            <param name="key">YES_OR_NO</param>
            </lookup>
          </reference>
      	  <reference name="borrowrRelocating" entity-type="AttributeChoice" relation="refers-to"> 
            <lookup> 
            <param name="key">YES_OR_NO</param> 
            </lookup>
            </reference>
			
            <reference name="sellerOwnedCRE" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
		<!-- 	<reference name="conditionOfEquipment" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CONDITION_OF_EQUIPMENT</param>
                </lookup>
			</reference>  -->
			<field name="conditionOfEquipment" type="text" label="Condition of Equipment:"/>
            <reference name="equipmentUpgradesNeeded" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="lastTaxYearRevenue" type="amount" label="Last Tax Year Revenue"/>
			<field name="totalRevenueConsidered" type="amount" label="Revenue"/>
			<reference name="buyerPerfProcd" entity-type="AttributeChoice" relation="refers-to" label="Can Buyer Perform All Procedures?">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
			</reference>
			<!--<reference name="sellerOwnedPcts" entity-type="AttributeChoice" relation="refers-to" label="Has seller owned practice for at least 4 years?">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
			</reference>-->

			<reference name="nonCompeteTerms" entity-type="AttributeChoice" relation="refers-to" label="NON_COMPETE_TERMS">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
				<reference name="officeComputer" entity-type="AttributeChoice" relation="refers-to" label="NON_COMPETE_TERMS">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
            <field name="collectPctCapt" type="percent" label="Collections - % Capitation"/>
			<!--  <field name="noDaysPractice" type="number" label="Number of Days Working in Practice"/>
-->
            <field name="noExamRoom" type="number"/>
            <field name="noExamRoomProposed" type="number"/>
            <!--<field name="noCagesRun" type="number" label="Number of Cages / Runs"/>
            <field name="noXrayRoom" type="number" label="Number of Xray Rooms"/>
            <field name="noDarkRoom" type="number" label="Number of Dark Rooms"/>-->
            <field name="hospitalDisPrac" type="number" label="Hospital Distance from Practice"/>
            <reference name="officeElecMedicalRecd" entity-type="AttributeChoice" relation="refers-to" label="Does office have Electronic Medical Records?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<field name="collectionCaps" type="percent" label="Collections - % Capitation"/>
			<field name="collectionMedic" type="percent" label="Collections - % Medicaid"/>
			<field name="collectionPctPayments" type="percent" label="Collections - % Office Payments / Insurance"/>
			<field name="collectionPctPpo" type="percent" label="Collections - % PPO"/>
			<field name="collectionMedicare" type="percent" label="Collections - % Medicare"/>
			<field name="collectionPctHmo" type="percent" label="Collections - % HMO"/>
			<field name="collectionPctOther" type="percent" label="Collections - % Other"/>
            <field name="practiceContract" type="text" label="What are the terms of the Practice Seller / Buyer non-compete contract?"/>
            <field name="curOfficeHoursDayPerWeek" type="number" label="Current office hours (Days per week)"/>
            <field name="newOfficeHoursDayPerWeek" type="number" label="New Office hours (Days per week)"/>
            <!--<field name="avrgTransactionChargeVet" type="amount" label="Average transaction charge (VET)"/>
            <field name="perOfSmallAnimalProcedure" type="percent" label="What percentage of Small Animal procedures are performend in the surrounding municipality? (VET)"/>
            <field name="perOfOthrAnimalProcedure" type="percent" label="What percentage of Other Animal procedures are performend in the surrounding municipality? (VET)"/>-->
            <field name="howExpenseProfitSplit" type="text" label="How Will Expenses/Profit Be Split?"/>
            <collection name="doctorProcs" collection-type="list" entity-type="DoctorProc" referred-by="practiceInformation" relation="owner"/>
            <collection name="locationStaffPlans" collection-type="list" entity-type="LocationStaff" referred-by="practiceInformation" relation="owner"/>            
        </entity>
		<entity name="DoctorProc" stereotype="managed">
			<reference name="sector" entity-type="AttributeChoice" relation="refers-to" label="Sector">
				<lookup>
					<param name="key">DOCTOR_SECTOR</param>
				</lookup>
			</reference>
            <reference name="doctorProcedure" entity-type="AttributeChoice" relation="refers-to" label="Procedure Name">
                 <lookup name="mvel">
                    <param name="expr">if(thiz.sector != null  &amp;&amp; thiz.sector.relatedChoices != null) {return thiz.sector.relatedChoices;}else{ return new java.util.ArrayList();}</param>
                </lookup>
            </reference>
            <field name="doctorProcedureProd" type="percent" label="Doctor Procedures % of Product"/>
			<field name="externalIdentifier" type="text" length="255"/>			
			<reference name="practiceInformation" entity-type="PracticeInformation" relation="refers-to"/>
			<find-queries>
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
            </find-queries>
		</entity>
        <entity name="LocationStaff" stereotype="managed">
	        <reference name="staffPosition" entity-type="AttributeChoice" relation="refers-to" label="Staff Position">
                <lookup>
					<param name="key">STAFF_POSITION</param>
               	 </lookup>
            </reference>
			<field name="staffPlanCurrent" type="integer" label="Staffing Plans (Current)"/>
			<field name="staffPlanProposed" type="integer" label="Staffing Plans (Proposed)"/>
			<reference name="practiceInformation" entity-type="PracticeInformation" relation="refers-to"/>
	   	</entity>
        
        
        <!-- Party Liability/Assets -->
        <entity name="PartyLiability" stereotype="managed">
            <field name="ownershipPercent" type="percent" required="true"/>
            <field name="numIndex" type="integer"/>
            <reference name="liability" entity-type="Liability" relation="owner"/>
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
        </entity>
        <entity name="Liability" stereotype="managed">
            <field name="name" type="text"/>
            <field name="description" type="text"/>
            <field name="balance" type="amount"/>
            <field name="accountNumber" type="text"/>
            <field name="asOfDate" type="date-time"/>
            <field name="interestRate" type="percent"/>
            <field name="originalAmount" type="amount"/>
            <field name="refinanceFlag" type="boolean" required="false"/>
            <reference name="originalAmountCurrency" entity-type="Currency" relation="refers-to"/>
            <reference name="balanceCurrency" entity-type="Currency" relation="refers-to"/>
            <reference name="liabilityType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LIABILITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="liabilityHolderInfo" entity-type="Contact" relation="owner"/>
            <reference name="lien" entity-type="Lien" relation="owner"/>
            <collection name="expenses" collection-type="list" entity-type="Expense" referred-by="linkedLiability" relation="owner"/>
            <collection name="liabilityOwnedAssets" collection-type="list" entity-type="OwnedAsset" relation="owner"/>
 	        </entity>        
        <entity name="Lien" stereotype="managed" extends="Liability">
            <field name="notes" type="text"/>
            <field name="startDttm" type="date-time"/>
            <field name="term" type="number"/>
            <field name="balloonPaymentDate" type="date-time"/>
            <field name="balloonPaymentAmt" type="amount"/>
            <reference name="lienPosition" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LIEN_POSITION</param>
                </lookup>
            </reference>
        </entity>        
        <entity name="Expense" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="payment" type="amount"/>
            <field name="startDttm" type="date-time"/>
            <field name="endDttm" type="date-time"/>
            <reference name="paymentCurrency" entity-type="Currency" relation="refers-to"/>
            <reference name="linkedLiability" entity-type="Liability" relation="refers-to"/>
            <reference name="linkedAsset" entity-type="OwnedAsset" relation="refers-to"/>
            <reference name="payee" entity-type="Customer" relation="refers-to"/>
            <reference name="expenseType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">EXPENSE_TYPE</param>
                </lookup>
            </reference>
            <reference name="frequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                </lookup>
            </reference>
        </entity>
        
        <entity name="Income" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="payment" type="amount"/>
            <field name="startDttm" type="date-time"/>
            <field name="endDttm" type="date-time"/>
            <reference name="paymentCurrency" entity-type="Currency" relation="refers-to"/>
            <reference name="recipientCustomer" entity-type="Customer" relation="refers-to"/>
            <reference name="propertyOccupant" entity-type="PropertyOccupant" relation="refers-to"/>
            <reference name="linkedAsset" entity-type="OwnedAsset" relation="refers-to"/>
            <reference name="incomeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INCOME_TYPE</param>
                </lookup>
            </reference>
            <reference name="frequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                </lookup>
            </reference>
        </entity>
        <entity name="OwnedAsset" stereotype="managed">
            <field name="name" type="text" />
            <field name="description" type="text"/>
            <field name="accountNumber" type="text"/>
            <field name="marketValue" type="amount" />
            <field name="asOfDate" type="date-time" />
            <field name="cost" type="amount"/>
            <field name="dateAcquired" type="date-time"/>
            <field name="transferFlag" type="boolean" required="false"/>
            <field name="transferTiming" type="integer"/>
            <field name="dueAmountUpto90Days" type="amount"/>
            <field name="amountAfter90Days" type="amount"/>
            <reference name="marketValueCurrency" entity-type="Currency" relation="refers-to" />
            <reference name="costCurrency" entity-type="Currency" relation="refers-to"/>
            <reference name="holdingInstitutionInfo" entity-type="Address" relation="owner"/>
            <reference name="assetLocation" entity-type="Address" relation="owner"/>
            <reference name="linkedAsset" entity-type="OwnedAsset" relation="refers-to"/>
            <reference name="marketableSecurities" entity-type="MarketableSecurity" relation="owner"/>
            <reference name="realEstates" entity-type="RealEstateHolding" relation="owner"/>
            <reference name="assetType" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">ASSET_TYPE</param>
                </lookup>
            </reference>
            <collection name="incomes" collection-type="list" entity-type="Income" referred-by="linkedAsset" relation="owner"/>
            <collection name="propertyOccupancies" collection-type="list" entity-type="PropertyOccupant" referred-by="ownedAsset" relation="owner"/>
          </entity>
        
        <entity name="MarketableSecurity" stereotype="managed" extends="OwnedAsset">
            <field name="tickerSymbol" type="text" length="36"/>
            <field name="numOfUnits" type="integer"/>
            <field name="exchangeName" type="text"/>
        </entity>
        <entity name="PartyOwnedAsset" stereotype="managed">
            <field name="ownershipPercent" type="percent" required="true"/>
            <reference name="ownedAsset" entity-type="OwnedAsset" relation="owner"/>
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
        </entity>
        <entity name="PropertyOccupant" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="unitNumber" type="integer"/>
            <field name="leaseEndDate" type="date-time"/>
            <field name="unitArea" type="number"/>
            <field name="leaseStartDate" type="date-time"/>
            <reference name="linkedAsset" entity-type="RealEstateHolding" relation="refers-to"/>
            <reference name="ownedAsset" entity-type="OwnedAsset" relation="refers-to"/>
            <reference name="tenantContactInfo" entity-type="Contact" relation="owner"/>
        </entity>
        <entity name="RealEstateHolding" stereotype="managed" extends="OwnedAsset">
            <field name="yearBuilt" type="integer"/>
            <field name="lotSize" type="integer"/>
            <field name="coveredArea" type="integer"/>
            <field name="rentableArea" type="integer"/>
            <field name="numOfUnits" type="integer"/>
            <field name="numOfParking" type="integer"/>
            <field name="percentOccupied" type="percent"/>
            <field name="renovationReqdFlag" type="boolean" required="false"/>
            <field name="renovationCost" type="amount"/>
            <field name="environConcernFlag" type="boolean" required="false"/>
            <field name="environConcernDescr" type="text"/>
            <field name="undergroundStorageTankFlag" type="boolean" required="false"/>
            <field name="asbestosPresenceFlag" type="boolean" required="false"/>
            <field name="chemicalsStoredOrUsedFlag" type="boolean" required="false"/>
            <field name="environIssueCitationFlag" type="boolean" required="false"/>
            <field name="dateCoopCondoEstablished" type="date-time"/>
            <field name="numOfCoopShares" type="integer"/>
            <reference name="propertyType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PROPERTY_TYPE</param>
                </lookup>
            </reference>
            <collection name="propertyOccupants" collection-type="list" entity-type="PropertyOccupant" referred-by="linkedAsset" relation="owner"/>
        </entity>                
             
        <!-- Partner -->
        <entity name="Partner" stereotype="business-entity" label="Partners">
        	<field name="infoleaseVendorCode" type="text"/>
            <field name="singleAppFlag" type="boolean" required="false"/>
            <field name="legalName" type="text" />
            <field name="doingBusinessAs" type="text" />
            <field name="dateVerified" type="date-time"/>
            <field name="refNumber" type="auto" label="Partner Number" required="false"/>
            <field name="manufacturerName" type="text"/>
            <field name="investorType" type="text"/>
            <field name="partnerSinceDttm" type="date-time" label="Partner Since"/>
            <field name="submittedDttm" type="date-time"/>
            <field name="typeOfProductsSold" type="text"/>
            <field name="financingCompUsed" type="text"/>
            <field name="expectedYearlyVolumeAmt" type="amount"/>
            <field name="numOfSalesReps" type="integer"/>
            <field name="inactiveDttm" type="date-time"/>
            <field name="financialinstitutionSharholdingPcnt" type="percent" label="Financial Institution Sharholding Percentage"/>
            <field name="nameOfAgreement" type="text"/>
            <field name="signedDttm" type="date-time"/>
            <field name="signerName" type="text"/>
            <field name="signerTitle" type="text"/>
            <field name="inactiveReason" type="textarea"/>
            <field name="assetClassKeys" type="derived:text"/>
            <reference name="supplierInformation" entity-type="SupplierInformation" relation="owner"/>
            <reference name="bankInformation" entity-type="BankInformation" relation="owner"/>
            <reference name="businessInformation" entity-type="BusinessInformation" relation="owner"/>
            <reference name="companyInformation" entity-type="CompanyInformation" relation="owner"/>
            <reference name="preFunding" entity-type="PartnerPrefunding" relation="owner"/>
            <reference name="marketingOptions" entity-type="MarketingOptions" relation="owner"/>
            <reference name="pricingPoint" entity-type="PricingPoint" relation="owner"/>
            <reference name="partyDetail" entity-type="PartyDetail" relation="owner"/>
            <reference name="legalEntityType" entity-type="AttributeChoice" relation="refers-to" label="Legal Entity Type" required="false">
                <lookup>
                    <param name="key">LEGAL_ENTITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="legalNameVerified" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="priorityVendorType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRIORITY_VENDOR_TYPE</param>
                </lookup>
            </reference>
            <reference name="division" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PARTNER_DIVISION</param>
                </lookup>
            </reference>
            <reference name="approval" entity-type="Approval" relation="owner"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
            <reference name="remitToAddress" entity-type="Address" relation="owner"/>
            <reference name="requestedBy" entity-type="User" relation="refers-to"/>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_PARTNER</param>
                </lookup>
            </reference>
            <reference name="financialinstitutionMayContact2" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution May Contact">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="financialinstitutionAddressInfo" entity-type="derived:ContactInfo" relation="refers-to" label="Financial Institution Address Info"/>
            <collection name="documentPackages" collection-type="list" entity-type="DocumentPackage" referred-by="partner" relation="owner"/>
            <collection name="holds" collection-type="list" entity-type="Hold" relation="owner" referred-by="partner"/>
            <reference name="inactiveBy" entity-type="User" relation="refers-to"/>
            <collection name="partnerSites" collection-type="list" entity-type="PartnerSite" referred-by="partner" relation="owner"/>
            <collection name="contactInformation" collection-type="list" entity-type="ContactInfo" referred-by="partner" relation="owner"/>
            <collection name="cbrInfo" collection-type="list" entity-type="CbrInformation" referred-by="partner" relation="owner"/>
           <!--  <collection name="partnerPrograms" collection-type="list" entity-type="Program" referred-by="prgPartners" relation="refers-to"/> -->
            <collection name="partnerPrograms" collection-type="list" entity-type="Program" relation="refers-to"/>
            <collection name="externalIdentifier" collection-type="list" entity-type="PartyExtIdentifier" relation="owner"/>
            <collection name="bankAndTrade" collection-type="list" entity-type="BankAndTrade" relation="owner"/>
            <collection name="banksAndTrade" collection-type="list" entity-type="BanksTrade" referred-by="partner" relation="owner"/>
            <collection name="fundingInformation" collection-type="list" entity-type="Funding" referred-by="partner" relation="owner"/>
            <!-- <collection name="assetClass" collection-type="list" entity-type="AttributeChoice" relation="refers-to" label="Asset Type">
                <lookup>
                 	<param name="key">ASSET_CLASS</param>
                 	<param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
                </lookup>
            </collection> -->
            <reference name="assetClass" entity-type="AttributeChoice" relation="refers-to" label="Asset Type">
                 <lookup>
                 	<param name="key">ASSET_CLASS</param>
                 	<param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
                </lookup>
			</reference>
            <collection name="assetSubclass" collection-type="list" entity-type="AttributeChoice" relation="refers-to" label="Asset Sub-Type">
                <lookup>
                 	<param name="key">ASSET_CLASS</param>
                 	<!-- <param name="groupMvel"><![CDATA[return thiz.asssetClassKeys;]]></param> -->
                 	<param name="groupMvel"><![CDATA[if(thiz.assetClass != null) { return thiz.assetClass.key; } else { return null; }]]></param>
                </lookup>
            </collection>
            <collection name="operatingUnit" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">OPERATING_UNIT</param>
				</lookup>
			</collection>
			<collection name="sbu" collection-type="list" entity-type="AttributeChoice" relation="refers-to" label="Strategic Business Unit">
				<lookup>
					<param name="key">STRATEGIC_BUSINESS_UNIT</param>
				</lookup>
			</collection>
			<collection name="partnerType" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">THIRD_PARTY_REQUEST_TYPE</param>
				</lookup>
			</collection>
			<feature operation="implements">
                <data>com.thirdpillar.foundation.model.WorkflowAware</data>                
            </feature>
            <display-format>$o.legalName$</display-format>
            <find-queries>
                <query name="quickSearch" select="many">where legalName like :q</query>
                <query name="fetchAllPartners" select="many">where refNumber IS NOT NULL</query>
            </find-queries>
        </entity>        
        <entity name="PartnerPrefunding" stereotype="managed">
            <field name="startDttm" type="date-time"/>
            <field name="endDttm" type="date-time"/>
            <field name="lastAgreementDttm" type="date-time"/>
            <field name="pgReceivedFlag" type="boolean" required="false"/>
            <field name="brokerPointDeductionAllowed" type="boolean" required="false"/>
            <field name="confirmationRequiredFlag" type="boolean" required="false"/>
            <field name="lastConfirmationDttm" type="date-time"/>
            <field name="allowAutoSplitFlag" type="boolean" required="false"/>
            <reference name="confirmationFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CONFIRMATION_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="crossSbuTakedowns" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CROSS_SBU_TAKEDOWNS</param>
                </lookup>
            </reference>
            <reference name="sbu" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">STRATEGIC_BUSINESS_UNIT</param>
                </lookup>
            </reference>
            <reference name="partner" entity-type="Partner" relation="owner" unique="true"/>
        </entity>      
        <entity name="PartnerSite" stereotype="managed">
        	<field name="partnrSiteId" type="text"/>
        	<field name="siteName" type="boolean" required="false" />
            <field name="pricingSameasPrimaryFlag" type="boolean" required="false"/>
            <field name="salesSameasPrimaryFlag" type="boolean" required="false"/>
            <field name="fundingSameasPrimaryFlag" type="boolean" required="false"/>
            <field name="notifySameasPrimaryFlag" type="boolean" required="false"/>
            <field name="shortFundingAllowedFlag" type="boolean" required="false" label="Short Funding Allowed"/>
            <field name="passthruEligibleFlag" type="boolean" required="false"/>
            <field name="totalOfPercentToBePaid" type="text"/>
            <field name="totalOfFlatAmtToBePaid" type="text" label="Total Of Flat Amount to be Paid"/>
            <reference name="passthruFundingFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PASSTHROUGH_FUNDING_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="autoNotificationType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PARTNER_NOTIFICATION</param>
                </lookup>
            </reference>
            <reference name="siteDetails" entity-type="Contact" relation="owner"/>
            <reference name="partySite" entity-type="PartySite" relation="owner"/>
            <reference name="partner" entity-type="Partner" relation="refers-to"/>
            <reference name="manager" entity-type="User" relation="refers-to"/>
            <reference name="pricing" entity-type="PricingPoint" relation="owner"/>
            <collection name="salesReps" collection-type="list" entity-type="SalesRep" referred-by="partnerSite" relation="owner"/>
            <collection name="partnerTiers" collection-type="list" entity-type="PartnerTier" referred-by="partnerSite" relation="owner"/>
            <collection name="fundings" collection-type="list" entity-type="Funding" relation="owner"/>
            <collection name="brokers" collection-type="list" entity-type="Partner" relation="owner"/>
            <collection name="managers" collection-type="list" entity-type="User" relation="refers-to"/>
            <display-format>$o.siteName$</display-format>
            <find-queries>
                <query name="quickSearch" select="many">where partnrSiteId like :q </query>
            </find-queries>
        </entity>      
        <entity name="PricingPoint" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="leasingRate" type="percent"/>
            <field name="leasingFlatFee" type="amount"/>
            <field name="maxLeasingAmt" type="amount"/>
            <field name="financingRate" type="percent"/>
            <field name="maxFinancingAmt" type="amount"/>
            <field name="sameAsPrimaryFlag" type="boolean" required="false" label="Same as Primary"/>
            <field name="numMaxPoints" type="integer" label="Max Points"/>
            <field name="defaultPoints" type="integer"/>
            <field name="maxFlatAmt" type="amount" label="Max Flat Amount"/>
            <field name="defaultFlatAmt" type="amount" label="Default Flat Amount"/>
            <field name="overrideDefaultsFlag" type="boolean" required="false" label="Default override allowed ?"/>
            <field name="deductPrefundPointsFlag" type="boolean" required="false"/>
            <field name="financingFlatFee" type="amount"/>
            <field name="pointsAdmin" type="text"/>
            <field name="whoKnows" type="text"/>
            <field name="disclosePointsFlag" type="boolean" required="false"/>
            <reference name="pricingTier" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRICING_TIER</param>
                </lookup>
            </reference>
        </entity>          
          
        <!--  Marketing Options -->
        <entity name="MarketingOptions" stereotype="managed">
            <field name="usageFlag" type="boolean" required="false"/>
            <reference name="usageOption" entity-type="UsageOption" relation="owner"/>
            <field name="deferredMaintenanceFlag" type="boolean" required="false"/>
            <reference name="defMaintenance" entity-type="DefMaintenance" relation="owner"/>
            <field name="faxFundingFlag" type="boolean" required="false"/>
            <reference name="faxFunding" entity-type="FaxFunding" relation="owner"/>
            <field name="rentalFlag" type="boolean" required="false"/>
            <reference name="rentalOption" entity-type="RentalOption" relation="owner"/>            
            <field name="rentalFleetFlag" type="boolean" required="false"/>
            <reference name="rentalFleet" entity-type="RentalFleet" relation="owner"/>
            <field name="progressPaymentsFlag" type="boolean" required="false"/>
            <reference name="progressPayment" entity-type="AdvancedFunding" relation="owner"/>            
            <field name="facilitiesManagementFlag" type="boolean" required="false"/>
            <reference name="facilitiesMgmt" entity-type="FacilityManagement" relation="owner"/>
            <field name="tracFlag" type="boolean" required="false"/>
            <field name="copyBlockFlag" type="boolean" required="false"/>
            <field name="delayedFundingFlag" type="boolean" required="false"/>
			<reference name="otherProduct" entity-type="OtherProduct" relation="owner"/>			
        </entity>
        <entity name="UsageOption" stereotype="managed">
            <field name="effectiveStartDttm" type="date-time" label="Effective Start Date"/>
            <field name="effectiveEndDttm" type="date-time" label="Expiration End Date"/>
            <field name="worksheetReqFlag" type="boolean" required="false" label="Pricing Worksheet Required"/>
            <field name="meterFeeAmt" type="amount" label="Meter Fee"/>
            <field name="numAdvFundGraceDays" type="integer" label="Advanced Service Funding Delinquency Grace Days"/>
            <field name="invoiceFeeAmt" type="amount" label="Invoicing Fee"/>
            <reference name="usageAllowed" entity-type="AttributeChoice" relation="refers-to" label="Usage" required="false">
                <lookup>
                    <param name="key">MARKETING_OPTION_ALLOWED</param>
                </lookup>
            </reference>
            <reference name="invoiceFormat" entity-type="InvoiceTemplate" relation="refers-to"/>
            <reference name="usageEntryParty" entity-type="Partner" relation="refers-to"/>
            <reference name="overageBillingParty" entity-type="Partner" relation="refers-to"/>
            <reference name="usageEntryResponsible" entity-type="AttributeChoice" relation="refers-to" label="Responsible For Usage Read Entry" required="false">
                <lookup>
                    <param name="key">USAGE_ENTRY_RESPONSIBLE</param>
                </lookup>
            </reference>
            <reference name="escFrequency" entity-type="AttributeChoice" relation="refers-to" label="Escalation Frequency">
                <lookup>
                    <param name="key">ESCALATION_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="escMethod1" entity-type="AttributeChoice" relation="refers-to" label="Escalation Methodology 1">
                <lookup>
                    <param name="key">ESCALATION_METHODOLOGY_1</param>
                </lookup>
            </reference>
            <reference name="usageReadMethod" entity-type="AttributeChoice" relation="refers-to" label="Usage Read Methodology">
                <lookup>
                    <param name="key">USAGE_READ_METHODOLOGY</param>
                </lookup>
            </reference>
            <reference name="escMethod2" entity-type="AttributeChoice" relation="refers-to" label="Escalation Methodology 2">
                <lookup>
                    <param name="key">ESCALATION_METHODOLOGY_2</param>
                </lookup>
            </reference>
            <reference name="escRequired" entity-type="AttributeChoice" relation="refers-to" label="Escalators Required">
                <lookup>
                    <param name="key">ESCALATION_REQUIRED</param>
                </lookup>
            </reference>
            <reference name="unearnedSvcMaintClawback" entity-type="AttributeChoice" relation="refers-to" label="Unearned/Service Maintenance Clawback? " required="false">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <collection name="usageOptionDtls" collection-type="list" entity-type="UsageOptionDtl" referred-by="usageOption" relation="owner" label=""/>
        </entity>
        <entity name="UsageOptionDtl" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="passthroughFeePct" type="percent" label="Pass-Through Fee Deductions" required="false"/>
            <field name="advanceFlag" type="boolean" required="false" label="Funded in Advance"/>
            <reference name="fundingFreq" entity-type="AttributeChoice" relation="refers-to" label="Funding Frequency">
                <lookup>
                    <param name="key">FUNDING_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="usageOption" entity-type="UsageOption" relation="refers-to"/>
        </entity>        
        <entity name="DefMaintenanceDtl" stereotype="managed">
            <field name="passthroughFeePct" type="number" label="Pass-through Fee Deductions"/>
            <field name="numIndex" type="integer"/>
            <field name="advanceFlag" type="boolean" required="false" label="Funded in Advance"/>
            <reference name="fundingFreq" entity-type="AttributeChoice" relation="refers-to" label="Funding Frequency">
                <lookup>
                    <param name="key">FUNDING_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="defMaintenance" entity-type="DefMaintenance" relation="owner"/>
        </entity>
        <entity name="DefMaintenance" stereotype="managed">
            <field name="effectiveStartDttm" type="date-time" label="Effective Date"/>
            <field name="effectiveEndDttm" type="date-time" label="Expiration Date"/>
            <reference name="invoiceServiceSeparate" entity-type="AttributeChoice" relation="refers-to" label="Invoice Service Seperately?">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="numAdvFundingGraceDays" type="integer" label="Advanced Service Funding Delinquency Grace Days"/>
            <reference name="defMaintenanceAllowed" entity-type="AttributeChoice" relation="refers-to" label="Deferred Maintenance" required="false">
                <lookup>
                    <param name="key">MARKETING_OPTION_ALLOWED</param>
                </lookup>
            </reference>
            <reference name="partyToBill" entity-type="Partner" relation="refers-to" label="Party to bill service if Billed Seperately "/>
            <reference name="invoiceFormat" entity-type="InvoiceTemplate" relation="refers-to" label="Define Invoice Format"/>
            <reference name="escFrequency" entity-type="AttributeChoice" relation="refers-to" label="Escalation Frequency">
                <lookup>
                    <param name="key">ESCALATION_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="escMethod1" entity-type="AttributeChoice" relation="refers-to" label="Escalation Methodology 1">
                <lookup>
                    <param name="key">ESCALATION_METHODOLOGY_1</param>
                </lookup>
            </reference>
            <reference name="unearnedSvcMaintClawback" entity-type="AttributeChoice" relation="refers-to" label="Unearned/Service Maintenance Clawback? ">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <collection name="defMaintenanceDtls" collection-type="list" entity-type="DefMaintenanceDtl" referred-by="defMaintenance" relation="owner" label=""/>
        </entity>        
        <entity name="FaxFunding" stereotype="managed">
            <field name="numOfDaysOrigDue" type="integer"/>
            <field name="faxFundingLimitAmt" type="amount"/>
            <field name="followupOriginalsFlag" type="boolean" required="false"/>
            <reference name="faxFundingAllowed" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">MARKETING_OPTION_ALLOWED</param>
                </lookup>
            </reference>
        </entity>    
        <entity name="RentalOption" stereotype="managed">
            <field name="purchaseOptionToLesseeFlag" type="boolean" required="false" label="Purchase Option to Lessee"/>
            <field name="renewalAllowedFlag" type="boolean" required="false" label="Renewal Allowed"/>
            <reference name="rentalAllowed" entity-type="AttributeChoice" relation="refers-to" label="Rental">
                <lookup>
                    <param name="key">MARKETING_OPTION_ALLOWED</param>
                </lookup>
            </reference>
            <collection name="purchaseOptionType" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PURCHASE_OPTION</param>
                </lookup>
            </collection>
        </entity>        
        <entity name="RentalFleet" stereotype="managed">
            <field name="holdsChattelPaperFlag" type="boolean" required="false"/>
            <field name="payoffOnDeclBalFlag" type="boolean" required="false"/>
            <reference name="assnChattelPaperFlag" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="rentalFleetAllowed" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">MARKETING_OPTION_ALLOWED</param>
                </lookup>
            </reference>
            <reference name="notifyCustomer" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">NOTIFICATION_TO_CUSTOMER</param>
                </lookup>
            </reference>
            <reference name="auditFreq" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AUDIT_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="billingTo" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BILLING</param>
                </lookup>
            </reference>
            <reference name="billing" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BILLING</param>
                </lookup>
            </reference>
        </entity>                 
        <entity name="AdvancedFunding" stereotype="managed">
            <field name="fundingEligible" type="boolean" required="false"/>
            <field name="maximumBookingPeriod" type="number"/>
            <field name="applicationSpecific" type="boolean" required="false"/>
            <field name="lineLimit" type="number" required="false"/>
            <field name="interestRate" type="percent"/>
            <field name="adder" type="number"/>
            <field name="interestFreePeriodInDays" type="integer"/>
            <field name="fixedPct" type="percent"/>
            <field name="rateBumpPct" type="percent"/>
            <field name="index" type="boolean" required="false"/>
            <field name="maximumDealFunding" type="amount" required="false"/>
            <field name="interestGracePeriod" type="number" required="false"/>
            <reference name="gracePeriodType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">GRACE_PERIOD_TYPE</param>
                </lookup>
            </reference>
            <reference name="interestFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INTEREST_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="rateSource" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RATE_SOURCE</param>
                </lookup>
            </reference>
            <reference name="indexName" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INDEX_TYPE</param>
                </lookup>
            </reference>
            <reference name="intCalcFormula" entity-type="Formula" relation="refers-to"/>
        </entity>
        <entity name="FacilityManagement" stereotype="managed">
            <field name="startDttm" type="date-time" label="Start Date"/>
            <field name="endDttm" type="date-time" label="End Date"/>
            <field name="billCollectAllowedFlag" type="boolean" required="false" label="FM Bill and Collect Allowed"/>
            <reference name="facMgmtAllowed" entity-type="AttributeChoice" relation="refers-to" label="Facilities Management" required="false">
                <lookup>
                    <param name="key">MARKETING_OPTION_ALLOWED</param>
                </lookup>
            </reference>
            <field name="comment" type="textarea" required="false" label="Comments"/>
        </entity>           
        <entity name="OtherProduct" stereotype="managed">
            <field name="startDttm" type="date-time"/>
            <field name="endDttm" type="date-time"/>
            <field name="eligibleForTracLease" type="boolean" required="false"/>
            <field name="copyblockApprovedFlag" type="boolean" required="false"/>
            <field name="copyblockOverageWithheld" type="boolean" required="false"/>
            <field name="addendumReqdFlag" type="boolean" required="false"/>
            <field name="municipalLease" type="boolean" required="false"/>
            <field name="nonProfitLease" type="boolean" required="false"/>
            <field name="governmentLease" type="boolean" required="false"/>
        </entity>                     
        
        <!--  UCC -->
        <entity name="UCC" stereotype="managed" label="UCC">
			<field name="refNumber" type="auto" label="UccSeqNumber" internal="true"/>
			<field name="lienRefNumber" type="text" internal="true"/>
			<field name="ilienStatus" type="textarea" internal="true"/>
			<field name="uccSentDate" type="date-time" internal="true"/>
			<field name="uccRecordStatus" type="text" internal="true"/>
			<field name="runDate" type="date-time"/>
			<field name="uccFilingNumber" type="text" internal="true"/>
			<field name="uccFilingDate" type="date-time" internal="true"/>
			<field name="orgFilingNumber" type="text"/>
			<field name="orgFilingDate" type="date-time"/>
			<field name="filingStatus" type="text"/>
			<field name="confirmationReceivedDate" type="date-time" internal="true"/>
			<field name="confirmationNumber" type="number"/>
			<field name="expirationDate" type="date-time" internal="true"/>
			<!-- <field name="customerName" type="text"/>
			<field name="flexField6" type="text"/>
			<field name="flexField7" type="text"/>
			
-->

			<field name="language" type="textarea"/>
			<field name="uccPacketNum" type="text" internal="true"/>
			<field name="uccPacketId" type="text" internal="true"/>
			<field name="collateralSeqNumber" type="number"/>
			<field name="rejectionReason" type="textarea" internal="true"/>
		<!-- 	<field name="lenderCode" type="text"/>
			<field name="billCode" type="text" required="true"/>
-->
			<field name="ref1" type="text"/>
			<field name="ref2" type="text"/>
			<field name="ref3" type="text"/>
			<field name="ref4" type="text"/>
			<field name="ref5" type="text"/>
			<field name="ref6" type="text"/>
			<field name="ref7" type="text"/>
			<field name="noOfAttachments" type="number"/>
			<field name="maxPrincipalIndebtness" type="amount"/>
			<reference name="jurisdictionState" entity-type="UccJurisdictionState" relation="refers-to" ruleTriggerOnEvent="true"/>
			<reference name="jurisdictionCounty" entity-type="UccJurisdictionCounty" relation="refers-to">
				<lookup name="mvel">
					<param name="expr">if(thiz.jurisdictionState != null) {return thiz.jurisdictionState.jurisdictionCounties;}else{ return new java.util.ArrayList();}</param>
				</lookup>
            </reference> 
			<reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true">
                <lookup>
					<param name="workflowEntity">WORKFLOW_ENTITY_UCC</param>
                </lookup>
            </reference>
			<reference name="uccType" entity-type="AttributeChoice" relation="refers-to" required="true">
                <lookup>
					<param name="key">UCC_TYPE</param>
                </lookup>
            </reference>
            <reference name="collateralStatement" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">COLLATERAL_STATEMENT</param>
                </lookup>
            </reference>
            <reference name="customer" entity-type="Customer" relation="refers-to" required="false"/>
            <reference name="loanType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="blanketFiling" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="realEstateFiling" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>            
            <reference name="relation" entity-type="AttributeChoice" relation="refers-to" required="true" >
                <lookup>
                    <param name="key">RELATION</param>
                </lookup>
            </reference>
            <reference name="tnRecordingTaxExempt" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">TN_RECORDING_TAX_EXEMPT</param>
                </lookup>
            </reference>
            <reference name="indebtednessType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INDEBTEDNESS_TYPE</param>
                </lookup>
            </reference>
            <reference name="flTaxStamps" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FL_TAX_STAMPS</param>
                </lookup>
            </reference>
            <reference name="attachmentDocumentType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ATTACHMENT_DOCUMENT_TYPE</param>
                </lookup>
            </reference>
            <reference name="uccAttachment" entity-type="UccAttachment" relation="owner"/>
            <reference name="request" entity-type="Request" relation="refers-to"/>
            <reference name="facility" entity-type="Facility" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup name="mvel">
                   <param name="expr">thiz.request.allFacilities</param>
                 </lookup>
            </reference>
            <reference name="realEstateInfo" entity-type="UccRealEstateInfo" relation="owner"/>
			<collection name="debtors" collection-type="list" entity-type="Debtor" referred-by="ucc" relation="owner"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
                <data>com.thirdpillar.foundation.model.WorkflowAware</data>
            </feature>
       </entity>
       <entity name="UccAttachment" stereotype="managed">
       		<reference name="attachment" entity-type="BinaryType" relation="owner"/>
       </entity>
       <entity name="UccRealEstateInfo" stereotype="managed">
          <field name="description" type="textarea"/>
          <field name="section" type="text"/>
          <field name="block" type="text"/>
          <field name="lot" type="text"/>
          <field name="county" type="text"/>
          <field name="township" type="text"/>
          <field name="alMortgageTaxDueAmt" type="amount"/>
          <field name="bookNum" type="text"/>
          <field name="pageNum" type="text"/>
          <field name="parcelId" type="text"/>
          <field name="taxMapNumber" type="text"/>
          <field name="unitNum" type="text"/>
          <field name="ownerFirstName" type="text"/>
          <field name="ownerLastName" type="text"/>
          <field name="ownerSuffix" type="text"/>
          <field name="ownerName" type="text"/>
          <field name="ownerAddress" type="text"/>
          <field name="ownerCity" type="text"/>
          <field name="ownerZipCode" type="text"/>
          <reference name="state" entity-type="UccJurisdictionState" relation="refers-to"/>
          <reference name="ownerState" entity-type="State" relation="refers-to"/>
          <reference name="designation" entity-type="AttributeChoice" relation="refers-to">
          	<lookup>
            	<param name="key">UCC_REAL_ESTATE_DESIGNATION</param>
            </lookup>
          </reference>
          <reference name="propertyOwnerSameAsDebtor" entity-type="AttributeChoice" relation="refers-to">
          	<lookup>
            	<param name="key">YES_OR_NO</param>
            </lookup>
          </reference>
          <reference name="propertyType" entity-type="AttributeChoice" relation="refers-to">
          	<lookup>
            	<param name="key">UCC_PROPERTY_TYPE</param>
            </lookup>
          </reference>
          <reference name="designation2" entity-type="AttributeChoice" relation="refers-to">
          	<lookup>
            	<param name="key">UCC_REAL_ESTATE_DESIGNATION2</param>
            </lookup>
          </reference>
          <reference name="mdRecordingTaxExempt" entity-type="AttributeChoice" relation="refers-to">
          	<lookup>
            	<param name="key">MD_RECORDING_TAX_EXEMPT</param>
            </lookup>
          </reference>
          <reference name="ownerType" entity-type="AttributeChoice" relation="refers-to">
          	<lookup>
            	<param name="key">UCC_PROPERTY_OWNER_TYPE</param>
            </lookup>
          </reference>
       </entity>       
       <entity name="UccSrch" stereotype="managed" label="UCC Search">
            <reference name="searchType" entity-type="AttributeChoice" relation="refers-to" required="true">
                <lookup>
                    <param name="key">UCC_SEARCH_TYPE</param>
                </lookup>
            </reference>
            <reference name="location" entity-type="State" relation="refers-to" required="true">
                <filters>
                    <filter triggerExpr="isdef root_uccSrchs" expr="if(isdef root_uccSrchs)
                    	{ entity.isoCode != ('AS') &amp;&amp;
                    	  entity.isoCode != ('AB') &amp;&amp;
                    	  entity.isoCode != ('AA') &amp;&amp;
                    	  entity.isoCode != ('AP') &amp;&amp;  
                    	  entity.isoCode != ('BC') &amp;&amp;  
                    	  entity.isoCode != ('FM') &amp;&amp;  
                    	  entity.isoCode != ('GU') &amp;&amp;  
                    	  entity.isoCode != ('MB') &amp;&amp;  
                    	  entity.isoCode != ('MH') &amp;&amp;  
                    	  entity.isoCode != ('NB') &amp;&amp;  
                    	  entity.isoCode != ('NL') &amp;&amp;  
                    	  entity.isoCode != ('MP') &amp;&amp;  
                    	  entity.isoCode != ('NT') &amp;&amp;  
                    	  entity.isoCode != ('NS') &amp;&amp;  
                    	  entity.isoCode != ('NU') &amp;&amp;  
                    	  entity.isoCode != ('ON') &amp;&amp;  
                    	  entity.isoCode != ('PW') &amp;&amp;  
                    	  entity.isoCode != ('PE') &amp;&amp;  
                    	  entity.isoCode != ('PR') &amp;&amp;  
                    	  entity.isoCode != ('QC') &amp;&amp;  
                    	  entity.isoCode != ('SK') &amp;&amp;  
                    	  entity.isoCode != ('VI') &amp;&amp;  
                    	  entity.isoCode != ('Yukon Territory') &amp;&amp;
                    	  entity.name != ('Washington DC')
                    	}"/>
                </filters>            
            </reference>
            <reference name="searchBy" entity-type="AttributeChoice" relation="refers-to" required="true">
                <lookup>
                    <param name="key">UCC_SEARCH_CRITERIA</param>
                </lookup>
            </reference>
            <field name="searchKey" type="text"  required="true"/>
            <field name="dateFrom" type="date-time"/>
            <reference name="includeExpiredLiens" entity-type="AttributeChoice" relation="refers-to" required="true">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="request" entity-type="Request" relation="refers-to"/>
            <field name="recordNo" type="text" internal="true"/>
            <field name="recordSeqNo" type="text" internal="true"/>
            <field name="recordToken" type="text" internal="true"/>
            <field name="orderStatus" type="text"/>
			<collection name="results" collection-type="list" entity-type="UccSearchSummary" referred-by="uccSrch" relation="owner" internal="true"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
       </entity>
		<entity name="UccSearchSummary" stereotype="managed" label="UCC Search Summary Results">
            <field name="name" type="text" internal="true"/>
            <field name="address" type="text" internal="true"/>
            <field name="city" type="text" internal="true"/>
            <field name="zipcode" type="text" internal="true"/>
            <field name="uniqueKey" type="text" internal="true"/>
            <reference name="uccSrch" entity-type="UccSrch" relation="refers-to" />
			<collection name="details" collection-type="list" entity-type="UccSearchDetail" referred-by="uccSrchSummary" relation="owner" internal="true"/>
       	</entity>
		<entity name="UccSearchDetail" stereotype="managed" label="UCC Search Detail Results">
			<field name="filingType" type="text" internal="true"/>
			<field name="fileNo" type="text" internal="true"/>
			<field name="fileDate" type="date-time" internal="true"/>
			<field name="key" type="text" internal="true"/>
			<field name="filingSetKey" type="text" internal="true"/>
			<field name="imageKey" type="text" internal="true"/>
			<field name="imageId" type="text" internal="true"/>
			<field name="orderNum" type="derived:text" internal="true"/>
			<field name="orderItemNum" type="text" internal="true"/>
			<field name="imageOnline" type="derived:boolean" internal="true"/>
			<reference name="imageDoc" entity-type="derived:Document" relation="refers-to" internal="true"/>
          	<reference name="orderStatus" entity-type="AttributeChoice" relation="refers-to" internal="true">
                <lookup>
                    <param name="key">UCC_SEARCH_ORDER_STATUS</param>
                </lookup>
            </reference>
			<reference name="uccSrchSummary" entity-type="UccSearchSummary" relation="refers-to"/>
			<reference name="originalFiling" entity-type="UccSearchDetail" relation="refers-to"/>
			<collection name="updates" collection-type="list" entity-type="UccSearchDetail" referred-by="originalFiling" relation="owner" internal="true"/>
			<collection name="debtors" collection-type="list" entity-type="Debtor" referred-by="uccSearchDetail" relation="owner" internal="true"/>
       	</entity>
       	
        <entity name="Debtor" stereotype="managed" label="UCC">
			<field name="organizationId" type="text"/>
			<field name="debtorName" type="text"/>
			<field name="debtorType" type="text"/>
			<field name="address" type="text"/>
			<field name="city" type="text"/>
			<field name="postalCode" type="text"/>
			<field name="taxId" type="text"/>
			<field name="externalRefId" type="text" internal="true"/>
			<reference name="stateOfOrganization" entity-type="State" relation="refers-to"/>
			<reference name="customer" entity-type="Customer" relation="refers-to">
				<lookup name="mvel">
					<param name="expr">root.relationship.uniqueCustomers</param>
                </lookup>
			</reference>
			<reference name="ucc" entity-type="UCC" relation="refers-to" />
			<reference name="uccSearchDetail" entity-type="UccSearchDetail" relation="refers-to"/>
			<reference name="state" entity-type="State" relation="refers-to"/>
			<reference name="country" entity-type="Country" relation="refers-to"/>
			<reference name="custAddress" entity-type="derived:Address" relation="refers-to"/>
        </entity>    
         <entity name="UccJurisdictionState" stereotype="configuration">
            <reference name="country" entity-type="Country" relation="refers-to"/>
            <field name="isoCode" type="text" tags="Header"/>
            <field name="name" type="text" tags="Header"/>
            <collection name="jurisdictionCounties" collection-type="list" entity-type="UccJurisdictionCounty" referred-by="jurisdictionState" relation="owner"/>
       		<display-format>$o.name$</display-format>
            <find-queries>
                <query name="byIsoCode" select="one" cacheable="true">where isoCode = :isoCode</query>
            </find-queries>
        </entity>
        
         <entity name="UccJurisdictionCounty" stereotype="configuration">
             <reference name="jurisdictionState" entity-type="UccJurisdictionState" relation="refers-to" tags="Header"/>
              <field name="uniqueCode" type="text" tags="Header"/>
              <field name="countyName" type="text" tags="Header"/>
              <field name="countyCode" type="text" tags="Header"/>
              <display-format>$o.countyName$</display-format>
            <find-queries>
                <query name="byUniqueCode" select="one">where uniqueCode = :uniqueCode</query>
            </find-queries>
        </entity>    
        <!--  Relationship -->
        <entity name="Relationship" stereotype="business-entity">
            <field name="name" type="text" label="Relationship Name" indexed="true"/>
            <field name="refNumber" type="auto"/>
            <field name="relationshipDetails" type="textarea" required="false"/>
            <reference name="relationshipManager" entity-type="User" relation="refers-to"/>
            <reference name="creditManager" entity-type="User" relation="refers-to"/>
            <reference name="watchList" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="watchListDate" type="date-time"/>
            <reference name="watchListRootCause" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">WATCH_LIST_ROOT_CAUSE</param>
                </lookup>
            </reference>
            <field name="watchListRootAnalysis" type="textarea"/>
            <field name="externalIdentifier" type="text" length="255" indexed="true"/>
            <reference name="watchlistStrategy" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">WATCH_LIST_STRATEGY</param>
                </lookup>
            </reference>
            <field name="watchlistNotes" type="textarea" label="Notes"/>            

            <collection name="customers" collection-type="derived:list" entity-type="Customer" relation="owner"/>
            <collection name="uniqueCustomers" collection-type="derived:list" entity-type="Customer" relation="refers-to"/>
            <collection name="allRelationshipParties" collection-type="list" entity-type="RelationshipParty" referred-by="relationship" relation="owner"/>
            <collection name="sortedRelationshipParties" collection-type="derived:list" entity-type="RelationshipParty" relation="refers-to"/>
            <collection name="relatedParties" collection-type="list" entity-type="RelationshipParty" referred-by="relationship" relation="owner" />
            <reference name="creditProfileInfo" entity-type="CreditProfileInfo" relation="owner"/>
            <reference name="annualReviewInfo" entity-type="AnnualReviewInfo" relation="owner"/>
            <reference name="primaryBorrower" entity-type="derived:RelationshipParty" relation="owner" />
            <reference name="exposure" entity-type="Exposure" relation="owner"/>            
             <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
            <display-format>$o.name$</display-format>
            <find-queries>
                <query name="quickSearch" select="many">where name like :q</query>
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
            </find-queries>
        </entity>        
        <entity name="RelationshipParty" stereotype="managed">
            <field name="externalIdentifier" type="text" length="255" indexed="true" />
            <field name="accountName" type="derived:text"/>
            <reference name="relationship" entity-type="Relationship" relation="refers-to"/>
            <reference name="partyRole" entity-type="AttributeChoice" relation="refers-to" label="Role" required="false">
                <lookup>
                    <param name="key">PARTY_ROLE_TYPE</param>
                </lookup>
            </reference>
             <reference name="borrowerRole" entity-type="AttributeChoice" relation="refers-to" label="Primary Borrower" required="false">
                <lookup>
                    <param name="key">BORROWER_ROLE</param>
                </lookup>
            </reference>
             <reference name="selectedRole" entity-type="AttributeChoice" relation="refers-to" label="Selected Role" required="false" ruleTriggerOnEvent="true">
				 <lookup name="mvel"> 
					<param name="expr">thiz.listAllRelavantRoles</param> 
				</lookup>
            </reference>
             <collection name="relatedRoles" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RELATED_ROLE</param>
              		<param name="groupMvel"><![CDATA[if(root.requestType != null) { return root.requestType.key; } else  { return empty; }]]></param> 
                </lookup>
			</collection>     
            <reference name="parentRelationshipParty" entity-type="RelationshipParty" relation="refers-to">
                <lookup name="mvel">
                    <param name="expr">thiz.relationship.allRelationshipParties</param>
                </lookup>
                <filters>
                    <filter expr="entity.customer !=null &amp;&amp; entity.customer.customerType !=null &amp;&amp; entity.customer.customerType.key == 'CUSTOMER_TYPE_NON_INDIVIDUAL'"/>
                </filters>
            </reference>
            <reference name="customer" entity-type="Customer" relation="refers-to" />
            <collection name="relationshipParties" collection-type="list" entity-type="RelationshipParty" referred-by="parentRelationshipParty" relation="refers-to"/>
            <display-format>$o.customer.customerName$ - ($o.partyRole.value$)</display-format>
            <find-queries>
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
            </find-queries>
        </entity>        
        <entity name="CreditProfileInfo" stereotype="managed">
            <field name="profileDate" type="date-time"/>
            <field name="lastCreditVisit" type="date-time"/>
            <reference name="lastCreditVisitBy" entity-type="User" relation="refers-to"/>
            <field name="nextCreditVisitDue" type="date-time"/>
            <field name="yearOfTaxReturnUsed" type="number"/>
            <reference name="mostRecentFYEType" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">MOST_RECENT_FYE_TYPE</param>
                </lookup>
            </reference>
            <reference name="interimPLType" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">INTERIM_PL_TYPE</param>
                </lookup>
            </reference>
            <field name="interimPLThrough" type="date-time"/>
            <reference name="consolidtdOrConsolidtng" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">CONSOLIDATED_OR_CONSOLIDATING</param>
                </lookup>
            </reference>
            <field name="numberOfLocations" type="number"/>
            <field name="intendsToExpand" type="boolean"/>
            <reference name="crossDefltdGuaranteed" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">CROSS_DEFAULTED_GUARANTEED</param>
                </lookup>
            </reference>
            <field name="mostRecentFYEFixedChrg" type="number"/>
            <field name="currentYrInterimFixedChrg" type="number"/>
            <field name="loanToGross" type="number"/>
            <field name="lowestFYEPersonalDSC" type="number"/>
            <field name="combinedPersonalLiquidity" type="amount"/>
            <field name="monthlyBusinessDebtSrvc" type="number"/>
            <field name="numberOfMonthsLiquidity" type="number"/>
            <field name="totalBusinessIndebted" type="number"/>
        </entity>
        <entity name="AnnualReviewInfo" stereotype="managed">
            <field name="dueDate" type="date-time"/>
            <field name="last1040Date" type="date-time"/>
            <field name="ffpReceivedDate" type="date-time"/>
            <reference name="currentReviewStatus" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">CURRENT_REVIEW_STATUS</param>
                </lookup>
            </reference>
            <reference name="waiverReason" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">WAIVER_REASON</param>
                </lookup>
            </reference>
            <field name="completionDate" type="date-time"/>
            <field name="nextDueDate" type="date-time"/>     
            <field name="annualReviewDttm" type="date-time"/>
        </entity>    
        
        <!-- Compliance -->               
        <entity name="Compliance" stereotype="managed">
        	<field name="taxId" type="derived:text"/>
        	<field name="invokdFromTransType" type="textarea" label="Invoked From Transaction Type"/>
			<field name="invokdFromTransNum" type="textarea" label="Invoked From Transaction Number"/>
			<field name="complianceCheckDttm" type="date-time" label="Date/Time of Compliance Check"/>
        	<reference name="complianceHit" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">COMPLIANCE_HIT</param>
                </lookup>
            </reference>
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
            <collection name="matches" collection-type="list" entity-type="ComplianceMatch" referred-by="compliance" relation="owner"/>
            <collection name="fraudAlerts" collection-type="list" entity-type="FraudAlert" referred-by="compliance" relation="owner"/>
            <collection name="kycAlerts" collection-type="list" entity-type="KYCAlert" referred-by="compliance" relation="owner"/>
            <collection name="complianceDetails" collection-type="list" entity-type="ComplianceDetail" referred-by="compliance" relation="owner"/>
            <field name="acknowledge" type="boolean"/>
            <reference name="category" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COMPLIANCE_CATEGORY</param>
                </lookup>
            </reference>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COMPLIANCE_STATUS</param>
                </lookup>
            </reference>
            <reference name="result" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COMPLIANCE_RESULT</param>
                </lookup>
            </reference>            
            <field name="refNumber" type="auto"/>
            <reference name="partyDetail" entity-type="PartyDetail" relation="refers-to"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>            
        </entity>
		<entity name="ComplianceMatch" stereotype="managed">
            <field name="firstName" type="text" required="false"/>
            <field name="lastName" type="text" required="false"/>
            <field name="accuracy" type="percent" required="false"/>
            <reference name="address" entity-type="Address" relation="refers-to"/>
            <field name="nationality" type="text"/>
            <field name="passportNumber" type="text" length="400"/>
            <field name="birthDate" type="date-time" label="Date Of Birth"/>
            <field name="birthCity" type="text"/>
            <field name="deceasedDttm" type="date-time"/>
            <reference name="compliance" entity-type="Compliance" relation="refers-to" required="false"/>
        </entity>
		<entity name="KYCAlert" stereotype="managed" label="Know your Customer Alert">
            <field name="alertId" type="integer" />
            <field name="source" type="text"/>
            <field name="alertMessage" type="text"/>
            <field name="tagName" type="text" length="20"/>
            <field name="code" type="text" length="20"/>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">KYC_ALERT_STATUS</param>
                </lookup>
            </reference>
            <field name="overrideReason" type="textarea"/>
            <field name="comments" type="textarea"/>
            <reference name="compliance" entity-type="Compliance" relation="refers-to" required="false"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>            
        </entity>        
        <entity name="FraudAlert" stereotype="managed">
            <field name="alertId" type="integer"/>
            <field name="source" type="text"/>
            <field name="alertMessage" type="textarea"/>
            <field name="tagName" type="text" length="20"/>
            <field name="code" type="text" length="20"/>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">FRAUD_ALERT_STATUS</param>
                </lookup>
            </reference>
            <field name="overrideReason" type="textarea"/>
            <field name="comments" type="textarea"/>
            <reference name="compliance" entity-type="Compliance" relation="refers-to" required="false"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>            
        </entity>        
        
        <!-- Bureau -->
        <entity name="BureauReport" stereotype="managed">
            <reference name="customer" entity-type="Customer" relation="refers-to" required="false"/>
            <reference name="request" entity-type="Request" relation="refers-to" required="false"/>
            <field name="bureauName" type="text" label="Bureau" required="false"/>
            <field name="reportName" type="text" label="Name"/>
            <reference name="pulledBy" entity-type="User" relation="refers-to"/>
            <field name="systemPull" type="boolean"/>
            <field name="pullStartDttm" type="date-time"/>
			<field name="pullEndDttm" type="date-time" label="Pulled Date"/>
			<field name="reportFirstIssueDttm" type="date-time" label="Credit Report First Issue Date"/>
            <field name="expirationDttm" type="date-time" label="Expiration Date"/>
            <reference name="reportStatus" entity-type="AttributeChoice" relation="refers-to" label="Status/Result">
                <lookup>
                    <param name="key">BUREAU_REPORT_STATUS</param>
                </lookup>
            </reference>
            <field name="message" type="text" length="500"/>
            <field name="ficoScore" type="text" length="200"/>
            <field name="vantageScore" type="text" length="200"/>
            <field name="bureauScore" type="text" length="200"/>            
            <reference name="fileHitIndicator" entity-type="AttributeChoice" relation="refers-to" label="File Hit" internal="true">
                <lookup>
                    <param name="key">BUREAU_FILE_HIT_INDICATOR</param>
                </lookup>
            </reference>                     
            <reference name="ssnMatchIndicator" entity-type="AttributeChoice" relation="refers-to" label="SSN Match Indicator" internal="true">
                <lookup>
                    <param name="key">BUREAU_SSN_MATCH_INDICATOR</param>
                </lookup>
            </reference>                     
            <reference name="suppressionIndicator" entity-type="AttributeChoice" relation="refers-to" label="Suppression Indicator" internal="true">
                <lookup>
                    <param name="key">BUREAU_SUPPRESSION_INDICATOR</param>
                </lookup>
            </reference>                     
            <reference name="scoringIndicator" entity-type="AttributeChoice" relation="refers-to" label="Scoring Indicator" internal="true">
                <lookup>
                    <param name="key">BUREAU_SCORING_INDICATOR</param>
                </lookup>
            </reference>                     
            <reference name="scoringFactor1" entity-type="AttributeChoice" relation="refers-to" label="Scoring Factor 1" internal="true">
                <lookup>
                    <param name="key">BUREAU_SCORING_FACTOR</param>
                </lookup>
            </reference>                     
            <reference name="scoringFactor2" entity-type="AttributeChoice" relation="refers-to" label="Scoring Factor 2" internal="true">
                <lookup>
                    <param name="key">BUREAU_SCORING_FACTOR</param>
                </lookup>
            </reference>                     
            <reference name="scoringFactor3" entity-type="AttributeChoice" relation="refers-to" label="Scoring Factor 3" internal="true">
                <lookup>
                    <param name="key">BUREAU_SCORING_FACTOR</param>
                </lookup>
            </reference>                     
            <reference name="scoringFactor4" entity-type="AttributeChoice" relation="refers-to" label="Scoring Factor 4" internal="true">
                <lookup>
                    <param name="key">BUREAU_SCORING_FACTOR</param>
                </lookup>
            </reference>                     
            <field name="responseXml" type="large-text"/>
            <field name="responseXmlContentType" type="text" length="100"/>
            <field name="responseXmlDocumentName" type="text" length="100"/>
            <field name="responsePdf" type="binary"/>
            <field name="responsePdfContentType" type="text" length="100"/>
            <field name="responsePdfDocumentName" type="text" length="100"/>
            <field name="requestXml" type="large-text"/>
            <field name="requestXmlContentType" type="text" length="100"/>
            <field name="requestXmlDocumentName" type="text" length="100"/>
            <field name="reportPullType" type="text" length="36"/>
            <field name="reportRefId" type="text" length="36"/>
            <field name="refNumber" type="auto" label="ID"/>
            <collection name="dnbReports" collection-type="list" entity-type="BureauDNBReport" referred-by="bureauReport" relation="owner" internal="true"/>
       		<collection name="riskModels" collection-type="list" entity-type="ScrRskMod" referred-by="BureauReport" relation="owner"/>
        </entity>
        <entity name="BureauDNBReport"  stereotype="managed">
        	<reference name="bureauReport" entity-type="BureauReport" relation="refers-to"/>
        	<field name="reportName" type="text" label="Name"/>
            <reference name="reportFormatted" entity-type="BinaryType" relation="owner"/>
            <reference name="reportBinary" entity-type="BinaryType" relation="owner"/>
        </entity>
        
        <!-- Exposure -->
        <entity name="FacilityDelinquencyInfo" stereotype="managed">
            <field name="outstanding" type="amount" internal="true"/>
            <field name="current" type="boolean" internal="true"/>
            <field name="thirtyDayArrears" type="number" internal="true"/>
            <field name="sixtyDayArrears" type="number" internal="true"/>
            <field name="ninetyDayArrears" type="number" internal="true"/>
            <reference name="facility" entity-type="Facility" relation="refers-to"/>
            <reference name="exposure" entity-type="Exposure" relation="refers-to"/>
        </entity>
        <entity name="Exposure" stereotype="managed">
        	<field name="asOfDate" type="date-time" internal="true"/>
        	<collection name="facilityExposures" collection-type="list" entity-type="FacilityExposure" referred-by="exposure" relation="owner" internal="true"/>        	
        	<collection name="exposureSummaries" collection-type="list" entity-type="ExposureSummary" referred-by="exposure" relation="owner" internal="true"/>
        	<collection name="delinquencies" collection-type="list" entity-type="FacilityDelinquencyInfo" referred-by="exposure" relation="owner" internal="true"/>
        	<field name="totalBorrowerRequestedExposure" type="derived:amount"/>
        	<field name="totalContingentRequestedExposure" type="derived:amount"/>
        	<field name="noLoanExposFromIMPACS" type="text"/>
        	<field name="totalCalculatedRequestedExposure" type="derived:amount"/>
        	<field name="totalOtherRequestedExposure" type="amount"/>
        	<field name="totalRelationshipRequestedExposure" type="derived:amount"/>        	
        	<field name="totalBorrowerOutstandingExposure" type="derived:amount"/>
        	<field name="totalContingentOutstandingExposure" type="derived:amount"/>
        	<field name="totalCalculatedOutstandingExposure" type="derived:amount"/>
        	<field name="totalOtherOutstandingExposure" type="amount"/>
        	<field name="totalRelationshipOutstandingExposure" type="derived:amount"/>        	
        	<field name="totalBorrowerExposure" type="derived:amount"/>
        	<field name="totalContingentExposure" type="derived:amount"/>
        	<field name="totalCalculatedExposure" type="derived:amount"/>
        	<field name="totalOtherExposure" type="derived:amount"/>
        	<field name="totalRelationshipExposure" type="derived:amount"/>        	
        	<field name="totalBorrowerRequestedUnsecuredExposure" type="derived:amount"/>
        	<field name="totalContingentRequestedUnsecuredExposure" type="derived:amount"/>
        	<field name="totalCalculatedRequestedUnsecuredExposure" type="derived:amount"/>
        	<field name="totalOtherRequestedUnsecuredExposure" type="amount"/>
        	<field name="totalRelationshipRequestedUnsecuredExposure" type="derived:amount"/>        	
        	<field name="totalBorrowerOutstandingUnsecuredExposure" type="derived:amount"/>
        	<field name="totalContingentOutstandingUnsecuredExposure" type="derived:amount"/>
        	<field name="totalCalculatedOutstandingUnsecuredExposure" type="derived:amount"/>
        	<field name="totalOtherOutstandingUnsecuredExposure" type="amount"/>
        	<field name="totalRelationshipOutstandingUnsecuredExposure" type="derived:amount"/>        	
        	<field name="totalBorrowerUnsecuredExposure" type="derived:amount"/>
        	<field name="totalContingentUnsecuredExposure" type="derived:amount"/>
        	<field name="totalCalculatedUnsecuredExposure" type="derived:amount"/>
        	<field name="totalOtherUnsecuredExposure" type="derived:amount"/>
        	<field name="totalRelationshipUnsecuredExposure" type="derived:amount"/>  
        	<collection name="directFacilityExposures" collection-type="list" entity-type="CustomerFacilityExposure" relation="owner"/>
        	<collection name="indirFacExposures" collection-type="list" entity-type="CustomerFacilityExposure" relation="owner"/>
        	<collection name="customerFacilityExposures" collection-type="list" entity-type="CustomerFacilityExposure" referred-by="exposure" relation="owner"/>      	
        </entity>
        <entity name="FacilityExposure" stereotype="managed">
            <field name="facilityNumber" type="long"/>
			<reference name="facilityType" entity-type="AttributeChoice" relation="refers-to" label="Role" required="false">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="natureOfSecurity" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">NATURE_OF_SECURITY</param>
                </lookup>
            </reference>
            <reference name="facilityRR" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RISK_RATING</param>
                </lookup>
            </reference>
			<field name="requestedDebtorExposure" type="amount"/>
			<field name="requestedExposure" type="amount"/>
			<field name="prodCode" type="text" />
			<field name="existingExposure" type="amount"/>
			<field name="adjustedExposure" type="amount"/>
			<field name="accountNumber" type="text" />
			<field name="existingFacility" type="boolean"/>
			<field name="taxPayerIdNumber" type="text" />            
            <field name="borrowerName" type="text" />    
			<field name="avgMoBal" type="amount" />
			<field name="type" type="text" />
			<field name="outstandingExposure" type="amount"/>
            <field name="current" type="boolean" required="false"/>
			<field name="thirtyDayArrears" type="amount" required="false"/>
			<field name="sixtyDayArrears" type="amount" required="false"/>
			<field name="ninetyDayArrears" type="amount" required="false"/>
			<field name="debtorFundingLimitDer" type="derived:text" required="false"/>
            <reference name="borrower" entity-type="Customer" relation="refers-to"/>
            <collection name="accountCustomers" collection-type="list" entity-type="Customer" relation="refers-to"/>
            <collection name="relatedCustomers" collection-type="list" entity-type="Customer" relation="refers-to"/>
            <reference name="facility" entity-type="Facility" relation="refers-to"/>
            <reference name="counterParty" entity-type="Customer" relation="refers-to"/>
            <reference name="exposure" entity-type="Exposure" relation="refers-to"/>
            <reference name="debtorCustomerDer" entity-type="derived:DebtorCustomer" relation="refers-to"/>
        </entity>
        <!-- Customer Facility Exposure, not used for persistence, but to assist UI, a workaround to handle group by
-->
        <entity name="CustomerFacilityExposure" stereotype="managed">
        	<field name="totalOutstandingExposure" type="derived:money"/>
        	<field name="totalRequestedExposure" type="derived:money" scale="0"/>
        	<field name="softCreditOutstandingAdjustment" type="amount" scale="0" />
        	<field name="softCreditExistingAdjustment" type="amount" scale="0" />
        	<field name="outstandingAdjustment" type="amount" scale="0" />
        	<field name="existingDirectAdjustment" type="amount" scale="0" />
        	<reference name="customerRole" entity-type="FacilityCustomerRole" relation="refers-to"/> <!-- TODO change to FacilityPartyRole -->
        	<reference name="relParty" entity-type="RelationshipParty"	relation="refers-to" />  
        	<reference name="exposure" entity-type="Exposure"	relation="refers-to" />
        	<collection name="facilityExposures" collection-type="list" entity-type="FacilityExposure" relation="refers-to"/>
        	<collection name="facilityExposuresDer" collection-type="derived:list" entity-type="FacilityExposure" relation="refers-to"/>
        	<collection name="softFacExpsrs" collection-type="list" entity-type="FacilityExposure" relation="owner"/>
        </entity>
        <entity name="ExposureSummary" stereotype="managed" label="Exposure Summary">            
	       <field name="outstandingExposure" type="amount" scale="0"/>
			<field name="existingExposure" type="amount" scale="0"/>
            <field name="requestedExposure" type="amount" scale="0"/>
			<field name="adjustedExposure" type="amount" scale="0"/>
			<field name="existingIncrementalExposure" type="amount" scale="0"/>
            <field name="exposureValue" type="amount" scale="0"/>
            <reference name="exposureType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">EXPOSURE_TYPE</param>
                </lookup>
            </reference>         
            <reference name="exposure" entity-type="Exposure" relation="refers-to"/>
        </entity>          
        <!-- Scoring -->
       <entity name="Scoring" stereotype="managed">
            <field name="evalDttm" type="date-time" label="Scoring Recommended Decision Date"/>
            <field name="scoringDecisionDttm" type="derived:text" label="Scoring Decision Date"/>
            <field name="finalDecisionDttm" type="date-time" label="Scoring Recommended Decision Date"/>
			<reference name="exceptionAuthority" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RAC_EXCEPTION_AUTHORITY</param>
                </lookup>
            </reference>
			<field name="integrationRequestId" type="text"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<collection name="scoringRecommRules" collection-type="list" entity-type="ScoringRecommRule" referred-by="scoring" relation="owner" internal="true"/>
			<collection name="scoringAttributes" collection-type="list" entity-type="ScoringAttribute" referred-by="scoring" relation="owner" internal="true"/>
			<collection name="facScorings" collection-type="list" entity-type="FacScoring" relation="owner" referred-by="scoring" />
			<collection name="partyScorings" collection-type="list" entity-type="PartyScoring" relation="owner" referred-by="scoring" />		
			<reference name="request" entity-type="Request" relation="refers-to" required="false"/>
        </entity>       

        <entity name="ScorecardDetails" stereotype="managed">
            <field name="scorecardModel" type="text"/>
            <field name="scorecardType" type="text"/>
            <field name="rawScore" type="text" length="36" required="false"/>
            <field name="baseLimitExp" type="text" length="36" required="false"/>
            <field name="requestedExp" type="text" length="36" required="false"/>
			<field name="ficoScore" type="text" length="36"/> 
			<field name="auditRespXml" type="binary"/>
            <field name="recomm" type="text"/>
            <field name="offer" type="boolean" required="false"/>
            <field name="counterOffer" type="boolean" required="false"/>
            <field name="sbaCounterOffer" type="boolean" required="false"/>
            <field name="standard" type="boolean" required="false"/>
            <collection name="riskModelsDer" collection-type="derived:list" entity-type="ScrRskMod" relation="owner"/>
			<reference name="recommId" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RECOMMENDATION_DECISION</param>
				</lookup>
			</reference>
			<reference name="recommCategory" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RECOMMENDATION_CATEGORY</param>
				</lookup>
			</reference>
            <reference name="customer" entity-type="Customer" relation="refers-to" required="false"/>
			<reference name="exceptionAuthority" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RAC_EXCEPTION_AUTHORITY</param>
				</lookup>
			</reference>
            <collection name="scrBureauRprts" collection-type="list" entity-type="BureauReport" referred-by="ScorecardDetails" relation="owner" />
            <collection name="scrBureauRprtsDer" collection-type="derived:list" entity-type="BureauReport" referred-by="ScorecardDetails" relation="owner" />
        </entity>
        <entity name="Scorecard" stereotype="managed">
            <field name="scorecardModel" type="text"/>
            <field name="scorecardDesc" type="text"/>
            <field name="monthsSinceAppRecvd" type="integer"/>
            <field name="activeFlag" type="boolean"/>
            <field name="addDateWeight" type="integer"/>
            <field name="totalAppsRcvdWeight" type="integer"/>
            <field name="totalAppsAprvdWeight" type="integer"/>
            <field name="pctOfAnBRiskGradeWeight" type="integer"/>
            <field name="avgDaysToPayWeight" type="integer"/>
            <field name="conversionRateWeight" type="integer"/>
            <field name="totalAppsBookedWeight" type="integer"/>
            <field name="delinquentLeaseWeight" type="integer"/>
            <field name="badDebtPctWeight" type="integer"/>
            <field name="totalCostWeight" type="integer"/>
            <reference name="program" entity-type="Program" relation="refers-to"/>
            <reference name="region" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REGION</param>
                </lookup>
            </reference>
            <reference name="district" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DISTRICT</param>
                </lookup>
            </reference>
            <reference name="operatingUnit" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">OPERATING_UNIT</param>
                </lookup>
            </reference>
            <reference name="sbu" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">STRATEGIC_BUSINESS_UNIT</param>
                </lookup>
            </reference>
            <collection name="scorecardCategories" collection-type="list" entity-type="ScorecardCategory" referred-by="scorecard" relation="owner"/>
        </entity>
        <entity name="ScorecardCategory" stereotype="managed">
            <field name="weight" type="number"/>
            <field name="thresholdFrom" type="text"/>
            <field name="thresholdTo" type="text"/>
            <field name="rawScore" type="text"/>
            <reference name="scorecardCategoryType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SCORECARD_CATEGORY_TYPE</param>
                </lookup>
            </reference>
            <reference name="scorecard" entity-type="Scorecard" relation="refers-to"/>
        </entity>        
        <entity name="PartyScoreAdverseAction" stereotype="managed">
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
            <reference name="scorecardDetails" entity-type="ScorecardDetails" relation="refers-to"/>
            <field name="adverseActionMessage" type="text"/>
        </entity>
        <entity name="FacilityRecomm" stereotype="managed">
			<field name="recomm" type="text"/>
			<reference name="recommId" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RECOMMENDATION_DECISION</param>
				</lookup>
			</reference>
			<reference name="recommCategory" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RECOMMENDATION_CATEGORY</param>
				</lookup>
			</reference>
			<reference name="facility" entity-type="Facility" relation="refers-to" />
			
			
			<reference name="winningParty" entity-type="Customer" relation="refers-to" required="false"/>
			 <field name="facilityNumber" type="text" label="Facility Number"/>
			 <reference name="facilityType" entity-type="AttributeChoice" relation="refers-to">
			 	<lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
             </reference>
			 <field name="requestedLoanAmt" type="amount" label="Requested Amount"/>
			 
        </entity>   
     
     	<!-- Banks And Trade -->
        <entity name="BankAndTrade" stereotype="managed">
            <field name="name" type="text" label="Bank Name" required="true" indexed="true"/>
            <field name="phoneNumber" type="phone"/>
            <field name="refNumber" type="auto" tags="Header"/>
            <field name="servicingIdentifier" type="text" internal="true"/>
            <field name="faxNumber" type="phone"/>
            <field name="primary" type="boolean"/>
            <field name="doNotDebit" type="boolean"/>
            <field name="routingNumber" type="text"/>
            <field name="branchName" type="text"/>
            <reference name="branchAddress" entity-type="Address" relation="owner"/>
			<reference name="accountType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">BANK_ACCOUNT_TYPE</param>
                </lookup>
            </reference> 
   			<field name="nameOnAccount" type="text"/>      
            <field name="accountName" type="text"/>
            <field name="bankAccountNumber" type="text"/>
            <reference name="bankTradeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BANK_TRADE_TYPE</param>
                </lookup>
            </reference> 
            <reference name="bankCustomerCode" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">BANK_CUSTOMER_CODE</param>
				</lookup>
			</reference>           
            <field name="averageBalance" type="money"/>
            <field name="month1DepositAmount" type="money"/>
            <field name="month2DepositAmount" type="money"/>
            <field name="month3DepositAmount" type="money"/>                        
            <field name="lineOfCreditAmount" type="money"/>
            <field name="presentBalance" type="money"/>
            <field name="accountExpOrRenewalDttm" type="date-time"/>
            <field name="accountOpenedDttm" type="date-time"/>
            <field name="comments" type="textarea"/>    
            <reference name="bankContactInfo" entity-type="ContactInfo" relation="owner"/>   
            <collection name="banksTradeContactInfo" entity-type="BanksTradeContactInfo" collection-type="list" referred-by="bankAndTrade" relation="owner"/>     
            <reference name="bankContact" entity-type="Contact" relation="owner"/>
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
            <display-format>$o.name$</display-format>
            <find-queries>
            	<!-- <query name="byServicingIdentifier" select="many">where servicingIdentifier like :servicingIdentifier</query> -->
            	<query name="byRefNumber" select="one">where refNumber = :refNumber</query>
                <query name="quickSearch" select="many">where name like :q</query>
            </find-queries>            
        </entity>
        
        <entity name="Account" stereotype="managed">
        	<reference name="customer" entity-type="Customer" relation="refers-to" ruleTriggerOnEvent="true">
        		<filters>
                    <filter triggerExpr="isdef root" expr="entity.isNonIndividual()" />
                </filters>
        	</reference>
        	<field name="refNumber" type="auto"/>
        	<field name="externalIdentifier" type="text" length="255" tags="Header" indexed="true" internal="true"/>
        	<field name="servicingIdentifier" type="text" internal="true" indexed="true" tags="Header"/>
        	<find-queries>
                <query name="byExternalIdentifier" select="one">where externalIdentifier like :externalIdentifier</query>
            </find-queries>
        </entity>
     	
     	<entity name="ServiceMessage" stereotype="managed">
			<field name="message" type="text"/>
			<field name="status" type="text"/>
			<field name="sourceSystem" type="text"/>
			<field name="servicingIdentifier" type="text"/>
			<display-format>$o.message$</display-format>
			<find-queries>
                <query name="byServicingIdentifier" select="one">where servicingIdentifier like :servicingIdentifier</query>
            </find-queries>
     	</entity>
     	
		<!-- Request -->
        <entity name="Request" stereotype="business-entity" label="Application">
        	<field name="refNumber" type="auto" tags="Header"/>
            <reference name="requestType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REQUEST_TYPE</param>
                </lookup>
            </reference>
            <collection name="serviceMessages" collection-type="list" entity-type="ServiceMessage" relation="owner"/>
            <reference name="requestTypeDer" entity-type="derived:AttributeChoice" relation="refers-to"/>
            <field name="partnerDrawFeeCommissionPct" type="percent"/>
            <field name="partnerOrgFeeCommissionPct" type="percent"/>
            <field name="partnerId" type="text"/>
            <field name="requestName" type="text" length="50" label="Application Name"/>
            <field name="requestNameDer" type="derived:text" label="Application Name"/>
            <field name="totalRequestedLoanAmt" type="derived:amount" label="Total Requested Exposure" /> 
			<field name="description" type="textarea"/>
			<field name="appealStatus" type="text" internal="true"/>
			<reference name="account" entity-type="Account" relation="owner" ruleTriggerOnEvent="true"/>
			<field name="accountDer" type="derived:text"/>
			<field name="nullSafeNameFromAccountDer" type="derived:text" /> 
            <field name="modificationDate" type="date-time"/>
             <field name="modificationDateDer" type="derived:date-time"/>
            <reference name="modificationType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">MODIFICATION_TYPE</param>
                </lookup>
            </reference>
            <reference name="oneStopApp" entity-type="OneStopApp" relation="owner"/>
            <reference name="oneStopExposure" entity-type="OneStopExposure" relation="owner"/>
			<field name="receivedDate" type="date-time" required="false"/>
			<field name="receivedDateDer" type="derived:date-time" required="false"/>
			<field name="receivedDateAddedSixtyDateDer" type="derived:date-time" required="false"/>
            <field name="requestDate" type="date-time" label="Request Date"/>
            <field name="regbDttm" type="date-time" label="Reg B Start Date"/>
            <field name="regbDttmDer" type="derived:date-time" label="Reg B Start Date"/>
			<field name="fullySecure" type="boolean" required="false" label="Customer willing to fully secure?:"/>
			<field name="externalIdentifier" type="text" length="255" tags="Header" indexed="true" internal="true"/> 
			<field name="sfdcAppOwnerId" type="text" length="255" internal="true" label="SFDC Owner ID"/>
			<field name="sfdcAppOwnerName" type="text" length="255" internal="true"  label="SFDC Owner Name"/>			
			<field name="portalAccessKey" type="text" length="255" internal="true" indexed="true" />       	
            <reference name="creditAnalyst" entity-type="User" relation="refers-to">
                <filters>
                    <filter triggerExpr="isdef root" expr="entity.wfStatus !=null  &amp;&amp;  entity.wfStatus.statusKey !='USER_STATUS_INACTIVE' &amp;&amp;  (entity.hasRoleCategory('ROLE_CATEGORY_CREDIT_ANALYST')  || entity.hasRoleCategory('ROLE_CATEGORY_CREDIT_OFFICER') || entity.hasRoleCategory('ROLE_CATEGORY_SUPER_ADMINISTRATOR')) "/>
                </filters>
            </reference>
            <reference name="documentSpecialist" entity-type="User" relation="refers-to">
                <filters>
                    <filter triggerExpr="isdef root" expr="entity.wfStatus !=null  &amp;&amp;  entity.wfStatus.statusKey !='USER_STATUS_INACTIVE' &amp;&amp;  (entity.hasRoleCategory('ROLE_CATEGORY_CREDIT_ANALYST')  || entity.hasRoleCategory('ROLE_CATEGORY_CREDIT_OFFICER') || entity.hasRoleCategory('ROLE_CATEGORY_SUPER_ADMINISTRATOR')) "/>
                </filters>
            </reference>
            <field name="interviewDttm" type="date-time"/>
            <reference name="complexity" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COMPLEXITY</param>
                </lookup>
            </reference>
            <reference name="referralSource" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REFERRAL_SOURCE</param>
                </lookup>
            </reference>
            <field name="referralName" type="text"/>
            <field name="referralAccountName" type="text"/>
			<reference name="recommendDecline" entity-type="AttributeChoice" relation="refers-to" label="Recommend Decline">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
			<field name="expectedCloseDate" type="date-time"/>
			<field name="expectedCloseDateDer" type="derived:date-time"/>
			<field name="confidential" type="boolean"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="approval" entity-type="Approval" relation="owner"/>
            <reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_REQUEST</param>
                </lookup>
            </reference>
            <collection name="bankruptcyFilings" collection-type="list" entity-type="bankruptcyFiling" referred-by="request" relation="owner"/>
            <collection name="judgmentLiens" collection-type="list" entity-type="judgmentLien" referred-by="request" relation="owner"/>
			<collection name="noiaLogs" collection-type="list" entity-type="NoiaLogs" referred-by="request" relation="owner"/>            
            <collection name="allFacilities" collection-type="list" entity-type="Facility" referred-by="request" relation="owner"/>
            <collection name="srcFacilities" collection-type="derived:list" entity-type="Facility" relation="owner"/>
            <collection name="coaFacilities" collection-type="derived:list" entity-type="Facility" relation="owner"/>
            <collection name="coaEvalFacilitiesDer" collection-type="derived:list" entity-type="CoaEvaluation" relation="owner"/>
            <collection name="decisionFacilities" collection-type="derived:list" entity-type="Facility" relation="owner"/>
            <field name="racExceptionAuth" type="derived:text" label="RAC Exception Authority"/>
            <reference name="recommendedApprCategory" entity-type="AttributeChoice" relation="refers-to" label="Recommended Approval Category" internal="true">
                <lookup>
                    <param name="key">CREDIT_AUTHORITY_LEVEL</param>
                </lookup>
            </reference>
            <collection name="citiRelationship" collection-type="list" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">OTHER_LESSOR_RELATIONSHIP</param>
                </lookup>
            </collection>
            <field name="finalDecisionDate" type="date-time" label="Final Decision Date" internal="true"/>
            <field name="grossRevConsider" type="number" />
            <field name="loanToGross" type="percent"/>
			<reference name="loanToValueCre" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">LOAN_TO_VALUE_CRE</param>
				</lookup>
			</reference>
            <field name="cashFlowDebtServiceRatio" type="percent"/>
            <field name="cashFlowMargin" type="number"/>
            <reference name="craRevenue" entity-type="AttributeChoice" relation="refers-to" label="CRA Revenue">
                <lookup>
                    <param name="key">CRA_REVENUE</param>
                </lookup>
            </reference>
             <reference name="withdrawReasonLease" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">WITHDRAW_REASON</param>
                </lookup>
            </reference>
            <field name="craRevenueAmt" type="amount" />
            
            <field name="requestDttm" type="date-time" label="Request Date"/>
            <reference name="pullReportCustomer"  entity-type="Customer" relation="refers-to">
                <lookup name="mvel">
            		<param name="expr">thiz.allCustomers</param>
                </lookup>
                 <filters>
                    <filter expr="entity.isIndividual()"/>
                </filters>
                
            </reference>
            <reference name="bureauName" entity-type="AttributeChoice" relation="refers-to" label="Bureau">
                <lookup>
                    <param name="key">BUREAU_NAME</param>
                </lookup>
            </reference>
            <reference name="pullNewReport" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="freezeCode" type="text" label="Freeze Code"/>
            <collection name="bureauReports" collection-type="list" entity-type="BureauReport" referred-by="request" relation="owner" internal="true"/>
            <collection name="compliances" collection-type="list" entity-type="Compliance" relation="owner"/>
            <collection name="moodyCustomers" collection-type="list" entity-type="MoodyCustomer" referred-by="request" relation="owner"/>
            <collection name="covenants" collection-type="list" entity-type="Covenant" relation="owner" referred-by="request"/>
            <collection name="covenantEvaluations" collection-type="derived:list" entity-type="CovenantEvaluation" relation="owner" referred-by="request"/>
            <reference name="relationship" entity-type="Relationship" relation="refers-to"/>
            <field name="nullSafeNameFromRelationshipDer" type="derived:text" />             
            <reference name="exposure" entity-type="Exposure" relation="owner"/>
            <!--  used to assist in UI -->
            <collection name="directFacilityExposures" collection-type="derived:list" entity-type="CustomerFacilityExposure" referred-by="exposure" relation="refers-to"/>
            <collection name="guarantorFacilityExposures" collection-type="derived:list" entity-type="CustomerFacilityExposure" referred-by="exposure" relation="refers-to"/>
            <collection name="debtorFacilityExposures" collection-type="derived:list" entity-type="CustomerFacilityExposure" referred-by="exposure" relation="refers-to"/>
            <collection name="allRACSetEvaluations" collection-type="list" entity-type="RacsetEvaluation" referred-by="request" relation="owner"/>
            <reference name="scoring" entity-type="Scoring" relation="owner"/>
            <collection name="uccs" collection-type="list" entity-type="UCC"  referred-by="request"  relation="owner"/>
            <collection name="uccSrchs" collection-type="list" entity-type="UccSrch" referred-by="request" relation="owner"/>
            <collection name="requestDisclosures" collection-type="list" entity-type="RequestDisclosure" referred-by="request" relation="owner"/>
            <collection name="allDebtorsDer" entity-type="DebtorCustomer" collection-type="derived:list" relation="owner"/>			
			<field name="onerac" type="spreadsheet" />
			<field name="companyOverview" type="textarea" />
			<field name="debtorOverview" type="textarea" />
			<field name="clientOverview" type="textarea" />
			<field name="mgmtOverview" type="textarea" />
			<field name="dealOverview" type="textarea" />
			<field name="recommendation" type="textarea" />
			<field name="lastModifiedByUserDer" type="derived:text" />    
			<field name="createdByUserDer" type="derived:text" />    
			<field name="dealStatusInd" type="text" internal="true" ruleTriggerOnEvent="true"/>	
			<field name="servicingIdentifier" type="text" tags="Header" indexed="true" />
            <reference name="program" entity-type="Program" relation="refers-to"/>
            <reference name="contract" entity-type="Contract" relation="refers-to"/>
			<reference name="racCommentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="coaCommentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="keyPricing" entity-type="KeyPricing" relation="owner" internal="true"/> 
            <collection name="appScorings" collection-type="list" entity-type="Scoring" referred-by="request" relation="owner" />
            <reference name="latestAppScoring" entity-type="derived:Scoring" relation="owner" />
            <reference name="selectedAppScoring" entity-type="Scoring" transient="true" relation="refers-to" ruleTriggerOnEvent="true">
            	<lookup name="mvel">
                    <param name="expr">thiz.appScorings</param>
                </lookup>
            </reference>          
			<feature operation="implements">
                <data>com.thirdpillar.foundation.model.WorkflowAware</data>
 				<data>com.thirdpillar.foundation.model.DocumentAware</data>                
            </feature>
            <display-format>$o.refNumber$</display-format>
            <find-queries>
            	<query name="byWfStatus" select="many"> where wfStatus.statusKey in (:statusKeys)</query>
            	<query name="byRefNumber" select="one"> where refNumber = :refNumber</query>
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
                <query name="byAccount" select="one">where account = :account</query>
                <query name="forNOIAProcess" select="many">where wfStatus.statusKey in (:noiaStatuses) and regbDttm &lt; :regbDttm </query>
                <!-- <query name="byServicingIdentifier" select="one">where servicingIdentifier like :servicingIdentifier</query> -->
            </find-queries>
        </entity>		   
        <entity name="NoiaLogs" stereotype="managed" label="NOIA Log">
            <reference name="request" entity-type="Request" relation="refers-to"/>
            <reference name="noiaType" entity-type="AttributeChoice" relation="refers-to" label="Type of NOIA" required="true">
                <lookup>
                    <param name="key">NOIA_TYPE</param>
                </lookup>
            </reference>
            <field name="personName" type="text" label="Person spoke to OR Recipient"/>
            <field name="personTitle" type="text" label="Title of Person"/>
            <field name="noiaReason" type="textarea"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
        </entity>
        <entity name="RequestDisclosure" stereotype="managed" label="Request Disclosure">
        	<reference name="request" entity-type="Request" relation="refers-to"/>
        	<field name="disclosureHeader" type="text" label="Disclosure Header" />
        	<field name="disclosureDetails" type="large-text" label="Disclosure Details" />
        	<reference name="disclosureDoc" entity-type="BinaryType" label="Disclosure Document" relation="owner"/>
        	<field name="accepted" type="boolean" label="Disclosure Accepted?"/>
        	<field name="acceptedOn" type="date-time" label="Disclosure On"/>
        	<reference name="acceptedBy" entity-type="Customer" relation="refers-to" label="Accepted By"/>
        </entity>
                
        <!-- Facility -->
        <entity name="Facility" stereotype="managed" label="Product">
        
        	<field name="refNumber" type="auto" label="Credit Facility Number" tags="Header"/>
        	<field name="linkToCheckingAccount" type="text"/>
        	<field name="obligationNumber" type="text" />
            <reference name="facilityCategory" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_CATEGORY</param>
                </lookup>
            </reference>
            <reference name="facilityType" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="facilitySubType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CRE_FACILITY_SUB_TYPE</param>
                </lookup>
            </reference>
            <reference name="exposureLimitFacilityType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">EXPOSURE_LIMIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
             <reference name="afsProductType" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
		    	<lookup>
		        	<param name="key">AFS_PRODUCT_TYPE</param>
		        		<param name="groupMvel"><![CDATA[if(thiz.facilityType != null && thiz.facilityType.key=='FOREX') {return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='FUNDS_AVAILABILITY') {return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='TERM_LOAN') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='TRADE_SERVICES') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='REVOLVER_TO_TERM') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='TERM_LOAN') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='FULLY_AMORITIZED') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='BALLOON') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='BUSINESS_INSTALLMENT_LOAN') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='COMMERCIAL_BIL') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='COMMERCIAL_LETTER_OF_CREDIT') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='COMMERCIAL_TRADE_LCs') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='STANDBY_LETTER_OF_CREDIT') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='TRADE_BA') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='BUSINESS_CREDIT_ACCOUNT') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='BUSINESS_INSTALLMENT_LOAN_6MONTH') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='BUSINESS_BANKING_BIL') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='BUSINESS_INSTALLMENT_LOAN_TAXI') { return thiz.facilityType.key; } else if(thiz.facilityType != null && thiz.facilityType.key=='NON_REVOLVER_TO_TERM') { return thiz.facilityType.key; } else { return null; }]]></param>
		 		</lookup>
            </reference>
            <reference name="effectiveProductType" entity-type="derived:AttributeChoice" relation="refers-to"/>
            <reference name="purposeCode" entity-type="AttributeChoice" relation="refers-to">
            	<lookup>
                 	<param name="key">PURPOSE_CODE</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.facilityType != null) { return thiz.facilityType.key; } else { return null; }]]></param>
                </lookup>
            </reference>
            <reference name="productPurpose" entity-type="AttributeChoice" relation="refers-to">
            	<lookup>
                 	<param name="key">PRODUCT_PURPOSE</param>
                </lookup>
            </reference>
            <reference name="natureOfSecurity" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">NATURE_OF_SECURITY</param>
                </lookup>
            </reference>
            <reference name="securitizationPool" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SECURITIZATION_POOL</param>
                </lookup>
            </reference>
            <reference name="businessTypeFacility" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BUSINESS_TYPE_FACILITY</param>
                </lookup>
            </reference>
            <reference name="sbaSourceCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SBA_SOURCE_CODE</param>
                </lookup>
            </reference>
            <reference name="sbaType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SBA_TYPE</param>
                </lookup>
            </reference>
            <reference name="withdrawReasonLease" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">WITHDRAW_REASON</param>
                </lookup>
            </reference>
            
            <field name="hierarchy" type="boolean" required="false"/>
            <field name="withCheckAccess" type="boolean" label="With Check Access"/>
            <field name="externalIdentifier" type="text" tags="Header" indexed="true" internal="true"/>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true">
                <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_FACILITY</param>
                </lookup>
            </reference>
            
            <field name="requestedLoanAmt" type="amount" label="Requested Amount" required="false" length="18"/> <!-- Used for Lending only -->
            <field name="drawRequest" type="amount" /> <!-- Used for Lending only -->
            <field name="approvedLoanAmt" type="amount" label="Approved Amount" required="false" length="18" ruleTriggerOnEvent="true" /> <!-- Used for Lending only -->
            <field name="requestedTerm" type="integer" label="Requested Term" length="9"/>
            <field name="requestedTermDer" type="derived:integer" />
            <field name="approvedTerm" type="integer" label="Approved Term" length="9"/>
            <field name="approvedTermDer" type="derived:integer"/>
   			<field name="requestedLoanAmtDer" type="derived:amount" label="Requested Amount" />
            <field name="approvedLoanAmtDer" type="derived:amount" label="Approved Amount" /> 
   			<field name="approvalExpirationDate" type="date-time" label="Approval Expiration Date"/>
   			<field name="approvalExpirationDateDer" type="derived:date-time" label="Approval Expiration Date" />
        	<field name="totalSyndicatedAmt" type="derived:amount"/>
        	<field name="remainingSyndicatedAmt" type="derived:amount"/>
        	<field name="servicingIdentifier" type="text" internal="true" indexed="true"  tags="Header"/>
        	<field name="coaCleared" type="boolean" />
        	<field name="renewalApprDtUpdated" type="boolean"/>
        	
            <reference name="facilityRR" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RISK_RATING</param>
                </lookup>
            </reference>
            <reference name="facilityRRSource" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ORR_SOURCE</param>
                </lookup>
            </reference>
            <field name="descOfFinancingNeeds" type="textarea" label="Description of Financing Needs"/>
            <field name="withdrawReason" type="text" label="Withdraw Reason"/>
            <field name="facilityDecisionDate" type="date-time"/>
            
            <reference name="accountManager" entity-type="User" relation="refers-to" label="Account Manager" />
            <reference name="relationshipSalesManager" entity-type="User" relation="refers-to" label="Relationship Sales Manager" />
            <reference name="salesAssistant" entity-type="User" relation="refers-to" label="Sales Assistant" />
            <reference name="projectManager" entity-type="User" relation="refers-to" label="Project Manager" />
        	
        	<field name="modNoiaReason" type="textarea" label="Modification Noia Reasons"/>
			<field name="modWithdrawReason" type="textarea" label="Modification Withdraw Reason"/>
			<field name="renewalDate" type="date-time" label="Renewal Date"/>
            <reference name="modificationStatus" entity-type="AttributeChoice" relation="refers-to" internal="true">
                <lookup>
                    <param name="key">MODIFICATION_STATUS</param>
                </lookup>
            </reference>
            <collection name="modCreditDenialReason" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_DENIAL_REASONS</param>
                </lookup>
            </collection>
			
			<reference name="pricingPolicy" entity-type="PricingPolicy" relation="refers-to" />
        	<!--  roles -->
        	<!-- Pricing Option -->
        	<reference name="pricingOption" entity-type="PricingOption" relation="owner"/>
        	<collection name="assets" collection-type="list" entity-type="Asset" referred-by="facility" relation="owner"/>
        	<collection name="additionalOptions" collection-type="list" entity-type="PricingOption" relation="owner" referred-by="facility"/>
        	<reference name="rewriteReason" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REWRITE_REASON</param>
                </lookup>
            </reference>        	
        	<collection name="facilityRewrites"  collection-type="list" entity-type="FacilityRewriteInfo" relation="owner" referred-by="Facility"/>
        	<collection name="productLimits"  collection-type="list" entity-type="ProductLimits" relation="owner" referred-by="facility"/>
        	<collection name="collaterals" collection-type="list" entity-type="Collateral" relation="refers-to">
	        	<lookup name="mvel"> 
					<param name="expr">thiz.customersCollaterals</param> 
				</lookup> 
        	</collection>
        	
        	<field name="fundingStatus" type="text"/>
        	<reference name="funding" entity-type="Funding" relation="owner"/>
        	<!-- Feepolicy -->
        	<field name="amountFinanced" type="derived:amount"/>
        	<!-- Decision -->
            <reference name="facilityDecision" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">FACILITY_DECISION</param>
                </lookup>
            </reference>
            <collection name="creditDenialReason" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_DENIAL_REASONS</param>
                </lookup>
            </collection>
            <reference name="request" entity-type="Request" relation="refers-to"/>
            <field name="nullSafeNameFromRequestDer" type="derived:text" />
            <reference name="coasetDefinition" entity-type="CoasetDefinition" relation="owner"/>
        	<field name="coaAvailableDisburse" type="derived:amount"/>
            <reference name="preDocTaskOwner" entity-type="User" relation="refers-to" internal="true"/>
            <reference name="contract" entity-type="Contract" relation="refers-to"/> <!--  ?? -->
        	
            <reference name="program" entity-type="Program" relation="refers-to"/>
            	
            <collection name="debtors" collection-type="list" entity-type="DebtorCustomer" referred-by="facility" relation="owner"/>
			            	
            <reference name="facilityCustomerRole" entity-type="FacilityCustomerRole" relation="refers-to"/>
            <collection name="accountCustomers" collection-type="derived:list" entity-type="Customer" relation="refers-to"/>
            <reference name="primaryBorrower" entity-type="derived:Customer" relation="refers-to"/>
			<collection name="individualCustomers" collection-type="derived:list" entity-type="Customer" relation="refers-to"/>
            <collection name="facilityCustomerRoles" collection-type="list" entity-type="FacilityCustomerRole" referred-by="facility" relation="owner"/>
            <collection name="facilityTranches" collection-type="list" entity-type="Tranche" referred-by="facility" relation="owner"/>
            <collection name="facilityGuaranty" collection-type="list" entity-type="Guarantee" referred-by="guarantyFacility" relation="owner"/>
            <reference name="facilityPracticeInformation" entity-type="FacilityPracticeInformation" relation="owner"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="facilityContract" entity-type="FacilityContract" relation="owner" />
            <reference name="renewalOf" entity-type="Facility" relation="refers-to" />
            <reference name="assetQualityMetrics" entity-type="AssetQualityMetrics" relation="owner" />
            <reference name="exposureAtDefault" entity-type="ExposureAtDefault" relation="owner" />
            <reference name="factoring" entity-type="Factoring" relation="owner" />
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.WorkflowAware</data>
            </feature>
            <display-format>$o.refNumber$ - $o.facilityType.value$</display-format>
            <find-queries>
            	<!-- <query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query> -->
            	<query name="byRefNumber" select="one">where refNumber = :refNumber</query>
            	<!-- <query name="byRefNumberAndServicingIdentifier" select="one">where refNumber = :refNumber and servicingIdentifier = :servicingIdentifier</query> -->
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
                <query name="byCustomerAndRoleAndNotInStatuses" select="many">where wfStatus.statusKey not in (:notInStatuses) and id in (select fac.id from com.thirdpillar.codify.loanpath.model.Facility as fac join fac.facilityCustomerRoles as facilityCustomerRole where facilityCustomerRole.partyRole.key in (:roles)  and facilityCustomerRole.customer.id in (:customerIds))</query>
                <query name="byCustomerAndRoleAndInStatuses" select="many">where wfStatus.statusKey in (:inStatuses) and id in (select fac.id from com.thirdpillar.codify.loanpath.model.Facility as fac join fac.facilityCustomerRoles as facilityCustomerRole where facilityCustomerRole.partyRole.key in (:roles)  and facilityCustomerRole.customer.id in (:customerIds))</query>
                <query name="byRenewalApprDtUpdated" select="many">where renewalApprDtUpdated = :renewalApprDtUpdated</query>
            </find-queries>
            <quick-search>where refNumber like :q</quick-search>
        </entity>  
        <entity name="FacilityContract" stereotype="managed" label="Contract">
        	<reference name="boardingAssociate" entity-type="User" relation="refers-to"/>
        	<field name="contractStartDate" type="date-time"/>
        	<field name="renewalApprovalDate" type="date-time" ruleTriggerOnEvent="true"/>
        	<reference name="leadDaysId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BILLING_LEAD_DAYS</param>
                </lookup>
            </reference>
            <reference name="repayType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REPAYMENT_TYPE</param>
                </lookup>
            </reference>
            <reference name="classification" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CLASSIFICATION_TYPE</param>
                </lookup>
            </reference>
            <reference name="recoverycode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RECOVERY_CODE</param>
                </lookup>
            </reference>
             <reference name="advised" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ADVICE_OR_GUIDANCE</param>
                </lookup>
            </reference>
            <reference name="fedclass" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FED_CLASS</param>
                </lookup>
            </reference>
            <reference name="prepaymentOption" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PREPAYMENT_OPTION</param>
                </lookup>
            </reference>
            <field name="subjectToPrepayPen" type="boolean"/>
            <reference name="termoutInformation" entity-type="TermoutInformation" relation="owner" />
            <reference name="sbaInformation" entity-type="SBAInformation" relation="owner" />
            <reference name="amortizationInformation" entity-type="AmortizationInformation" relation="owner" />
            <reference name="billingParameter" entity-type="BillingParameter" relation="owner" />
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="miscellaneous" entity-type="Miscellaneous" relation="owner"/>
        </entity>
        <entity name="KeyPricing" stereotype="managed">
        	<reference name="dayCountConvention" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DAY_COUNT_CONVENTION_TYPE</param>
                </lookup>
            </reference>
            <field name="amortizationTerm" type="integer" />
            <field name="requestedTerm" type="integer" />
            <field name="requestedAmount" type="amount" />
            <field name="totalNoi" type="amount" />
            <field name="loanAmount" type="amount" />
            <field name="interestRate" type="percent" />
            <field name="interestRateDer" type="derived:text" />
            <field name="capRate" type="percent" />
            <field name="loanToValue" type="derived:number" />
            <field name="loanToValueDer" type="derived:text" />
            <field name="dscr" type="derived:number" />
            <field name="dscrDer" type="derived:text" />
            <field name="debtYield" type="derived:number" />
            <field name="debtYieldDer" type="derived:text" />
            <field name="preQualValue" type="derived:amount" />
            <field name="debtService" type="derived:amount" />
            <field name="finalValue" type="amount" />
        </entity>
        <entity name="Miscellaneous" stereotype="managed" label="Miscellaneous Setup">
           <field name="orgNoteRate" type="text"/>
           <field name="loanGrade" type="text"/>
           <field name="ddaReqBalance" type="boolean"/>
           <field name="crossDefault" type="boolean"/>
           <field name="nonRealCollateralPct" type="text"/>
           <field name="realCollateralPct" type="text"/>
           <field name="loanValueRelEstate" type="text"/>
           <field name="reportCurtialments" type="boolean"/>
           <reference name="progressPayment" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PROGRESS_PAYMENT</param>
                </lookup>
            </reference>
            <reference name="advancedFunding" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">ADVANCED_FUNDING</param>
                </lookup>
            </reference>
            <reference name="uzObligation" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REGULATION_U_Z_OBLIGATION</param>
                </lookup>
            </reference>
            <reference name="workQueue" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PARALENDER_WORK_QUEUE</param>
                </lookup>
            </reference>
            <reference name="swap" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SWAP_TYPE</param>
                </lookup>
            </reference>
            <reference name="changeFormula" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LATE_CHARGE_FORMULA</param>
                </lookup>
            </reference>
        </entity>
        
        <entity name="DebtorCustomer" stereotype="managed" label="Debtor-Account">
        	<field name="eligibleARLimit" type="amount" ruleTriggerOnEvent="true" length="18"/>
        	<field name="concLimit" type="amount"/>
        	<field name="retention" type="amount" ruleTriggerOnEvent="true"/>
        	<field name="fundingLimit" type="amount" length="18" internal="true"/>
        	<field name="refNumber" type="auto" tags="Header"/>
        	<field name="creditPeriod" type="number" length="9"/>
        	<field name="advanceRate" type="number" internal="true" />
        	<field name="servicingIdentifier" type="text" internal="true" indexed="true" tags="Header"/>
        	<field name="riskRating" type="text"/>
        	<field name="dbaName" type="text"/>
			<field name="ratingDate" type="date"/>
			<field name="nextReviewDate" type="date"/>
			<field name="borrowingBaseRes" type="amount" length="18"/>
        	<field name="akritivCustomer" type="boolean"/>
        	<!-- <reference name="account" entity-type="Account" relation="owner" ruleTriggerOnEvent="true"/> -->
        	<reference name="ratingDescription" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RISK_RATING_DESC</param>
                </lookup>
			</reference>

        	 <reference name="facilityCustomerRole" entity-type="FacilityCustomerRole" relation="owner"/>
        	<reference name="contact" entity-type="Contact" relation="owner"/>
        	<reference name="facility" entity-type="Facility" relation="refers-to"/>
        	<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
        	<reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true">
                <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_DEBTOR_CUSTOMER</param>
                </lookup>
            </reference>
            <collection name="dbas" collection-type="list" entity-type="PartyDba" referred-by="debtorCustomer" relation="owner" ruleTriggerOnEvent="true" tags="Header"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.WorkflowAware</data>
            </feature>
        	<find-queries>
        		<query name="byRefNumber" select="one">where refNumber = :refNumber</query>
        		<query name="byAkritivCustomer" select="many"> where akritivCustomer = :akritivCustomer and facility is not null</query>
        		<!-- <query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query> -->
                <query name="byFacilityCustomerRoleId" select="one">where facilityCustomerRole.id = :facilityCustomerRoleId</query>
                <query name="byDunsAndFacility" select="many">where facility.refNumber = :facRefNumber and facilityCustomerRole.customer.duns = :duns</query>
            </find-queries>
        </entity>
             
        <entity name="FacilityCustomerRole" stereotype="managed" label="Product Role">
            <field name="externalIdentifier" type="text" length="255" internal="true" indexed="true" />
            <field name="servicingIdentifier" type="text" length="255" internal="true" indexed="true" />
            <reference name="facility" entity-type="Facility" relation="refers-to"/>
            <reference name="partyRole" entity-type="AttributeChoice" relation="refers-to" label="Role" required="false" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">PARTY_ROLE_TYPE</param>
                    <param name="groupMvel"><![CDATA[return 'PRODUCT_ROLE';]]></param>
                </lookup>
            </reference>
            
            <reference name="parentRole" entity-type="FacilityCustomerRole" relation="refers-to">
                <lookup name="mvel">
                    <param name="expr">thiz.facility.facilityCustomerRoles</param>
                </lookup>
                <filters>
                    <filter expr="entity.?customer.isNonIndividual() || entity.?customer.isCounterParty()"/>
                </filters>
                
            </reference>            
            <reference name="customer" entity-type="Customer" relation="refers-to" ruleTriggerOnEvent="true">
               <filters>
                	<filter triggerExpr="thiz.partyRole !=null &amp;&amp; thiz.partyRole.key =='PARTY_ROLE_TYPE_DEBTOR'" expr="entity.isNonIndividual()"/>
                	<filter triggerExpr="thiz.partyRole == null || (thiz.partyRole !=null &amp;&amp; thiz.partyRole.key !='PARTY_ROLE_TYPE_DEBTOR')" expr="entity.isNonIndividual() || !entity.isNonIndividual()"/>
                </filters>
            </reference>
            <field name="pctOwned" type="text"/>
			<reference name="percentGuaranteed" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PERCENT_GUARANTEED</param>
				</lookup>
			</reference>            
            <field name="primaryBorrower" type="boolean"/>
            <field name="primaryContact" type="boolean"/>
            <collection name="relatedRoles" collection-type="derived:list" entity-type="FacilityCustomerRole" relation="refers-to"/>
            <display-format>$o.customer.customerName$ - ($o.partyRole.value$)</display-format>
            <find-queries>
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
                <query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query>
                <query name="byCustomerId" select="one">where customer.id = :customerId</query>
            </find-queries>
        </entity>
        
		<entity name="FacilityRewriteInfo" stereotype="managed">
            <field name="originalLoanAccount" type="text"/>
            <reference name="originalLoanSystem" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LOAN_SYSTEM</param>
                </lookup>
            </reference>
            <reference name="facility" entity-type="Facility" relation="refers-to"/>
        </entity>
        <entity name="Collateral" stereotype="managed">
        	<field name="refNumber" type="auto" />
            <reference name="collateralCategory" entity-type="AttributeChoice" relation="refers-to" label="Collateral Category" >
                 <lookup>
                 	<param name="key">COLLATE_CATEGORY</param>
                 	<param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
                </lookup>
			</reference>
            <reference name="collateralType" entity-type="AttributeChoice" relation="refers-to" label="Collateral Sub-category">
                 <lookup>
                 	<param name="key">COLLATE_CATEGORY</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.collateralCategory != null) { return thiz.collateralCategory.key; } else { return null; }]]></param>
                 </lookup>
            </reference>
            <reference name="collateralPledge" entity-type="AttributeChoice" relation="refers-to" label="Collateral Pledge">
                <lookup>
                    <param name="key">COLLATE_PLEDGE</param>
                </lookup>
            </reference>
            <reference name="locationHeld" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LOCATION_HELD</param>
                </lookup>
            </reference>
            <field name="collateralName" type="text"/>
        	<field name="collateralDescription" type="textarea" label="Description"/>
            <field name="collateralCreatedDttm" type="date-time"/>
            <field name="recordedDttm" type="date-time"/>
            <reference name="collateralProvider" entity-type="AttributeChoice" relation="refers-to" label="Collateral Provider">
                <lookup>
                    <param name="key">COLLATE_PROVIDER</param>
                </lookup>
            </reference>
            <field name="collateralProviderOther" type="text" label="Collateral Provider (Other)"/>
            <field name="effectiveDate" type="date-time"/>
            <field name="lessorSentDttm" type="date-time"/>
            <field name="useExistingCollateral" type="boolean" />
            <field name="noi" type="amount"/>
            <!-- Googlemap URl -->
            <field name="mapUrl" type="derived:url"/>
            <reference name="location" entity-type="Address" relation="owner"/>
			<reference name="realEstateCollateral" entity-type="RealEstateCollateral" relation="owner"/>
			 <reference name="customer" entity-type="Customer" relation="refers-to"/> 
			<reference name="limits" entity-type="ProductLimits" relation="refers-to"/>
			<reference name="assessmentCollateral" entity-type="AssessmentCollateral" relation="owner"/>
			<reference name="marketAnalysis" entity-type="MarketAnalysis" relation="owner"/>
			<reference name="cashFlows" entity-type="CashFlows" relation="owner"/>
			<reference name="cashFlowsDer" entity-type="derived:CashFlows" relation="refers-to"/>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<reference name="oneStopApp" entity-type="OneStopApp" relation="refers-to"/>
			<reference name="forcastedFinancial" entity-type="ForcastedFinancial" relation="owner"/> 
        	<reference name="collateralDers" entity-type="Collateral" relation="refers-to" ruleTriggerOnEvent="true">
        		<lookup name="mvel"> 
        			<param name="expr">thiz.getAllCollateralDer</param> 
        		</lookup>
        	</reference> 
        	<feature operation="implements">
        		<data>com.thirdpillar.foundation.model.Metafied</data>
        	</feature>
			<display-format>$o.collateralName$</display-format>
        </entity>
        <entity name="AssessmentCollateral" stereotype="managed">
        	<reference name="propertyType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSESSMENT_PROPERTY_TYPE</param>
                </lookup>
            </reference>
        	<field name="propertyName" type="text"/>
        	<field name="propertyAddress" type="text"/>
        	<reference name="address" entity-type="Address" relation="owner"/>
        	<field name="msa" type="text"/>
        	<field name="rentRollDate" type="date-time"/>
        	<reference name="propertySubType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PROPERTY_SUB_TYPE</param>
                </lookup>
            </reference>
        	<field name="occupancy" type="percent"/>
        	<field name="unitArea" type="amount" ruleTriggerOnEvent="true"/>
        	<reference name="unitAreaBasis" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">UNIT_AREA_BASIS</param>
                </lookup>
            </reference>
        	<field name="yearBuilt" type="date-time"/>
        	<field name="yearRenovated" type="text"/>
        	<field name="acreage" type="text"/>
        	<field name="noOfParking" type="number"/>
        	<field name="parkingType" type="text"/>
        	<field name="unitAreaBasisDer" type="derived:text"/>
        	<field name="parkingRatio" type="derived:number"/>
        	<field name="propertyZoning" type="text"/>
        	<reference name="isCompliance" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COMPLAINCE_TYPE</param>
                </lookup>
            </reference> 
            <reference name="envReportRequired" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">YES_OR_NO</param>
	                </lookup>
	        </reference>
	        <reference name="appraisalRequired" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">YES_OR_NO</param>
	                </lookup>
	        </reference>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
            <collection name="thrdPtyReqts" collection-type="list" entity-type="ThirdPartyRequest" relation="owner"/>
            <collection name="thrdPtyReqtsDer" collection-type="derived:list" entity-type="ThirdPartyRequest" relation="owner"/>
        </entity>
        <entity name="ThirdPartyRequest" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<reference name="thirdPartyRequestType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">THIRD_PARTY_REQUEST_TYPE</param>
                </lookup>
            </reference>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to">
                <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_COLLATERAL_CRE</param>
                </lookup>
            </reference>
			<reference name="partner" entity-type="Partner" relation="refers-to">
				<filters>
                	<filter expr="entity.isPartnerType(root_collaterals);"/>
                </filters>
			</reference>
			<reference name="user" entity-type="User" relation="refers-to"/>
			<field name="date" type="date-time"/>
			<field name="statusDer" type="derived:text"/>
			<reference name="appraisal" entity-type="Appraisal" relation="owner"/> 
			<reference name="appraisalDer" entity-type="derived:Appraisal" relation ="refers-to"/>
			<reference name="comparable" entity-type="Comparable" relation="owner"/> 
			<reference name="inspection" entity-type="InspectionCRE" relation="owner"/>
			<reference name="insurance" entity-type="InsuranceCRE" relation="owner"/>
			<feature operation="implements">
                <data>com.thirdpillar.foundation.model.WorkflowAware</data>
            </feature>
        </entity>
        <entity name="Appraisal" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to">
                <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_COLLATERAL_CRE</param>
                </lookup>
            </reference>
        	<field name="totalUnit" type="amount" internal="true"/>
        	<reference name="unitAreaBasis" entity-type="AttributeChoice" relation="refers-to" internal="true">
                <lookup>
                    <param name="key">UNIT_AREA_BASIS</param>
                </lookup>
            </reference>
        	<field name="finalAmount" type="number"/>
        	<field name="directCapApproach" type="number"/>
        	<field name="costApproach" type="number"/>
        	<field name="salesApproach" type="number"/>
        	<field name="insurableApproach" type="number"/>
        	<reference name="appraisalType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CRE_APPRAISAL_TYPE</param>
                </lookup>
            </reference>
        	<field name="amountPU" type="derived:number"/>
        	<field name="directCapPU" type="derived:number"/>
        	<field name="costPU" type="derived:number"/>
        	<field name="salesApproachPU" type="derived:number"/>
        	<field name="insurableApproachPU" type="derived:number"/>
        	<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/> 
        </entity>
        <entity name="Comparable" stereotype="managed">
        	<collection name="salesCmpbls" collection-type="list" entity-type="SalesComparable" relation="owner"/>
			<collection name="rentCmpbls" collection-type="list" entity-type="RentComparable" relation="owner"/>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>      
        </entity>
        <entity name="SalesComparable" stereotype="managed">
        	<field name="propertyName" type="text"/>
        	<field name="address" type="text"/>
        	<field name="yearBuilt" type="integer"/>
        	<field name="salesPrice" type="amount"/>
        	<field name="salesPricePerUnit" type="derived:amount"/>
        	<field name="adjustedSalesPrices" type="amount"/>
        	<field name="noOfUnit" type="amount"/>
        	<field name="addressDer" type="derived:text"/>
        	<reference name="sourceType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SOURCE_TYPE_CRE</param>
                </lookup>
            </reference>
            <reference name="location" entity-type="Address" relation="owner"/>
        </entity>
        <entity name="RentComparable" stereotype="managed">
        	<field name="propertyName" type="text"/>
        	<field name="address" type="text"/>
        	<field name="yearBuilt" type="integer"/>
        	<field name="averageRent" type="amount"/>
        	<field name="unitType" type="text"/>
        	<field name="unitSize" type="integer"/>
        	<field name="noOfUnit" type="amount"/>
        	<reference name="sourceType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SOURCE_TYPE_CRE</param>
                </lookup>
            </reference>
            <field name="addressDer" type="derived:text"/>
            <reference name="location" entity-type="Address" relation="owner"/>
        </entity>
        <entity name="InspectionCRE" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<reference name="inspectionType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INSPECTION_TYPE</param>
                </lookup>
            </reference>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to">
                <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_COLLATERAL_CRE</param>
                </lookup>
            </reference>
        	<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
        </entity>
        <entity name="InsuranceCRE" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<reference name="insuranceType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INSURANCE_TYPE</param>
                </lookup>
            </reference>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to">
                <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_COLLATERAL_CRE</param>
                </lookup>
            </reference>
            <field name="insurer" type="text"/>
            <field name="insuredValue" type="amount"/>
        	<field name="validTill" type="date-time"/>
        	<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
        </entity>
        <entity name="MarketAnalysis" stereotype="managed">
        	<field name="msaName" type="text"/>
        	<field name="currentQtrRent" type="text"/>
        	<field name="currentQtrOcc" type="text"/>
        	<field name="unemploymentRate" type="text"/>
        	<field name="householdIncome" type="amount"/>
        	<field name="population" type="number"/>
        	<field name="previousQtrRent" type="text"/>
        	<field name="previousQtrOcc" type="text"/>
        	<field name="periodUnemployment" type="text"/>
        	<collection name="mktEmps" collection-type="list" entity-type="MktEmp" relation="owner"/>
        	<reference name="comparable" entity-type="Comparable" relation="owner"/> 
        	<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
        	<reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
        	<reference name="subMktDetail" entity-type="SubMktDetail" relation="owner"/>
        </entity>
        <entity name="MktEmp" stereotype="managed">
        	<field name="empName" type="text"/>
        	<field name="empNumber" type="number"/>
        </entity>
        <entity name="SubMktDetail" stereotype="managed">
        	<field name="subMarketName" type="text"/>
        	<field name="currentQtrRent" type="text"/>
        	<field name="currentQtrOcc" type="text"/>
        	<field name="population" type="number"/>
        	<field name="householdIncome" type="amount"/>
        	<field name="previousQtrRent" type="text"/>
        	<field name="previousQtrOcc" type="text"/>
        	<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
        </entity>
        <entity name="CashFlows" stereotype="managed">
	        <reference name="rentRoll" entity-type="RentRoll" relation="owner"/>
	        <reference name="financial" entity-type="FinancialCRE" relation="owner"/>
        </entity>
        <entity name="RentRoll" stereotype="managed">
        	<reference name="propertyType" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">PROPERTY_TYPE_CRE</param>
	                </lookup>
	        </reference>
	        <field name="totalRent" type="derived:amount"/>
        	<collection name="multiFamilies" collection-type="list" entity-type="MultiFamily" relation="owner"/>
	        <collection name="nonMtiFmlies" collection-type="list" entity-type="NonMultiFamily" relation="owner"/>
	        <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
        	<reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
        </entity>
        <entity name="MultiFamily" stereotype="managed">
        	<field name="noOfBed" type="number"/>
        	<field name="noOfBath" type="number"/>
        	<field name="unitType" type="text"/>
        	<field name="multiFamilySize" type="text"/>
        	<field name="totalUnits" type="number"/>
        	<field name="avgRent" type="amount"/>
        </entity>
        <entity name="NonMultiFamily" stereotype="managed">
        	<field name="lotNumber" type="text"/>
        	<field name="tenantName" type="text"/>
        	<field name="leaseStartDate" type="date-time"/>
        	<field name="leaseEndDate" type="date-time"/>
        	<field name="nonMultiFamilySize" type="number"/>
        	<field name="rent" type="amount"/>
        	<field name="nextIncrease" type="date-time"/>
        </entity>
        <!-- LPOB-946 Starts -->
        <entity name="FinancialCRE" stereotype="managed">
        	<collection name="incomeExpenses" collection-type="list" entity-type="IncomeExpense" relation="owner" /> 
        	<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
        	<reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
        	<field name="grossIncomeYearOne" type="derived:amount"/>
        	<field name="grossIncomeYearTwo" type="derived:amount"/>
        	<field name="grossIncomeYearThree" type="derived:amount"/>
        	<field name="grossIncomeAppraisal" type="derived:amount"/>
        	<field name="grossIncomeUnderWriting" type="derived:amount"/>
        	<!-- Expesne fields -->
        	<field name="grossExpenseYearOne" type="derived:amount"/>
        	<field name="grossExpenseYearTwo" type="derived:amount"/>
        	<field name="grossExpenseYearThree" type="derived:amount"/>
        	<field name="grossExpenseAppraisal" type="derived:amount"/>
        	<field name="grossExpenseUnderWriting" type="derived:amount"/>
        	<!-- NOI -->
        	<field name="grossNoiYearOne" type="derived:amount"/>
        	<field name="grossNoiYearTwo" type="derived:amount"/>
        	<field name="grossNoiYearThree" type="derived:amount"/>
        	<field name="grossNoiAppraisal" type="derived:amount"/>
        	<field name="grossNoiUnderWriting" type="derived:amount"/>
        	<field name="footerNameRevenue" type="derived:text"/>
        	<field name="footerNameExpense" type="derived:text"/>
        	<reference name="downloadFinancial" entity-type="Document" relation="owner"/>
        	<collection name="financialAssessmentRevenues" collection-type="list" entity-type="FinancialAssessmentRevenue" relation="owner"/>
        	<collection name="finAssttRevDer" collection-type="derived:list" entity-type="FinancialAssessmentRevenue" relation="owner"/>
        	<collection name="financialAssessmentExpenses" collection-type="list" entity-type="FinancialAssessmentExpense" relation="owner" referred-by="financialCRE"/> 
        	<collection name="finAssttExpDer" collection-type="derived:list" entity-type="FinancialAssessmentExpense" relation="owner"/>
        	<collection name="headersNoi" collection-type="derived:list" entity-type="FinancialCRE" relation="owner"/>
        </entity>
        <entity name="FinancialAssessmentRevenue" stereotype="managed">
        	<reference name="revenueLegend" entity-type="AttributeChoice" relation="refers-to" internal="true">
	                <lookup>
	                    <param name="key">REVENUE_LEGEND_TYPE</param>
	                </lookup>
	        </reference>
	        <field name="yearOne" type="derived:amount"/>
	        <field name="yearTwo" type="derived:amount"/>
	        <field name="yearThree" type="derived:amount"/>
	        <field name="yearAppraisal" type="derived:amount"/>
	        <field name="proRataAppraisal" type="derived:amount"/>
	        <field name="proRataYearOne" type="derived:amount"/>
	        <field name="proRataYearTwo" type="derived:amount"/>
	        <field name="proRataYearThree" type="derived:amount"/>
	        <field name="comment" type="text"/>
	        <field name="underWriting" type="amount"/>
	        <!-- Per unit -->
	        <field name="yearOnePu" type="derived:amount"/>
	        <field name="yearTwoPu" type="derived:amount"/>
	        <field name="yearThreePu" type="derived:amount"/>
	        <field name="yearAppraisalPu" type="derived:amount"/>
	         <field name="proRataYearOnePu" type="derived:amount"/>
	        <field name="proRataYearTwoPu" type="derived:amount"/>
	        <field name="proRataYearThreePu" type="derived:amount"/>
	        <field name="proRataAppraisalPu" type="derived:amount"/>
	        <field name="underWritingPu" type="derived:amount"/>
	        <!-- PU End -->
	        <field name="grossIncome" type="derived:amount"/>
	        <reference name="financialCRE" entity-type="FinancialCRE" relation="refers-to"/>
	        <reference name="assessmentCollateral" entity-type="AssessmentCollateral" relation="refers-to"/>
        </entity>
        <entity name="FinancialAssessmentExpense" stereotype="managed">
        	<reference name="expenseLegend" entity-type="AttributeChoice" relation="refers-to" internal="true">
	                <lookup>
	                    <param name="key">EXPENSE_LEGEND_TYPE</param>
	                </lookup>
	        </reference>
	        <field name="yearOne" type="derived:amount"/>
	        <field name="yearTwo" type="derived:amount"/>
	        <field name="yearThree" type="derived:amount"/>
	        <field name="yearAppraisal" type="derived:amount"/>
	        <field name="comment" type="text"/>
	        <field name="underWriting" type="amount"/>
	        <field name="proRataAppraisal" type="derived:amount"/>
	        <field name="proRataYearOne" type="derived:amount"/>
	        <field name="proRataYearTwo" type="derived:amount"/>
	        <field name="proRataYearThree" type="derived:amount"/>
	         <!-- Per unit -->
	        <field name="yearOnePu" type="derived:amount"/>
	        <field name="yearTwoPu" type="derived:amount"/>
	        <field name="yearThreePu" type="derived:amount"/>
	        <field name="yearAppraisalPu" type="derived:amount"/>
	        <field name="underWritingPu" type="derived:amount"/>
	        <field name="proRataYearOnePu" type="derived:amount"/>
	        <field name="proRataYearTwoPu" type="derived:amount"/>
	        <field name="proRataYearThreePu" type="derived:amount"/>
	        <field name="proRataAppraisalPu" type="derived:amount"/>
	        <!-- PU End -->
	        <field name="grossExpense" type="derived:amount"/>
	        <reference name="financialCRE" entity-type="FinancialCRE" relation="refers-to"/>
	        <reference name="assessmentCollateral" entity-type="AssessmentCollateral" relation="refers-to"/>
        </entity>
        <entity name="IncomeExpense" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<reference name="details" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">DETAILS_TYPE</param>
	                </lookup>
	        </reference>
	        <reference name="months" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">MONTHS_CRE</param>
	                </lookup>
	        </reference>
        	<field name="year" type="text"/>
        	<field name="proRata" type="boolean"/>
        	<field name="noi" type="derived:amount"/>
        	<field name="totalExpense" type="derived:amount"/>
        	<field name="totalRevenue" type="derived:amount"/>
        	<field name="detailsDer" type="derived:text"/>
        	<field name="revenueExpenseRatio" type="derived:amount"/>
        	<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
        	<reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
        	<collection name="revenueLines" collection-type="list" entity-type="RevenueLine" relation="owner" referred-by="incomeExpense"/>
        	<collection name="revenueLinesDer" collection-type="derived:list" entity-type="RevenueLine" relation="refers-to" />
        	<collection name="expenseLines" collection-type="list" entity-type="ExpenseLine" relation="owner" referred-by="incomeExpense"/>
        	<collection name="expenseLinesDer" collection-type="derived:list" entity-type="ExpenseLine" relation="refers-to" />
        	<display-format>$o.details.value$</display-format>
        </entity>
        <entity name="RevenueLine" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<reference name="revenueLegend" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">REVENUE_LEGEND_TYPE</param>
	                    <param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
	                </lookup>
	        </reference>
	        <reference name="revenueLegendDescription" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">REVENUE_LEGEND_TYPE</param>
	                    <param name="groupMvel"><![CDATA[if(thiz.revenueLegend != null) { return thiz.revenueLegend.key; } else { return null; }]]></param>
	                </lookup>
	        </reference>
        	<field name="description" type="text"/>
        	<field name="amount" type="amount"/>
        	<field name="amountProRata" type="derived:amount"/>
        	<field name="totalAmount" type="amount"/>
        	<field name="totalAmountProRata" type="derived:amount"/>
        	<field name="pu" type="derived:number"/>
        	<field name="puProRata" type="derived:number"/>
        	<field name="proRated" type="derived:amount"/>
        	<reference name="incomeExpense" entity-type="IncomeExpense" relation="refers-to"/>
       		<reference name="assessmentCollateral" entity-type="AssessmentCollateral" relation="refers-to"/>
        </entity>
        <entity name="ExpenseLine" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<reference name="expenseLegend" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">EXPENSE_LEGEND_TYPE</param>
	                    <param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
	                </lookup>
	        </reference>
	        <reference name="expenseLegendDescription" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">EXPENSE_LEGEND_TYPE</param>
	                    <param name="groupMvel"><![CDATA[if(thiz.expenseLegend != null) { return thiz.expenseLegend.key; } else { return null; }]]></param>
	                </lookup>
	        </reference>
        	<field name="description" type="text"/>
        	<field name="amount" type="amount"/>
        	<field name="amountProRata" type="derived:amount"/>
        	<field name="totalAmount" type="amount"/>
        	<field name="totalAmountProRata" type="derived:amount"/>
        	<field name="pu" type="derived:number"/>
        	<field name="puProRata" type="derived:number"/>
        	<field name="proRated" type="derived:amount"/>
        	<reference name="incomeExpense" entity-type="IncomeExpense" relation="refers-to"/>
        	<reference name="assessmentCollateral" entity-type="AssessmentCollateral" relation="refers-to"/>
        </entity>
        
        <!-- LPOB-946 Ends -->
        <!-- LPOB-1039 -->
        <entity name="ForcastedFinancial" stereotype="managed">
        	<field name="atcptdHldPrd" type="integer"/>
        	<field name="expIncr" type="percent"/>
        	<field name="depAmt" type="amount"/>
        	<field name="incrPropertyTax" type="percent"/>
        	<field name="mgmtFee" type="percent"/>
        	<field name="concession" type="percent"/>
        	<field name="increaseRent" type="percent"/>
        	<field name="annualIncIncr" type="percent"/>
        	<field name="recoveryPeriod" type="number"/>
        	<field name="purchasePrice" type="amount"/>
        	<field name="taxRate" type="percent"/>
        	<field name="estVancanyRate" type="percent"/>
        	<reference name="basisExpenseGwt" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">BASIS_EXPENSE_GROWTH</param>
	                </lookup>
	        </reference>
	        <reference name="baseYear" entity-type="IncomeExpense" relation="refers-to" ruleTriggerOnEvent="true">
	               <lookup name="mvel">
                    	<param name="expr">thiz.getBaseYearList</param>
               	  </lookup> 
	        </reference>
        	<field name="transactionCost" type="amount"/>
        	<field name="badDebt" type="percent"/>
        	<reference name="collateral" entity-type="Collateral" relation="refers-to"/>
        	<collection name="operatingIncomes" collection-type="list" entity-type="OperatingIncome" relation="owner" referred-by="forcastedFinancial" internal="true"/>
        	<collection name="operatingExpenses" collection-type="list" entity-type="OperatingExpense" relation="owner" referred-by="forcastedFinancial" internal="true"/>
        	<!-- Footer Fields for Operating Income -->
        	<field name="footerName" type="derived:text" />
        	<field name="footerTotalAmt" type="derived:amount" />
        	<field name="footerForcast1" type="derived:amount" />
        	<field name="footerForcast2" type="derived:amount" />
        	<field name="footerForcast3" type="derived:amount" />
        	<field name="footerForcast4" type="derived:amount" />
        	<field name="footerForcast5" type="derived:amount" />
        	<field name="footerForcast6" type="derived:amount" />
        	<field name="footerForcast7" type="derived:amount" />
        	<field name="footerForcast8" type="derived:amount" />
        	<!-- <field name="footerForcast9" type="derived:amount" />
        	<field name="footerForcast10" type="derived:amount" />
        	<field name="footerForcast11" type="derived:amount" />
        	<field name="footerForcast12" type="derived:amount" />
        	<field name="footerForcast13" type="derived:amount" />
        	<field name="footerForcast14" type="derived:amount" />
        	<field name="footerForcast15" type="derived:amount" /> -->
        	<!-- Footer Fields for Operating Expense -->
        	<field name="footerExpenseName" type="derived:text" />
        	<field name="footerTotalAmtExpense" type="derived:amount" />
        	<field name="footerExpenseForcast1" type="derived:amount" />
        	<field name="footerExpenseForcast2" type="derived:amount" />
        	<field name="footerExpenseForcast3" type="derived:amount" />
        	<field name="footerExpenseForcast4" type="derived:amount" />
        	<field name="footerExpenseForcast5" type="derived:amount" />
        	<field name="footerExpenseForcast6" type="derived:amount" />
        	<field name="footerExpenseForcast7" type="derived:amount" />
        	<field name="footerExpenseForcast8" type="derived:amount" />
        	<!-- <field name="footerExpenseForcast9" type="derived:amount" />
        	<field name="footerExpenseForcast10" type="derived:amount" />
        	<field name="footerExpenseForcast11" type="derived:amount" />
        	<field name="footerExpenseForcast12" type="derived:amount" />
        	<field name="footerExpenseForcast13" type="derived:amount" />
        	<field name="footerExpenseForcast14" type="derived:amount" />
        	<field name="footerExpenseForcast15" type="derived:amount" /> -->
        	<!-- Ratio Schedules -->
        	<collection name="ratioSchedules" collection-type="list" entity-type="RatioSchedule" relation="owner" referred-by="forcastedFinancial" internal="true"/>
        	<collection name="incomeMultipliers" collection-type="list" entity-type="IncomeMultiplier" relation="owner" referred-by="forcastedFinancial" internal="true"/>
        	<collection name="incMultiMethods" collection-type="list" entity-type="IncMultiMethod" relation="owner" referred-by="forcastedFinancial" internal="true"/>
        	<collection name="financialRatios" collection-type="list" entity-type="FinancialRatio" relation="owner" referred-by="forcastedFinancial" internal="true"/>
        	<collection name="profitMeasures" collection-type="list" entity-type="ProfitMeasure" relation="owner" referred-by="forcastedFinancial" internal="true"/>
        </entity>
        <entity name="IncomeMultiplier" stereotype="managed">
        	<reference name="incomeMultiplier" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">INCOME_MULTIPLIER_TYPE</param>
	                </lookup>
	        </reference>
	        <field name="marketPrice" type="derived:amount" />
	        <field name="grossRent" type="derived:amount" />
	        <field name="multipliers" type="derived:amount" />
	        <reference name="forcastedFinancial" entity-type="ForcastedFinancial" relation="refers-to"/>
	    </entity>
	    <entity name="IncMultiMethod" stereotype="managed">
        	<reference name="incomeMultiMethod" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">INCOME_MULTIPLIER_METHOD_TYPE</param>
	                </lookup>
	        </reference>
	        <field name="marketPrice" type="derived:amount" />
	        <field name="grossRent" type="derived:amount" />
	        <field name="multipliers" type="derived:amount" />
	        <reference name="forcastedFinancial" entity-type="ForcastedFinancial" relation="refers-to"/>
	    </entity>
	    <entity name="FinancialRatio" stereotype="managed">
        	<reference name="financialRatio" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">FINANCIAL_RATIO_TYPE</param>
	                </lookup>
	        </reference>
	         <field name="marketPrice" type="derived:amount" />
	        <field name="grossRent" type="derived:amount" />
	        <field name="multipliers" type="derived:amount" />
	        <reference name="forcastedFinancial" entity-type="ForcastedFinancial" relation="refers-to"/>
	    </entity>
	    <entity name="ProfitMeasure" stereotype="managed">
        	<reference name="profitMeasures" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">PROFIT_MEASURES_TYPE</param>
	                </lookup>
	        </reference>
	        <field name="marketPrice" type="derived:amount" />
	        <field name="grossRent" type="derived:amount" />
	        <field name="multipliers" type="derived:amount" />
	        <reference name="forcastedFinancial" entity-type="ForcastedFinancial" relation="refers-to"/>
	    </entity>
        <entity name="RatioSchedule" stereotype="managed">
        	<reference name="ratioSchedule" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">RATIO_SCHEDULE_TYPE</param>
	                </lookup>
	        </reference>
        	<field name="totalAmount" type="derived:amount"/>
	        <field name="forcast1" type="derived:amount" />
	        <field name="forcast2" type="derived:amount" />
	        <field name="forcast3" type="derived:amount" />
	        <field name="forcast4" type="derived:amount" />
	        <field name="forcast5" type="derived:amount" />
	        <field name="forcast6" type="derived:amount" />
	        <field name="forcast7" type="derived:amount" />
	        <field name="forcast8" type="derived:amount" />
	        <!-- <field name="forcast9" type="derived:amount" />
	        <field name="forcast10" type="derived:amount" />
	        <field name="forcast11" type="derived:amount" />
	        <field name="forcast12" type="derived:amount" />
	        <field name="forcast13" type="derived:amount" />
	        <field name="forcast14" type="derived:amount" />
	        <field name="forcast15" type="derived:amount" /> -->
         <reference name="forcastedFinancial" entity-type="ForcastedFinancial" relation="refers-to"/>
        </entity>
        <entity name="OperatingIncome" stereotype="managed">
        	<reference name="revenueLegend" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">REVENUE_LEGEND_TYPE</param>
	                    <param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
	                </lookup>
	        </reference>
	        <field name="totalAmount" type="amount"/>
	        <field name="forcast1" type="derived:amount" />
	        <field name="forcast2" type="derived:amount" />
	        <field name="forcast3" type="derived:amount" />
	        <field name="forcast4" type="derived:amount" />
	        <field name="forcast5" type="derived:amount" />
	        <field name="forcast6" type="derived:amount" />
	        <field name="forcast7" type="derived:amount" />
	        <field name="forcast8" type="derived:amount" />
	        <!-- <field name="forcast9" type="derived:amount" />
	        <field name="forcast10" type="derived:amount" />
	        <field name="forcast11" type="derived:amount" />
	        <field name="forcast12" type="derived:amount" />
	        <field name="forcast13" type="derived:amount" />
	        <field name="forcast14" type="derived:amount" />
	        <field name="forcast15" type="derived:amount" /> -->
	        <reference name="forcastedFinancial" entity-type="ForcastedFinancial" relation="refers-to"/>
        </entity>
        <entity name="OperatingExpense" stereotype="managed">
        	<reference name="expenseLegend" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">EXPENSE_LEGEND_TYPE</param>
	                    <param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
	                </lookup>
	        </reference>
	        <field name="totalAmount" type="amount"/>
	        <field name="totalAmountDer" type="derived:amount"/>
	        <field name="forcast1" type="derived:amount" />
	        <field name="forcast2" type="derived:amount" />
	        <field name="forcast3" type="derived:amount" />
	        <field name="forcast4" type="derived:amount" />
	        <field name="forcast5" type="derived:amount" />
	        <field name="forcast6" type="derived:amount" />
	        <field name="forcast7" type="derived:amount" />
	        <field name="forcast8" type="derived:amount" />
	        <!-- <field name="forcast9" type="derived:amount" />
	        <field name="forcast10" type="derived:amount" />
	        <field name="forcast11" type="derived:amount" />
	        <field name="forcast12" type="derived:amount" />
	        <field name="forcast13" type="derived:amount" />
	        <field name="forcast14" type="derived:amount" />
	        <field name="forcast15" type="derived:amount" /> -->
	        <reference name="forcastedFinancial" entity-type="ForcastedFinancial" relation="refers-to"/>
        </entity>
        <!-- LPOB-1039 Ends -->
        <entity name="RealEstateCollateral" stereotype="managed">
        	<field name="appraisalAmount" type="amount" />
        	<field name="originalAppraisalAmount" type="amount" />
        	<field name="appraisalMethod" type="text" />
        	<field name="loanToValue" type="number" />
        	<field name="appraisalDateOrdered" type="date-time" />
        	<field name="appraisalDateReceived" type="date-time" />
        	<field name="floodCertNumber" type="text" label="Flood Certification Number"/>
        	<field name="floodSeq1" type="text" />
        	<field name="floodSeq2" type="text" />
        	<field name="floodCertVendorName" type="text"  label="Vendor Name"/>
        	<field name="floodCertDateOrdered" type="date-time" label="Flood Certification Date Ordered"/>
        	<field name="floodCertDateReceived" type="date-time" label="Flood Certification Date Received"/>
	        <field name="envAssessDateOrdered" type="date-time" label="Environmental Assessment Date Ordered"/>
	        <field name="envAssessDateReceived" type="date-time" label="Environmental Assessment Date Received" />
	        <reference name="appraisalType" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">APPRAISAL_TYPE</param>
	                </lookup>
	        </reference>
	        <reference name="envAssessType" entity-type="AttributeChoice" relation="refers-to" label="Environmental Assessment Type">
	                <lookup>
	                    <param name="key">ENV_ASSESSMENT_TYPE</param>
	                </lookup>
	        </reference>
	        <reference name="envAssessment" entity-type="AttributeChoice" relation="refers-to" label="Environmental Assessment Pass/Fail">
	                <lookup>
	                    <param name="key">ENV_ASSESSMENT</param>
	                </lookup>
	        </reference>       
	        <field name="propertyDescription" type="text" />
	        <reference name="firstMortgageLien" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">YES_OR_NO</param>
	                </lookup>
	        </reference>
	        <reference name="lienPosition" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LIEN_POSITION</param>
                </lookup>
            </reference>
	        <reference name="prepaymentPenalty" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">YES_OR_NO</param>
	                </lookup>
	        </reference>
	        <reference name="highRiskPropertyType" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">YES_OR_NO</param>
	                </lookup>
	        </reference>	        	        	        
	        <field name="otherPropertyDetails" type="textarea" />
	        <field name="censusTract" type="text" />
	        <reference name="propertyType" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">PROPERTY_TYPE</param>
	                </lookup>
	        </reference>	
	        <reference name="floodZone" entity-type="AttributeChoice" relation="refers-to">
	                <lookup>
	                    <param name="key">YES_OR_NO</param>
	                </lookup>
	        </reference>		        	        
	        <field name="pctOwnerOccupied" type="percent" />
	        <field name="occupancy" type="text" />
	        <field name="dateConstructed" type="date-time" />
	        <field name="salesPrice" type="amount" />
	        <field name="stories" type="number" />
	        <field name="numberOfUnits" type="number" />
	        <field name="numberOfUnitsCSF" type="number" />
	        <field name="officeUnits" type="number" />
	        <field name="otherUnits" type="number" />
	        <field name="residentUnits" type="number"/>
	        <field name="residentNumbers" type="number" label="Resident Rooms"/>
	        <field name="residentSqFt" type="number" label="Resident Square Feet"/>
	        <field name="officeSqFt" type="number" label="Office Square Feet"/>
	        <field name="retailSqFt" type="number" label="Reatil Square Feet"/>
	        <field name="commercialSqFt" type="number" label="Commerical Square Feet"/>
	        <field name="rentalSqFt" type="number" label="Building Rentable Square Feet"/>
	        <field name="lotSizeSqFt" type="number" label="Lot Size"/>
	        <field name="totalSqFt" type="number" label="Total Building Square Feet"/>
	        <field name="phoneNo" type="phone"/>
	        <field name="yearLastRenovated" type="text"/>
	        <field name="buildingCondition" type="text"/>
	        <field name="parcelNo" type="integer"/>
	        <field name="isOnsiteParking" type="boolean"/>
	        <field name="historicalUse" type="text"/>
	        <field name="isAConvertedHome" type="boolean"/>
	        <field name="recentAppraisalDate" type="date-time"/>
	        <field name="annualPropertyTaxes" type="amount"/>
	        <field name="monthlyAssociationDues" type="amount"/>	
	        <collection name="tenants" collection-type="list" entity-type="TenantProfile" relation="owner"/> 
	        <reference name="newConstructionProject" entity-type="NewConstructionProject" relation="owner"/>
	        <collection name="projDetails" collection-type="list" entity-type="NewConstructionProject" relation="owner"/>       
        </entity>        
        <entity name="FacilityPracticeInformation" stereotype="managed">
			<field name="sellerOwnedPcts" type="number" label="Years Owned by Seller"/>
            <reference name="sellerOwnedMulPcts" entity-type="AttributeChoice" relation="refers-to" label="Seller Owns Multiple Practices?">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="transitionPrdWithSeller" type="number" label="Transition period with seller"/>
            <reference name="transitionPrdCont" entity-type="AttributeChoice" relation="refers-to" label="Is Transition Period Contractual?">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="transitionCompSeller" type="text" label="Seller Compensation During Transition"/>
            <reference name="sellerLicClear" entity-type="AttributeChoice" relation="refers-to" label="Seller's License Clear?">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>        
			<reference name="borrowerOwnedPractice" entity-type="AttributeChoice" relation="refers-to" label="Buyer an Owner/ Associate in Practice?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<field name="howLngborrowrAssociating" type="number" label="If Owner/Associate, How long? (Months)"/>
			
			<reference name="staffRelSeller" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="staffAwareSale" entity-type="AttributeChoice" relation="refers-to" label="Is Staff Aware of Sale?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="staffPlanStay" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<field name="reasonForSale" type="text"/>
			<field name="sellerOwnsBuilding" type="boolean"/>
			<field name="arIncluded" type="boolean"/>            

			<reference name="borrowerAssociatePar" entity-type="AttributeChoice" relation="refers-to" label="Will Borrower Still Associate Part-Time?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<field name="distancePractice" type="number" label="If Associating, Distance from Practice?"/>
			<reference name="continueToAssociate" entity-type="AttributeChoice" relation="refers-to" label="Continue to Associate?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="borrowerNonCompete" entity-type="AttributeChoice" relation="refers-to" label="Borrower Has Non-Compete?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<field name="descOfAssociateInfo" type="text" label="Description of Associate Information"/>
            <field name="practiceContractRest" type="text" label="Non-Compete Restrictions"/>
            <field name="cityPopulation" type="number" label="City Population"/>
            <field name="noOfVeterinarians" type="number" label="# of Veterinarians (within City Population)"/>
            <field name="vetsPopulationRatio" type="derived:amount" label="Population/Vets Ratio"/>
            <field name="avgHouseIncome" type="amount" label="Average Household Income"/>        
        </entity>
        <!-- Funding -->
        <entity name="Funding" stereotype="managed">
			<field name="fundDate" type="date-time"/>
			<field name="authReceivedFlag" type="boolean"/>
			<field name="routingNumber" type="text"/>
			<field name="accountName" type="text"/>
			<field name="fundedAmount" type="amount"/>
			<field name="funder" type="text"/>
			<field name="wiringInstructions" type="textarea"/>
			<field name="bankAccountNumber" type="text"/>
			<field name="prenoteSubmittedDttm" type="date-time" label="Prenote Submitted Date / Time"/>
			<reference name="fundingType" entity-type="AttributeChoice" relation="refers-to" required="true">
				<lookup>
					<param name="key">FUNDING_TYPE</param>
				</lookup>
			</reference>
			<reference name="accountType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">BANK_ACCOUNT_TYPE</param>
				</lookup>
			</reference>
			<reference name="fundingMethod" entity-type="AttributeChoice" relation="refers-to" required="true">
				<lookup>
					<param name="key">FUNDING_METHOD</param>
				</lookup>
			</reference>
			<reference name="deliveryMethod" entity-type="AttributeChoice" relation="refers-to" required="true">
				<lookup>
					<param name="key">FUNDING_DELIVERY_METHOD</param>
				</lookup>
			</reference>
			<reference name="banksTrade" entity-type="BanksTrade" relation="refers-to"/>
			<reference name="prenoteSubmittedBy" entity-type="User" relation="refers-to"/>
			<field name="obligationNumber" type="text" label="Obligation Number"/>
			<field name="obligationNumberDer" type="derived:text" label="Obligation Number"/>
			<reference name="boardingAssociate" entity-type="User" relation="refers-to"/>
        </entity>   
        <!-- PricingOption/Structure -->
        <entity name="PricingOption" stereotype="business-entity" label="Pricing Option">
            <field name="refNumber" type="auto"/>
            <field name="mixPct" type="percent" internal="true"/>
            <field name="subsidyRate" type="percent"/>
            <field name="annualSpendAmt" type="amount"/>
            <field name="creditLevel" type="text"/>
            <field name="acceptedDate" type="date-time"/>
            <field name="programCode" type="text"/>
            <field name="upliftCOFPct" type="percent"/>
            <field name="extensionRateFactorRatio" type="derived:number"/>
            <field name="renewalCap" type="number"/>
            <field name="reducedMTMRenewal" type="number"/>
            <field name="ROEAfterTaxPct" type="derived:number"/>
            <field name="CPISyndicatedPct" type="derived:number"/>
            <field name="CPIBrickedPct" type="derived:number"/>
            <field name="calculatedStreamPct" type="amount" internal="true"/>
            <field name="averageLife" type="amount" internal="true"/>
            <field name="fasbRate" type="percent"/>
            <field name="pvPaymentAmtWithRenewals" type="amount" internal="true"/>
            <field name="pvPaymentAmt" type="amount" internal="true"/>
            <field name="pvResidualPct" type="amount" internal="true"/>
            <field name="pvRentAtCOF" type="amount" internal="true"/>
            <field name="totalAmt" type="derived:amount"/>
            <field name="totalPaymentAmt" type="derived:amount"/>
            <field name="impliedYieldPct" type="amount" internal="true"/>
            <field name="impliedYieldPreTaxPct" type="amount" internal="true"/>
            <field name="ROEPreTaxPct" type="derived:percent"/>
            <field name="ROAPreTaxPct" type="derived:percent"/>
            <field name="grossRevenuePct" type="derived:percent"/>
            <field name="gainPct" type="derived:percent"/>
            <field name="interimRentPct" type="derived:percent"/>
            <field name="totalExpensesPct" type="derived:percent"/>
            <field name="badDebtReservePct" type="percent"/>
            <field name="servicingOpexPct" type="percent"/>
            <field name="opexPct" type="percent"/>
            <field name="otherCORPct" type="percent"/>
            <field name="rviPct" type="percent"/>
            <field name="originationFeePct" type="percent"/>
            <field name="fundingFeePct" type="percent"/>
            <field name="partnerFeePct" type="percent"/>
            <field name="syndicationOffsetPct" type="derived:number"/>
            <field name="durationTBillPct" type="percent"/>
            <field name="liborPct" type="percent"/>
            <field name="swapRatePct" type="percent"/>
            <field name="approvalDate" type="date-time"/>	
            <field name="bufferPct" type="percent"/>
            <field name="baseRateFactor" type="number"/>
            <field name="baseTBillPct" type="percent"/>
            <field name="indexDate" type="date-time"/>
            <field name="adjustedCommencementDays" type="integer"/>
            <field name="annualizedCostPct" type="derived:percent"/>
            <field name="brickPct" type="percent"/>
            <field name="shippingCost" type="derived:amount"/>
            <field name="commencementDate" type="date-time" internal="true"/>
			<field name="totalEquipmentCost" type="derived:amount" internal="true"/>
			<field name="totalResidualAmount" type="derived:amount" internal="true"/>
			<field name="aggregatedResidualRate" type="derived:amount" internal="true"/>
			<field name="aggregatedResidualAmt" type="amount" internal="true"/>
			<field name="leaseTerm" type="integer" internal="true"/>
			<field name="aprRate" type="amount" internal="true"/>
			<field name="externalRefId" type="text"/>
            <reference name="financeShippingCost" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
            <reference name="indexed" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
            
            
            <reference name="manualValuationDecision" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">MANUAL_VAL_DECISION</param>
                </lookup>
            </reference>
            <reference name="pricingOptionStatus" entity-type="AttributeChoice" relation="refers-to" internal="true">
                <lookup>
                    <param name="key">PRICING_OPTION_STATUS</param>
                </lookup>
            </reference>
            <reference name="consolidationType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PAYMENT_FREQUENCY</param>
				</lookup>
				<filters>
					<filter expr="entity.key.equals('PAYMENT_FREQUENCY_MONTHLY') || entity.key.equals('PAYMENT_FREQUENCY_QUARTERLY')"/>
				</filters>				
			</reference>
			<reference name="quoteAsset" entity-type="derived:Asset" relation="owner"/>
            <reference name="solveFor" entity-type="SolveFor" relation="owner"/> 
            <reference name="mla" entity-type="CreditMasterAggRequest" relation="refers-to"/>
            <reference name="extOption" entity-type="QuoteExtOption" relation="owner"/> 
            <reference name="interimRent" entity-type="InterimRent" relation="owner"/>
            <reference name="insurance" entity-type="Insurance" relation="owner"/>
            <reference name="propertyTax" entity-type="PropertyTax" relation="owner"/>
            <reference name="dataWipeService" entity-type="DataWipeService" relation="owner"/>
            <reference name="eolLogistics" entity-type="EolLogistic" relation="owner"/> 
            <reference name="approvedBy" entity-type="User" relation="refers-to"/>         
            <reference name="structure" entity-type="Structure" relation="owner"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>	
            <reference name="leaseExtension" entity-type="LeaseExtension" relation="owner"/>
            <reference name="partner" entity-type="Partner" relation="refers-to"/>
            <collection name="assets" collection-type="list" entity-type="Asset" referred-by="pricingOption" relation="owner"/>
        	<reference name="facility" entity-type="Facility" relation="refers-to"/>
        	<collection name="advanceMonies" collection-type="list" entity-type="AdvanceMoney" relation="owner"/>
        	<feature operation="implements">
				<data>com.thirdpillar.foundation.model.Metafied</data>
			</feature>
			<find-queries>
                <query name="byExternalRefId" select="one">where externalRefId = :externalRefId</query>
            </find-queries>
        </entity>
        
        <entity name="DataWipeService" stereotype="managed">
			<field name="pricePerAsset" type="amount"/>
			<field name="disclose" type="boolean"/>
			<field name="finance" type="boolean"/>
			<reference name="assetType" entity-type="AttributeChoice" relation="refers-to" label="Asset Type">
				<lookup>
					<param name="key">ASSET_TYPE</param>
				</lookup>
			</reference>
			<reference name="customer" entity-type="Customer" relation="refers-to"/>
		</entity>
		<entity name="EolLogistic" stereotype="managed">
			<field name="pricePerAsset" type="amount"/>
			<field name="disclose" type="boolean"/>
			<field name="finance" type="boolean"/>
			<field name="maxResidualRate" type="number"/>
			<reference name="assetType" entity-type="AttributeChoice" relation="refers-to" label="Asset Type">
				<lookup>
					<param name="key">ASSET_TYPE</param>
				</lookup>
			</reference>
			<reference name="customer" entity-type="Customer" relation="refers-to"/>
		</entity>
		<entity name="LeaseExtension" stereotype="managed">
			<field name="extensionTerm" type="integer"/>
			<field name="extensionResidualPct" type="percent"/>
			<field name="extensionRateFactor" type="number"/>
			<field name="extensionStartDate" type="date-time"/>
			<reference name="extensionType" entity-type="AttributeChoice" relation="refers-to" label="Buy-out Option">
				<lookup>
					<param name="key">PURCHASE_OPTION</param>
				</lookup>
				<filters>
					<filter expr="entity.key.equals('PURCHASE_OPTION_FAIR_MARKET_VALUE') || entity.key.equals('PURCHASE_OPTION_DOLLAR_ONE_OUT') || entity.key.equals('PURCHASE_OPTION_10_PUT') || entity.key.equals('PURCHASE_OPTION_10_OPTION') || entity.key.equals('PURCHASE_OPTION_NONE')"/>
				</filters>
			</reference>
		</entity>
        <!-- This is to store external pricing option details (dfs get quote). 
			once we have the capability to use xml to render the ui, we can remove this -->
		<entity name="QuoteExtOption" stereotype="managed">
			<field name="optionNumber" type="integer" internal="true"/>
			<field name="customerName" type="text" internal="true"/>
			<field name="customerAccountId" type="integer" internal="true"/>
			<field name="companyNumber" type="text" internal="true"/>
			<field name="firstName" type="text" internal="true"/>
			<field name="middleInitial" type="text" internal="true"/>
			<field name="lastName" type="text" internal="true"/>
			<field name="address1" type="text" internal="true"/>
			<field name="address2" type="text" internal="true"/>
			<field name="city" type="text" internal="true"/>
			<field name="state" type="text" internal="true"/>
			<field name="postalCode" type="integer" internal="true"/>
			<field name="areaCode" type="integer" internal="true"/>
			<field name="phoneNumber" type="integer" internal="true"/>
			<field name="extension" type="integer" internal="true"/>
			<field name="assetType" type="text" internal="true"/>
			<field name="subTotalAmt" type="amount" internal="true"/>
			<field name="netRevenueAmt" type="amount" internal="true"/>
			<field name="marginAmt" type="amount" internal="true"/>
			<field name="marginPct" type="percent" internal="true"/>
			<field name="salesRepName" type="text" internal="true"/>
			<field name="creationDate" type="date-time" internal="true"/>
			<field name="comments" type="text" internal="true"/>
			<field name="skuCount" type="integer" internal="true"/>
			<field name="poetNumber" type="text" internal="true"/>
			<collection name="assetDetails" collection-type="list" entity-type="QuoteExtOptionDetails" referred-by="extrPricingOption" relation="owner"/>
		</entity>
		<entity name="QuoteExtOptionDetails" stereotype="managed">
			<field name="quantity" type="integer" internal="true"/>
			<field name="skuNumber" type="text" internal="true"/>
			<field name="orderGroup" type="text" internal="true"/>
			<field name="tieNumber" type="text" internal="true"/>
			<field name="description" type="text" internal="true"/>
			<field name="comments" type="text" internal="true"/>
			<field name="contractorLaborCode" type="text" internal="true"/>
			<field name="contractorTypeId" type="text" internal="true"/>
			<field name="skuSystemFlag" type="text" internal="true"/>
			<field name="itemClass" type="text" internal="true"/>
			<field name="itemAttribute" type="text" internal="true"/>
			<field name="itemRollupFlag" type="boolean" internal="true"/>
			<field name="taxRuleCode" type="text" internal="true"/>
			<field name="unspsc" type="text" internal="true"/>
			<field name="unitPrice" type="amount" internal="true"/>
			<field name="taxable" type="boolean" internal="true"/>
			<field name="listPrice" type="amount" internal="true"/>
			<reference name="extOption" entity-type="QuoteExtOption" relation="refers-to"/>
		</entity>        
        <entity name="Structure" stereotype="managed">
            <reference name="rateType" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">RATE_TYPE</param>
                </lookup>
            </reference>
            <reference name="pricingIndex" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">PRICING_INDICES</param>
                </lookup>
            </reference>            
            <reference name="basis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FACILITY_TYPE_BASIS</param>
                </lookup>
            </reference>
            <reference name="facilityType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
             <reference name="financialProductType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FINANCIAL_PRODUCT_TYPE</param>
                    <param name="groupMvel"><![CDATA[if(thiz.facilityType != null) { return thiz.facilityType.key; } else { return null; }]]></param>
                </lookup>
            </reference>
            <field name="cofDttm" type="date-time" />
            <reference name="cofType" entity-type="AttributeChoice" relation="refers-to" internal="true">
                <lookup>
                    <param name="key">COF_TYPE</param>
                </lookup>
            </reference>
            <field name="commencementDttm" type="date-time" label="Commencement Date"/>
            <field name="cof" type="percent" ruleTriggerOnEvent="true"/>
            <field name="calculatedRateFactor" type="amount" internal="true"/>
            <field name="associatedCostRateFactor" type="number"/>
            <field name="requestedCOF" type="amount"/>
            <field name="calculatedCOF" type="amount" internal="true"/>
            <field name="calculatedfmvCapYield" type="amount" internal="true"/>
            <field name="cofDate" type="date-time"/>
            <field name="selected" type="boolean" required="false"/>
            <field name="indexValue" type="percent" ruleTriggerOnEvent="true"/>
            <field name="actualRateFactor" type="amount" internal="true"/>
            <field name="margin" type="percent" ruleTriggerOnEvent="true"/>
            <field name="customerRate" type="amount" ruleTriggerOnEvent="true"/>
            <field name="advancePayment" type="amount"/>
            <field name="earlyPurchaseOptionYield" type="amount"/>
            <field name="requestedRateFactor" type="amount"/>
            <field name="actualBasePayment" type="amount" internal="true"/>
            <field name="fmvCapPct" type="percent"/>
            <field name="term" type="integer" />            
            <field name="renewalFee" type="amount"/>
            <reference name="termUnit" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">TERM_UNIT</param>
                </lookup>
            </reference>
            <field name="amortizationTerm" type="integer" />
            <reference name="amortizationUnit" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">TERM_UNIT</param>
                </lookup>
            </reference>
            <reference name="advancedOrArrears" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ADVANCE_OR_ARREARS</param>
                </lookup>
            </reference>
            <field name="paymentStartDate" type="date-time" ruleTriggerOnEvent="true"/>
            <field name="contractStartDate" type="date-time"/>
            <reference name="prepaymentOption" entity-type="AttributeChoice" relation="refers-to" internal="true" >
                <lookup>
                    <param name="key">PREPAYMENT_OPTION</param>
                </lookup>
            </reference>
            <reference name="currency" entity-type="Currency" relation="refers-to"/>
            <reference name="language" entity-type="Language" relation="refers-to"/>
            
            <field name="assetLevel" type="boolean" required="false"/>
            <field name="financedAmount" type="amount" internal="true"/>
            <field name="documentAmount" type="amount"/> <!--  ?? Sames as financed Amount ?? -->
            <field name="amortization" type="integer" />
            <field name="expiryDttm" type="date-time"/>
            <field name="amortizationDate" type="date-time" />
            <field name="calculatedYield" type="amount" internal="true"/>
            <field name="maturityDate" type="date-time" />
            <field name="drawingPeriod" type="integer" />
            <reference name="purchaseOption" entity-type="AttributeChoice" relation="refers-to">
            	<lookup>
            		<param name="key">PURCHASE_OPTION</param>
            	</lookup>
            	<filters>
            		<filter expr="entity.key.equals('PURCHASE_OPTION_FAIR_MARKET_VALUE') || entity.key.equals('PURCHASE_OPTION_DOLLAR_ONE_OUT') || entity.key.equals('PURCHASE_OPTION_10_PUT') || entity.key.equals('PURCHASE_OPTION_10_OPTION')"/>
            		<filter triggerExpr="isdef root " expr="if(root.program !=null){root.program.isKeyInProgramPurchaseOption(entity.key)}else{return true;}"/>
            	</filters>
            </reference>
            <collection name="purchaseOptionMulSel" collection-type="list" entity-type="AttributeChoice" relation="refers-to" label="Buy-out Option">
				<lookup>
					<param name="key">PURCHASE_OPTION</param>
				</lookup>
				<filters>
					<filter expr="entity.key.equals('PURCHASE_OPTION_FAIR_MARKET_VALUE') || entity.key.equals('PURCHASE_OPTION_DOLLAR_ONE_OUT') || entity.key.equals('PURCHASE_OPTION_10_PUT') || entity.key.equals('PURCHASE_OPTION_10_OPTION')"/>
				</filters>
			</collection>
            <reference name="fundingSource" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FUNDING_SOURCE</param>
				</lookup>
			</reference>
            <collection name="drawdownCurrency" collection-type="list" entity-type="Currency" relation="refers-to"/>
            <reference name="fppoAmountOrPercent" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <field name="fppoFixedAmt" type="amount" label="FPPO Fixed Amount"/>
            <field name="fppoPercentage" type="percent" label="FPPO Percent"/>
            <field name="actualFppoAmt" type="amount"/>
            <field name="fixedPurchaseAsPercentage" type="percent"/>
            <field name="fixedPurchaseAsAmount" type="amount"/>
            <field name="putPercentage" type="percent"/>
            <field name="bookingProbabilityPercent" type="percent"/>
            <field name="earlyPurchaseOptionDate" type="date-time"/>
            <field name="earlyPurchaseOptionAmount" type="amount"/>
            <reference name="marketingOption" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">MARKETING_OPTION</param>
                </lookup>
            </reference>
            <field name="amortizationTermInMonths" type="derived:integer"/>
			<field name="termInMonths" type="derived:integer"/>
			<field name="paymentFrequencyInMonths" type="derived:integer"/>
			<field name="contractStartDttm" type="date-time"/>
			<field name="requestedRate" type="number"/> 
			<field name="calculatedRate" type="number" internal="true"/> 
			<field name="requestedIndex" type="number"/>
			<field name="calculatedIndex" type="number"/>
			<field name="requestedFloatSpread" type="number"/>
			<field name="calculatedFloatSpread" type="number"/>
			<field name="actualRate" type="number" internal="true"/>
			<field name="actualIndex" type="number"/>
			<field name="actualFloatSpread" type="number"/>
			<field name="totalFee" type="derived:amount"/>
			<!-- CRE -->
			<field name="cashEquity" type="amount" length="18"/>
			<field name="cashOut" type="text" length="18"/>
			<field name="crossCollateralized" type="text"/>
			<field name="cashManagement" type="text"/>
			<reference name="syndication" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SYNDICATION_OPTON</param>
                </lookup>
            </reference>
			<field name="leadBank" type="text"/>
			<field name="participation" type="text"/>
			<field name="maxLTV" type="text"/>
			<field name="minDSCR" type="text"/>
			<field name="lienPosition" type="text"/>
			<field name="prepaymentPenalty" type="text"/>
			<field name="spread" type="text"/>
			<field name="ceilingRate" type="amount"/>
			<field name="floorRate" type="amount"/>
			<field name="interestRate" type="amount" ruleTriggerOnEvent="true"/>
			<field name="capRate" type="amount"/>
			<field name="discountRate" type="amount"/>
			<field name="originationFee" type="amount"/>
			<field name="minUtilizationRate" type="number"></field>
			<field name="reserveReq" type="amount" length="18"></field>
			<field name="reserveUtilization" type="amount" length="18" ruleTriggerOnEvent="true"></field>
			<field name="borrowingBaseRes" type="amount" length="18"/>
			<field name="timeframeForFunding" type="date"/>
			<collection name="escrows" collection-type="list" entity-type="Escrow" relation="owner"/>
			<collection name="sources" collection-type="list" entity-type="SourceCRE" relation="owner"/>
			<collection name="usesStatements" collection-type="list" entity-type="UsesStatementCRE" relation="owner"/>
			<!-- CRE Ends -->
            <reference name="paymentSchedule" entity-type="PaymentSchedule" relation="owner"/>
            <reference name="leaseExtension" entity-type="LeaseExtension" relation="owner"/>            
            <collection name="costReductions" collection-type="list" entity-type="CostReduction" referred-by="structure" relation="owner"/>
            <collection name="advanceMonies" collection-type="list" entity-type="AdvanceMoney" relation="owner"/>
            <collection name="costs" collection-type="list" entity-type="Cost" referred-by="structure" relation="owner"/>
            <collection name="fees" collection-type="list" entity-type="Fee" referred-by="structure" relation="owner"/>
            <collection name="tradeInAssets" collection-type="list" entity-type="TradeInAsset" referred-by="structure" relation="owner"/>
            <collection name="residualGuarantors" collection-type="list" entity-type="ResidualGuarantor" referred-by="structure" relation="owner"/>
            <collection name="amortizationSchedules" collection-type="list" entity-type="AmortizationSchedule" referred-by="structure" relation="owner" internal="true"/>
            <collection name="paymentSummarySchedules" collection-type="list" entity-type="PaymentSummarySchedule" referred-by="structure" relation="owner"/>
            <collection name="stipulateLossReport" collection-type="list" entity-type="StipulatedLossReport" referred-by="structure" relation="owner"/>
        </entity> 
        <entity name="Escrow" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<field name="accountName" type="text"/>
        	<field name="monthly" type="text"/>
        	<field name="totalAmount" type="amount"/>
        	<field name="springing" type="text"/>
        </entity>
        <entity  name="SourceCRE" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<field name="sources" type="text"/>
        	<field name="amount" type="amount"/>
        </entity>
        <entity  name="UsesStatementCRE" stereotype="managed">
        	<field name="refNumber" type="auto"/>
        	<field name="uses" type="text"/>
        	<field name="amount" type="amount"/>
        </entity>     
        <entity name="CostReduction" stereotype="managed">
            <reference name="rateOrAmount" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RATE_OR_AMOUNT</param>
                </lookup>
            </reference>        
            <field name="internalCostReductionRefId" type="long" length="36"/>
            <field name="adhoc" type="boolean" required="false"/>
            <reference name="whoOwns" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">WHO_OWNS_COST_REDUCTION</param>
                </lookup>
            </reference>
            <field name="costReductionRefId" type="text"/>
            <field name="numIndex" type="integer"/>
            <field name="actualCrAmount" type="amount"/>
            <field name="amount" type="amount"/>
            <field name="lowRate" type="percent"/>
            <field name="percent" type="percent"/>
            <field name="waiverOfInterest" type="integer"/>
            <field name="waiverOfInterestEndDate" type="date-time"/>
            <field name="waiverOfPayments" type="integer"/>
            <field name="waiverOfPaymentsEndDate" type="date-time"/>
            <field name="subsidyAmtWithoutIntWaiver" type="amount"/>
            <field name="subsidyLimitReached" type="boolean" required="false"/>
            <field name="externalIdentifier" type="text"/>
            <reference name="structure" entity-type="Structure" relation="refers-to"/>
            <field name="rateAdjustment" type="number"/>
        </entity>        
        <entity name="AdvanceMoney" stereotype="managed">
            <reference name="advanceMoneyType" entity-type="AttributeChoice" relation="refers-to" required="false" label="Advance Money Type">
                <lookup>
                    <param name="key">ADVANCE_PAYMENT_TYPE</param>
                </lookup>
            </reference>
            <reference name="paymentType" entity-type="AttributeChoice" relation="refers-to" required="false" label="Payment Type">
                <lookup>
                    <param name="key">PAYMENT_TYPE</param>
                </lookup>
            </reference>
            <field name="calculatedAdvancePmtAmt" type="amount" />
            <reference name="numAdvancePmt" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ADVANCE_PAYMENT_TYPE</param>
                </lookup>
            </reference>
            <field name="minAcceptablePercent" type="percent" label="Minimum Percent Acceptable"/>
            <field name="advancePmtPct" type="percent" label="Percentage"/>
            <field name="advancePmtAmt" type="amount" label="Amount"/>
            <field name="taxable" type="boolean"/>
            <reference name="levelType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_LEVEL_TYPE</param>
                </lookup>
            </reference>
            <reference name="basisPct" entity-type="AttributeChoice" relation="refers-to" label="Basis">
                <lookup>
                    <param name="key">PERCENT_BASIS</param>
                </lookup>
            </reference>
            <field name="numIndex" type="integer"/>
            <collection name="advanceMoneyReceipts" collection-type="list" entity-type="AdvanceMoneyReceipt" referred-by="advanceMoney" relation="owner"/>
            <reference name="numFirstPayments" entity-type="AttributeChoice" relation="refers-to" label="Number Of Payments">
                <lookup>
                    <param name="key">NUMBER_OF_PAYMENTS</param>
                </lookup>
            </reference>
            <reference name="numLastPayments" entity-type="AttributeChoice" relation="refers-to" label="Number Of Last Payments">
                <lookup>
                    <param name="key">NUMBER_OF_PAYMENTS</param>
                </lookup>
            </reference>
        </entity>
        <entity name="AdvanceMoneyReceipt" stereotype="managed">
            <field name="receiptNumber" type="text"/>
            <field name="receiptAmt" type="amount"/>
            <field name="receiptDttm" type="date-time"/>
            <field name="depositDttm" type="date-time"/>
            <field name="appliedAmt" type="amount"/>
            <field name="deductFrmPartnerFunding" type="boolean"/>
            <reference name="receiptType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RECEIPT_TYPE</param>
                </lookup>
            </reference>
            <field name="numIndex" type="integer"/>
            <reference name="advanceMoney" entity-type="AdvanceMoney" relation="refers-to"/>
        </entity>        
        <entity name="Cost" stereotype="managed">
            <field name="manualAllocationSpecified" type="boolean" required="false"/>
            <field name="numIndex" type="integer"/>
            <field name="costAmt" type="amount"/>
            <field name="discloseFlag" type="boolean" required="false"/>
            <field name="costRefId" type="text"/>
            <field name="contractNumber" type="text"/>
            <field name="externalRefId" type="text"/>
            <field name="internalCostId" type="long" length="36"/>
            <field name="extrTermQuoteId" type="text"/>
            <field name="oklFeeLinkLineId" type="text"/>
            <field name="oklCimvId" type="text"/>
            <field name="oklCplvId" type="text"/>
            <field name="oklLinkCimvId" type="text"/>
            <reference name="structure" entity-type="Structure" relation="refers-to"/>
            <collection name="costDistribution" collection-type="list" entity-type="CostDistribution" referred-by="cost" relation="owner"/>
        </entity>        
        <entity name="CostDistribution" stereotype="managed">
            <field name="allocatedAmt" type="amount"/>
            <reference name="asset" entity-type="Asset" relation="refers-to"/>
            <reference name="cost" entity-type="Cost" relation="refers-to"/>
        </entity>        
        <entity name="Fee" stereotype="managed">
        	<field name="refNumber" type="auto"></field>
            <field name="manualAllocationSpecified" type="boolean" required="false"/>
            <field name="numIndex" type="integer"/>
            <field name="requiredFlag" type="boolean" required="false"/>
            <field name="internalFeeId" type="long" length="36"/>
            <field name="description" type="text"/>
            <field name="feeRefId" type="text"/>
            <field name="feeAmt" type="amount" label="Amount" ruleTriggerOnEvent="true"/>
            <field name="requestedFeeAmt" type="amount"/>
            <field name="startDttm" type="date-time" label="Start Date"/>
            <field name="endDttm" type="date-time" label="End Date"/>
            <field name="financedFlag" type="boolean" required="false" label="Financed"/>
            <field name="discloseFlag" type="boolean" required="false"/>
            <field name="passThroughFlag" type="boolean" required="false"/>
            <field name="externalRefId" type="text"/>
            <field name="waiverOverrideAllowed" type="boolean" required="false"/>
            <field name="feeWaived" type="boolean" required="false"/>
            <field name="feePct" type="percent"/>
			<field name="noOfPayment" type="integer"/>
			<field name="cmmncmntDate" type="date-time" label="Date"/>
			<field name="minimalDrawFee" type="amount"/>
			<reference name="calculationMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CALCULATION_METHOD</param>
                </lookup>
            </reference>
            <reference name="feeType" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">FEE_TYPE</param>
                </lookup>
            </reference>
            <reference name="feeDistribution" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FEE_DISTRIBUTION</param>
                </lookup>
            </reference>
            <field name="financed" type="boolean" required="false"/>
            <reference name="feeFrequency" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">FEE_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="feePctBasis" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">FEE_PCT_BASIS</param>
                </lookup>
            </reference>
            <reference name="whoPaysRequestedFee" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">WHO_PAYS_REQUESTED_RATE</param>
                </lookup>
            </reference>
            <reference name="partner" entity-type="Partner" relation="refers-to"/>
            <reference name="structure" entity-type="Structure" relation="refers-to"/>
            <reference name="asset" entity-type="Asset" relation="refers-to"/>
            <reference name="feePolicy" entity-type="FeePolicy" relation="refers-to" ruleTriggerOnEvent="true">
            	<filters>
            		<filter triggerExpr="isdef root" expr="entity.pricingIndex == null || entity.pricingIndex.attribute.key != 'PRICING_INDICES'"/>
            	</filters>
            </reference>
            <field name="adhocFee" type="boolean" required="false"/>
            <reference name="cancelFee" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="feePolicyType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FEE_POLICY_TYPE</param>
                </lookup>
            </reference>
            <field name="feeBooked" type="boolean" required="false"/>
            <reference name="responsibleForPayment" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RESPONSIBLE_FOR_PAYMENT</param>
                </lookup>
            </reference>
            <reference name="streamType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">STREAM_TYPE</param>
                </lookup>
            </reference>
            <display-format>$o.feeType.value$</display-format>
            <find-queries>
                <query name="byExternalRefId" select="one">where externalRefId = :externalRefId</query>
            </find-queries>
        </entity>   
        <entity name="FeeDistribution" stereotype="managed">
            <field name="allocatedAmt" type="amount"/>
            <reference name="asset" entity-type="Asset" relation="refers-to"/>
            <reference name="fee" entity-type="Fee" relation="refers-to"/>
        </entity>             
        <entity name="TradeInAsset" stereotype="managed">
            <field name="assetClassRefId" type="text" length="38"/>
            <field name="manufacturerRefId" type="text" length="38"/>
            <field name="modelRefId" type="text" length="38"/>
            <field name="accountNumber" type="text"/>
            <field name="description" type="text"/>
            <field name="quantity" type="integer"/>
            <field name="tradeInAllowance" type="amount"/>
            <field name="payOff" type="amount"/>
            <field name="assetValue" type="amount"/>
            <field name="numIndex" type="integer"/>
            <reference name="structure" entity-type="Structure" relation="refers-to"/>
            <collection name="serialNumbers" collection-type="list" entity-type="TradeInAssetSerialNumber" referred-by="tradeInAsset" relation="owner"/>
        </entity>
        <entity name="TradeInAssetSerialNumber" stereotype="managed">
            <field name="serialNumber" type="text"/>
            <field name="numIndex" type="integer"/>
            <field name="externalRefId" type="text"/>
            <reference name="tradeInAsset" entity-type="TradeInAsset" relation="refers-to"/>
        </entity>        
        <entity name="ResidualGuarantor" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="adhoc" type="boolean"/>
            <field name="guaranteeAmount" type="amount"/>
            <field name="guaranteePercent" type="amount"/>
            <reference name="guarantor" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RESIDUAL_GUARANTOR_TYPE</param>
                </lookup>
            </reference>
            <reference name="amountOrPercent" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <reference name="structure" entity-type="Structure" relation="refers-to"/>
        </entity>        
        <entity name="PaymentSchedule" stereotype="managed">
            <field name="locallyScheduled" type="boolean" required="false"/>
            <field name="seasonalScheduleFlag" type="boolean" required="false"/>
            <field name="miscellaneousScheduleFlag" type="boolean" required="false"/>
            <field name="noOfDeferredPmts" type="number"/>
            <reference name="paymentFrequency" entity-type="AttributeChoice" relation="refers-to">
               <lookup>
               		<param name="key">PAYMENT_FREQUENCY</param>
               </lookup>
              <filters>
               		<filter triggerExpr="isdef root" expr="if(root.program != null){root.program.isKeyInProgramPaymentFrequency(entity.key)}else{return true;}"/>
               </filters> 
            </reference>
            <reference name="paymentScheduleType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_SCHEDULE_TYPE</param>
                </lookup>
            </reference>
            <reference name="allowDeferredPmt" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <collection name="paymentLines" collection-type="list" entity-type="PaymentLine" referred-by="paymentSchedule" relation="owner"/>
            <collection name="seasonalSchedules" collection-type="list" entity-type="SeasonalSchedule" referred-by="paymentSchedule" relation="owner"/>
            <collection name="miscellaneousSchedules" collection-type="list" entity-type="MiscellaneousSchedule" referred-by="paymentSchedule" relation="owner"/>
            <reference name="structure" entity-type="Structure" relation="refers-to" unique="true"/>
            <collection name="deliverySchedules" collection-type="list" entity-type="DeliverySchedule" referred-by="paymentSchedule" relation="owner"/>
        </entity>
        <entity name="PaymentLine" stereotype="managed">
            <field name="segmentNumber" type="integer"/>
            <field name="startDttm" type="date-time"/>
            <field name="numOfPayment" type="integer"/>
            <field name="amount" type="amount"/>
            <reference name="paymentFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                </lookup>
            </reference>
            <collection name="taxLines" collection-type="list" entity-type="TaxLine" relation="owner"/>
            <reference name="paymentSchedule" entity-type="PaymentSchedule" relation="refers-to"/>
        </entity>
        <entity name="TaxLine" stereotype="managed">
            <field name="maxTaxReached" type="boolean" required="false"/>
            <field name="salesTaxRate" type="percent"/>
            <field name="streamSalesTaxAmount" type="amount"/>
            <field name="upfrontSalesTaxAmount" type="amount"/>
            <field name="jurisdictionLevelName" type="text"/>
            <field name="jurisdictionName" type="text"/>
            <field name="impositionName" type="text"/>
            <field name="impositionType" type="text"/>
        </entity>        
        <entity name="MiscellaneousSchedule" stereotype="managed">
            <field name="segmentNumber" type="auto"/>
            <field name="startDttm" type="date-time" label="Start Date"/>
            <field name="numOfPayment" type="integer"/>
            <field name="amount" type="amount"/>
            <field name="ratio" type="number"/>
            <field name="externalRefId" type="text"/>
            <reference name="advancedOrArrears" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ADVANCE_OR_ARREARS</param>
                </lookup>
            </reference>
            <reference name="paymentFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="amountOrRatio" entity-type="AttributeChoice" relation="refers-to" label="Amount or Ratio">
                <lookup>
                    <param name="key">AMOUNT_OR_RATIO</param>
                </lookup>
            </reference>
            <reference name="paymentSchedule" entity-type="PaymentSchedule" relation="refers-to"/>
        </entity>
        <entity name="DeliverySchedule" stereotype="managed">
            <field name="amount" type="amount"/>
            <reference name="amountOrPercent" entity-type="AttributeChoice" relation="refers-to" label="Amount or Percent">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <field name="startDttm" type="date-time" label="Start Date"/>
            <reference name="paymentSchedule" entity-type="PaymentSchedule" relation="refers-to"/>
        </entity>       
        <entity name="SeasonalSchedule" stereotype="managed">
            <field name="includeFlag" type="boolean" required="false"/>
            <field name="amount" type="amount"/>
            <reference name="month" entity-type="AttributeChoice" relation="refers-to" internal="true">
                <lookup>
                    <param name="key">MONTH</param>
                </lookup>
            </reference>
            <reference name="paymentSchedule" entity-type="PaymentSchedule" relation="refers-to"/>
        </entity>
        
        <entity name="AmortizationSchedule" stereotype="managed">
            <field name="scheduleDttm" type="date-time"/>
            <field name="startingBalanceAmount" type="amount" label="Starting Balance"/>
            <field name="takedownsAmount" type="amount" label="Takedowns"/>
            <field name="interest" type="amount"/>
            <field name="debtServiceAmount" type="amount" label="Debt Service"/>
            <field name="principalAmount" type="amount" label="Principal"/>
            <field name="endingBalanceAmount" type="amount" label="Ending Balance"/>
            <reference name="structure" entity-type="Structure" relation="refers-to"/>
        </entity>
        
        <entity name="PaymentSummarySchedule" stereotype="managed">
            <field name="paymentDttm" type="date-time"/>
            <field name="paymentAmount" type="amount"/>
            <reference name="structure" entity-type="Structure" relation="refers-to"/>
        </entity>        
        <entity name="StipulatedLossReport" stereotype="managed">
            <field name="stipulatedLossDttm" type="date-time"/>
            <field name="numberOfPaymentsInRent" type="integer"/>
            <field name="preTaxTerminationAmt" type="amount"/>
            <field name="adjTerminationAmt" type="amount"/>
            <field name="adjTerminationPctOfCost" type="percent"/>
            <reference name="structure" entity-type="Structure" relation="refers-to"/>
        </entity>
        <entity name="SolveFor" stereotype="managed">
            <reference name="type" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SOLVE_FOR_TYPE</param>
                </lookup>
            </reference>
            <reference name="adjustType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SOLVE_FOR_ADJUST_TYPE</param>
				</lookup>
			</reference>
            <field name="value" type="number"/>
            <field name="adhocSubsidy" type="amount"/>
            <field name="advancePayment" type="amount"/>
            <field name="customerRatePcnt" type="percent"/>
            <field name="downPayment" type="amount"/>
            <field name="payment" type="amount"/>
            <field name="pointPcnt" type="percent"/>
            <field name="residualValue" type="amount"/>
            <field name="spreadPcnt" type="percent"/>
            <field name="term" type="integer"/>
            <field name="totalAssetCost" type="amount"/>
            <field name="yieldPcnt" type="percent"/>
        </entity>
        
        <!-- Asset (For Leasing) -->
        <entity name="Asset" stereotype="managed" label="Asset">        
            <field name="refNumber" type="auto" label="Sequence#"/>
            <field name="internalAssetCategoryRefId" type="text" length="36"/>
            <field name="invoiceNumber" type="text"/>
            <field name="assetDescription" type="text"/>
            <field name="assetType" type="text"/>
            <field name="manufacturerRefId" type="text"/>
            <field name="salesTaxAmt" type="amount"/>
            <field name="modelRefId" type="text"/>
            <field name="residualAmt" type="amount"/>
            <field name="quantity" type="integer"/>
            <field name="unitCostAmt" type="amount"/>
            <field name="assetAmt" type="derived:amount"/>
            <field name="modelYear" type="text"/>
            <reference name="assetModel" entity-type="Model" relation="refers-to"/>
            <reference name="manufacturer" entity-type="Manufacturer" relation="refers-to"/>
            <reference name="assetLocation" entity-type="Address" relation="owner"/>
            <reference name="structure" entity-type="Structure" relation="owner"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="interimRent" entity-type="InterimRent" relation="owner"/>
            <reference name="propertyTax" entity-type="PropertyTax" relation="owner"/>
            <reference name="assetCost" entity-type="AssetCost" relation="owner"/>
            <reference name="salesTax" entity-type="SalesTax" relation="owner"/>
            <reference name="parentAsset" entity-type="Asset" relation="refers-to"/>
            <reference name="facility" entity-type="Facility" relation="refers-to"/>
            <field name="calcResidualRate" type="amount" internal="true"/>
            <field name="calcResidualAmt" type="amount"/>
            <field name="reqdResidualRate" type="percent"/>
            <field name="leseeGuaranteedResidual" type="percent"/>
            <field name="thirdPartyGuaranteedRdual" type="percent"/>
            <field name="rateCardResidualRate" type="derived:amount" internal="true"/>
            <field name="rateCardResidualAmt" type="derived:amount" internal="true"/>
            <field name="pricedResidualAmt" type="derived:amount" internal="true"/>
            <field name="pricingInputResidualRate" type="derived:amount" internal="true"/>
            <field name="tracPct" type="percent" label="Trac %"/>
            <field name="flexPct" type="percent"/>
            <field name="actualResidualRate" type="percent"/>
            <field name="paymentAmt" type="derived:amount"/>
            <field name="reqdResidualAmt" type="number"/>
			<field name="actualResidualAmt" type="number"/>
			<field name="inServiceDate" type="date-time"/>
			<field name="softCost" type="derived:amount"/>
			<reference name="assetStatus" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_STATUS</param>
                </lookup>
            </reference>
            <reference name="assetClass" entity-type="AttributeChoice" relation="refers-to" >
                 <lookup>
                 	<param name="key">ASSET_CLASS</param>
                 	<param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
                </lookup>
                <filters>
                 		<filter triggerExpr="isdef root" expr="if(root.program != null &amp;&amp; root.program.assetClass != empty){root.program.isKeyInProgramAssetclass(entity.key)}else{return true;}"/>
                 </filters>
			</reference>
            <reference name="assetSubclass" entity-type="AttributeChoice" relation="refers-to" >
                 <lookup>
                 	<param name="key">ASSET_CLASS</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.assetClass != null) { return thiz.assetClass.key; } else { return null; }]]></param>
                 </lookup>
                 <filters>
                 		<filter triggerExpr="isdef root" expr="if(root.program != null &amp;&amp; root.program.assetSubclass != empty){root.program.isKeyInProgramAssetSubclass(entity.key)}else{return true;}"/>
                 </filters>
            </reference>    
			<reference name="conditionOfEquipment" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CONDITION_OF_EQUIPMENT</param>
				</lookup>
			</reference>
            <reference name="residualReference" entity-type="ResidualReference" relation="refers-to"/>                      
            <reference name="sourceSite" entity-type="PartnerSite" relation="refers-to"/>                        
            <collection name="meters" collection-type="list" entity-type="Meter" referred-by="asset" relation="owner"/>
            <collection name="services" collection-type="list" entity-type="Service" referred-by="asset" relation="owner"/>
            <collection name="assetCosts" collection-type="list" entity-type="AssetCost" referred-by="asset" relation="owner"/>
            <collection name="attachedAssets" collection-type="list" entity-type="Asset" referred-by="parentAsset" relation="owner"/>
            <collection name="assetSerialNumberDtls" collection-type="list" entity-type="AssetSerialNumber" referred-by="asset" relation="owner"/>
            <collection name="fees" collection-type="list" entity-type="Fee" referred-by="asset" relation="owner"/>
            <collection name="assetTaxes" collection-type="list" entity-type="AssetTaxes" referred-by="asset" relation="owner"/>
            <collection name="partners" collection-type="list" entity-type="Partner" relation="refers-to">
            	<lookup name="mvel">
                    <param name="expr">thiz.getPartnersAssociatedWithPrograms</param>
                </lookup>
            </collection>
            <collection name="partnersDer" collection-type="derived:list" entity-type="Partner" relation="refers-to" />        
            <reference name="pricingOption" entity-type="PricingOption" relation="refers-to"/>            
            <display-format>$o.assetType$ $o.refNumber$</display-format>
        </entity>
        <entity name="AssetTaxes" stereotype="managed">
			<reference name="jurisdiction" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">JURISDICTION_TYPE</param>
				</lookup>
			</reference>
			<field name="stremUpfront" type="text"/>
			<field name="salesTaxRate" type="number"/>
			<field name="salesTaxCode" type="text"/>
			<field name="salesTaxAmount" type="amount"/>
			<field name="transitTaxRate" type="number"/>
			<field name="transitTaxCode" type="text"/>
			<field name="transitTaxAmount" type="amount"/>
			<field name="shippingTaxRate" type="number"/>
			<field name="shippingTaxCode" type="text"/>
			<field name="shippingTaxAmount" type="amount"/>
			<field name="totals" type="amount"/>
			<field name="salesTaxExemptFlag" type="boolean"/>
			<reference name="asset" entity-type="Asset" relation="refers-to"/>
		</entity>
        <entity name="AssetCost" stereotype="managed">
			<reference name="costType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">COST_TYPE</param>
				</lookup>
			</reference>
			<field name="numIndex" type="integer"/>
			<field name="amount" type="amount"/>
			<field name="extendedCost" type="amount"/>
			<field name="financed" type="boolean"/>
			<field name="totalRentAmount" type="amount"/>
			<reference name="asset" entity-type="Asset" relation="refers-to"/>
		</entity>        
        <entity name="AssetSerialNumber" stereotype="managed">
            <field name="serialNumber" type="text"/>
            <field name="numIndex" type="integer"/>
            <field name="externalRefId" type="text"/>
            <field name="toBeValidatedFlag" type="boolean" required="false"/>
            <reference name="asset" entity-type="Asset" relation="refers-to"/>
        </entity>
        <entity name="InterimRent" stereotype="managed">
            <field name="chargeInterimRent" type="boolean" ruleTriggerOnEvent="true"/>
            <field name="startDttm" type="date-time"/>
            <field name="numberOfPayments" type="integer"/>
            <field name="interestRate" type="number"/>
            <field name="interimRentPlus" type="number"/>
            <field name="interimRentAmount" type="amount"/>
            <field name="passthroughRentPcnt" type="percent"/>
            <field name="passthroughRentAmount" type="derived:amount"/>
            <field name="passthroughServicePcnt" type="percent"/>
            <field name="passthroughServiceAmount" type="derived:amount"/>
            <field name="oklFeeLineId" type="text"/>
            <field name="fixedInterimRentDays" type="integer"/>
            <field name="oklFeeLinkLineId" type="text"/>
            <field name="oklCimvId" type="text"/>
            <field name="oklCplvId" type="text"/>
            <field name="oklLinkCimvId" type="text"/>
            <field name="interimRentEndDate" type="date-time"/>
            <reference name="calculationMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INTERIM_RENT_CALCULATION_METHOD</param>
                </lookup>
            </reference>
            <reference name="basis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INTERIM_RENT_BASIS</param>
                </lookup>
            </reference>
            <reference name="interimRentRequired" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INTERIM_RENT_REQUIRED</param>
                </lookup>
            </reference>
        </entity>
        <entity name="PropertyTax" stereotype="managed">
            <field name="taxRate" type="percent"/>
            <field name="monthlyTaxAmount" type="amount"/>
            <field name="totalTaxAmount" type="amount"/>
            <field name="negotiatedTaxRate" type="percent"/>
            <field name="disclose" type="boolean"/>
            <field name="perPaymentTaxAmount" type="amount"/>
            <reference name="pptType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PPT_TYPE</param>
				</lookup>
			</reference>
        </entity>
        <entity name="SalesTax" stereotype="managed">
            <field name="overrideEMM" type="boolean"/>
            <field name="effectiveRate" type="percent"/>
            <field name="streamSalesTaxAmount" type="amount"/>
            <field name="upfrontSalesTaxAmount" type="amount"/>
            <field name="oklFeeLineId" type="text"/>
            <field name="oklFeeLinkLineId" type="text"/>
            <field name="oklCimvId" type="text"/>
            <field name="oklCplvId" type="text"/>
            <field name="oklLinkCimvId" type="text"/>
            <reference name="emmTaxExemptStatus" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">EMM_TAX_EXEMPT_STATUS</param>
                </lookup>
            </reference>
            <reference name="overrideTaxExemptStatus" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">EMM_TAX_EXEMPT_STATUS</param>
                </lookup>
            </reference>
            <reference name="jurisdictionLevel" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">JURISDICTION_LEVEL_CODE</param>
                </lookup>
            </reference>
            <reference name="jurisdiction" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">JURISDICTION_CODE</param>
                </lookup>
            </reference>
            <reference name="taxBasisCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">TAX_BASIS_CODE</param>
                </lookup>
            </reference>
        </entity>        
        <entity name="MoodyCustomer" stereotype="managed">
        	<field name="customerName" type="text" internal="true"/>
        	<field name="customerNameDer" type="derived:text"/>
        	<field name="mfaId" type="text"/>
        	<field name="industryModel" type="text"  internal="true"/>
        	<reference name="address" entity-type="Address" relation="owner"/>
        	<field name="dunsNumber" type="text"/>
        	<field name="lastStatementDate" type="date-time"/>
        	<field name="dateFrom" type="date-time"/>
        	<field name="dateTo" type="date-time"/>
        	 <reference name="finanStatemntType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FINANCIAL_STATEMENT_TYPE</param>
                </lookup>
            </reference>        	
        	<reference name="customer" entity-type="Customer" relation="refers-to"/>
        	<reference name="selectedMoodyCustomer" entity-type="MoodyCustomer" relation="refers-to" transient="true"/>
        	<reference name="request" entity-type="Request" relation="refers-to"/>
        	<collection name="financialStatements" collection-type="list" entity-type="MoodyFinancialStatement" referred-by="moodyCustomer" relation="owner"  internal="true"/>        	
        </entity>
        <entity name="MoodyFinancialStatement" stereotype="managed">
        	<field name="statementDate" type="date-time"/>
        	<field name="monthsCovered" type="integer"/>
        	<field name="auditMethod" type="text"/>
        	<field name="industryModel" type="text"/>
        	<reference name="generalIndustryModel" entity-type="MoodyFinancialGeneralIndustryModel" relation="owner"/>
        	<reference name="moodyCustomer" entity-type="MoodyCustomer" relation="refers-to"/>
        </entity>
        <entity name="MoodyFinancialGeneralIndustryModel" stereotype="managed">
        	<field name="financialScale" type="amount" label="Financial Scale"/>
			<field name="netSales" type="amount" label="Net Sales"/>
			<field name="costOfGoodsSold" type="amount" label="Cost Of Goods Sold"/>
			<field name="cogsDepreciation" type="amount" label="COGS Depreciation"/>
			<field name="grossProfit" type="amount" label="Gross Profit"/>
			<field name="sgaExpense" type="amount" label="SGAExpense"/>
			<field name="operatingExpense" type="amount" label="Operating Expense"/>
			<field name="officersCompensation" type="amount" label="Offcers Compensation"/>
			<field name="deprecExpense" type="amount" label="Depreciation Expense"/>
			<field name="amortization" type="amount" label="Amortization"/>
			<field name="totalOperatingExpenses" type="amount" label="Total Operating Expenses"/>
			<field name="netOperatingProfit" type="amount" label="Net Operating Profit"/>
			<field name="grossInterestExpense" type="amount" label="Gross Interest Expense"/>
			<field name="interestIncome" type="amount" label="Interest Income"/>
			<field name="incomeFromSubs" type="amount" label="Income From subs"/>
			<field name="gainLossOnAssetSale" type="amount" label="Gain/Loss on Asset Sale"/>
			<field name="totalOtherIncomeExpense" type="amount" label="Total Other Income Expense"/>
			<field name="profitBeforeTaxes" type="amount" label="Profit Before Taxes"/>
			<field name="incomeTaxCredit" type="amount" label="Income Tax Credit"/>
			<field name="incomeTaxExpense" type="amount" label="Income Tax Expense"/>
			<field name="minorityInterestExpense" type="amount" label="Minority Interest Expense"/>
			<field name="profitBeforeExtraordinaryItems" type="amount" label="Profit Before Extraordinary Items"/>
			<field name="netIncome" type="amount" label="Net Income"/>
			<field name="dividendsCommon" type="amount" label="Dividends Common"/>
			<field name="dividendsPreferred" type="amount" label="Dividends Preferred"/>
			<field name="dividendsStock" type="amount" label="Dividends Stock"/>
			<field name="cash" type="amount" label="Cash"/>
			<field name="marketableSecurities" type="amount" label="Marketable Securities"/>
			<field name="accountsReceivableTrade" type="amount" label="Accounts Receivable Trade"/>
			<field name="accountsReceivableOther" type="amount" label="Accounts Receivable Other"/>
			<field name="badDebtReserve" type="amount" label="Bad Debt Reserve"/>
			<field name="inventories" type="amount" label="Inventories"/>
			<field name="totalCurrentAssets" type="amount" label="Total current Assets"/>
			<field name="netPPAndE" type="amount" label="Net PP &amp; E"/>
			<field name="deferredAssets" type="amount" label="Deferred Asets"/>
			<field name="intangibleAssets" type="amount" label="Intangible Assets"/>
			<field name="totalAssets" type="amount" label="Total Assets"/>
			<field name="shortTermDebt" type="amount" label="Short Term Debt"/>
			<field name="curMatOfLTD" type="amount" label="Current Mat Of LTD"/>
			<field name="accountsPayableTrade" type="amount" label="Accunts Payable Trade"/>
			<field name="accountsPayableOther" type="amount" label="Accounts Payable Other"/>
			<field name="accruedLiabilities" type="amount" label="Accrued Liabilities"/>
			<field name="taxesPayable" type="amount" label="Taxes Payable"/>
			<field name="totalCurrentLiabilities" type="amount" label="Total Current Liabilities"/>
			<field name="longTermDebt" type="amount" label="Long Term Debt"/>
			<field name="capitalLeaseObligations" type="amount" label="Capital Lease Obligations"/>
			<field name="minorityInterestLiabilities" type="amount" label="Minority Interest Liabilities"/>
			<field name="subordinatedDebt" type="amount" label="Subordinated Debt"/>
			<field name="totalNoncurrentLiabilities" type="amount" label="Total Non Current Liabilities"/>
			<field name="totalLiabilities" type="amount" label="Total Liabilities"/>
			<field name="commonStock" type="amount" label="Common Stock"/>
			<field name="preferredStock" type="amount" label="Preferred Stock"/>
			<field name="retainedEarnings" type="amount" label="Retained Earnings"/>
			<field name="totalNetWorth" type="amount" label="Total Net Worth"/>
			<field name="totalLiabilitiesPlusNetWorth" type="amount" label="Total Liabilities + Net Worth"/>
			<field name="grossRentalExpense" type="amount" label="Gross Rental Expense"/>
			<field name="interestCapitalized" type="amount" label="Interest Capitalized"/>
			<field name="lifoReserve" type="amount" label="LIFO Reservce"/>
			<field name="otherNoncashCosts" type="amount" label="Other Non Cash Costs"/>
			<field name="taxRate" type="amount" label="Tax Rate"/>
			<field name="netSalesGrowth" type="number" label="Net Sales Growth (%)" />
			<field name="grossProfitMargin" type="amount" label="Gross Profit Margin"/>
			<field name="netOperatingMargin" type="amount" label="Net Operating Margin"/>
			<field name="netMargin" type="amount" label="Net Margin"/>
			<field name="currentRatio" type="amount" label="Current Ratio"/>
			<field name="quickRatio" type="amount" label="Quick Ratio"/>
			<field name="netAccountsReceivableDays" type="number" label="Net Accounts Receivable Days"/>
			<field name="accountsPayableDays" type="number" label="Accounts Payable Days"/>
			<field name="inventoryDays" type="number" label="Ivnetory Days"/>
			<field name="tangibleNetWorth" type="amount" label="Tangible Net Worth"/>
			<field name="debtToTangibleNetWorth" type="amount" label="Debt to Tangible Net Worth"/>
			<field name="capitalBase" type="amount" label="Capital Base"/>
			<field name="ebitda" type="amount" label="EBITDA"/>
			<field name="interestCoverage" type="amount" label="Interest Coverage"/>
			<field name="fixedChargeCoverage" type="amount" label="Fixed Charge Coverage"/>
			<field name="ebitdaToIntCPLTD" type="amount" label="EBITDA to Int CPLTD"/>
			<field name="riskCalcOneYearPD" type="number" label="Risk 1yr PD"/>
			<field name="oneYearBondDefaultRate" type="text" label="1yr Bond Default Rate"/>
			<field name="leverage" type="amount" label="Leverage"/>        	
        </entity>
        
        <!-- Unsorted -->        
        <entity name="WorkflowStatus" stereotype="managed">
        	<cache strategy="nonstrict-read-write" />
            <field name="statusKey" type="text" tags="Header" indexed="true"/>
            <field name="value" type="text" tags="Header"/>
            <field name="sequence" type="integer"/>
            <field name="_transient" type="boolean"/>
            <reference name="parentStatus" entity-type="WorkflowStatus" relation="refers-to" tags="Header"/>
            <field name="workflowEntity" type="text"/>
            <collection name="childStatuses" collection-type="list" entity-type="WorkflowStatus" referred-by="parentStatus" relation="refers-to"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.IWorkflowStatus</data>
            </feature>
            <display-format>$o.value$</display-format>
            <find-queries>
                <query name="byStatusKey" select="one" cacheable="true">where statusKey = :statusKey</query>
                <query name="byWorkflowEntity" select="many" cacheable="true">where upper(workflowEntity) = :workflowEntity order by sequence</query>
                <query name="byStatusKeyAndWorkflowEntity" select="many"  cacheable="true">where upper(workflowEntity) = :workflowEntity and upper(statusKey) = :statusKey</query>
            </find-queries>
        </entity>
        <entity name="AdjustableRateCap" stereotype="managed">
            <field name="effectiveDttm" type="date-time"/>
            <field name="numIndex" type="integer"/>
            <field name="maxPctIncrease" type="percent"/>
            <field name="maxPctDecrease" type="percent"/>
            <field name="rateFloor" type="percent"/>
            <field name="rateCeiling" type="percent"/>
            <reference name="capType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ADJUSTABLE_RATE_CAP_TYPE</param>
                </lookup>
            </reference>
            <reference name="contract" entity-type="Contract" relation="refers-to"/>
            <reference name="lifeTimeCapOption" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ADJUSTABLE_LIFETIME_CAP_OPTION</param>
                </lookup>
            </reference>
        </entity>
        <entity name="AmortizationInformation" stereotype="managed">
            <field name="adjRateRounding" type="boolean" required="false"/>
            <field name="amortizationLifeCycle" type="boolean" required="false"/>
            <field name="amortizationPeriodDiff" type="boolean" required="false"/>
            <field name="reamPeriodDttm" type="date-time"/>
            <field name="nextScheduleDttm" type="date-time"/>
            <field name="scheduleReamMonths" type="integer"/>
            <field name="customerNotifyDays" type="integer"/>
            <field name="shortTolerancePct" type="percent"/>
            <field name="shortToleranceAmt" type="amount"/>
            <field name="overTolerancePct" type="percent"/>
            <field name="overToleranceAmt" type="amount"/>
            <reference name="reamIndicator" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMORT_REAM_INDICATOR</param>
                </lookup>
            </reference>
            <reference name="reamPriority" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMORT_REAM_PRIORITY</param>
                </lookup>
            </reference>
            <reference name="reamBasis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMORT_REAM_BASIS</param>
                </lookup>
            </reference>
            <reference name="advancePaymentOption" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMORT_ADVANCE_PAYMENT_OPTION</param>
                </lookup>
            </reference>
            <reference name="curtailmentOption" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMORT_CURTAILMENT_OPTION</param>
                </lookup>
            </reference>
            <reference name="shortToleranceIndicator" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <reference name="overToleranceIndicator" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            
        </entity>
        <entity name="ArShortFund" stereotype="managed">
            <field name="arInvoiceNumber" type="text"/>
            <field name="contractNumber" type="text"/>
            <field name="invoiceDttm" type="date-time"/>
            <field name="invoiceDueDttm" type="date-time"/>
            <field name="comments" type="text"/>
            <field name="invoiceAmount" type="amount"/>
            <field name="amountReceived" type="amount"/>
            <field name="balance" type="amount"/>
            <field name="excludeFromInterest" type="boolean" required="false"/>
            <reference name="shortFundReason" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SHORT_FUND_REASON</param>
                </lookup>
            </reference>
            <reference name="fundingRequest" entity-type="FundingRequest" relation="refers-to"/>
        </entity>
        <entity name="AssetDisbursement" stereotype="managed">
            <field name="costId" type="text" length="36"/>
            <reference name="assetFunding" entity-type="AssetFunding" relation="refers-to"/>
            <field name="assetDisbursementAmt" type="amount"/>
        </entity>
        <entity name="AssetFunding" stereotype="managed">
            <field name="assetFundingAmt" type="amount"/>
            <field name="externalRefId" type="text"/>
            <reference name="asset" entity-type="Asset" relation="refers-to"/>
            <reference name="fundingRequest" entity-type="FundingRequest" relation="refers-to"/>
            <reference name="parentAssetFundings" entity-type="AssetFunding" relation="refers-to"/>
            <collection name="attachedAssetFundings" collection-type="list" entity-type="AssetFunding" referred-by="parentAssetFundings" relation="owner"/>
            <collection name="assetDisbursements" collection-type="list" entity-type="AssetDisbursement" referred-by="assetFunding" relation="owner"/>
        </entity>
        <entity name="BillingParameter" stereotype="managed">
            <field name="accrueDttm" type="date-time"/>
            <field name="billDttm" type="date-time"/>
            <field name="paymentDttm" type="date-time"/>
            <field name="leadDays" type="integer"/>
            <field name="achDelayDays" type="integer"/>
            <field name="principalRelayType" type="text" internal="true"/>
            <reference name="billFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BILL_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="collationMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COLLECTION_METHOD</param>
                </lookup>
            </reference>
            <reference name="collMaturityMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">MATURITY_COLLECTION_METHOD</param>
                </lookup>
            </reference>
            <reference name="prinicpalRepayType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REPAYMENT_TYPE</param>
                </lookup>
            </reference>
            <reference name="lateChargeFormula" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LATE_CHARGE_FORMULA</param>
                </lookup>
            </reference>
            <reference name="leadDaysId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BILLING_LEAD_DAYS</param>
                </lookup>
            </reference>
             <reference name="nameAccountNumber" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">NAME_ACCOUNT_NUMBER</param>
                </lookup>
            </reference>
            <field name="routingNumberDer" type="derived:number" required="false"/>
			<field name="bankAccountNumberDer" type="derived:number" required="false"/>
            <reference name="bankTrades" entity-type="BankAndTrade" relation="owner"/>
            <reference name="accountBorrower" entity-type="FacilityCustomerRole" relation="refers-to" label="Name and Account Number" ruleTriggerOnEvent="true">
            	<filters>
            		<filter triggerExpr="isdef root" expr="entity.partyRole.key == 'PARTY_ROLE_TYPE_BORROWER' "/>
            </filters>
            </reference>
        </entity>
        <entity name="AssetQualityMetrics" stereotype="managed">
        	<reference name="impairedLoanIndicator" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="tdrIndicator" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
        	<field name="nonEarningAmt" type="amount" />
        	<field name="daysPastDue" type="integer" />
        	<field name="totalSpecificReserveBal" type="amount" />
        	<field name="nonAccrualDate" type="date-time" />
        	<field name="daysPastDueAmt30to59" type="amount" />
        	<field name="daysPastDueAmt60to89" type="amount" />
        	<field name="daysPastDueAmt90plus" type="amount" />
        	<field name="chargeOffAmt" type="amount" />
        	<field name="asc310to30" type="text" />
        </entity>
        <entity name="ExposureAtDefault" stereotype="managed">
        	<field name="nonRecourseDebtAmt" type="amount" />
        	<field name="accruedInterestRecAmt" type="amount" />
        	<field name="accruedOtherRecAmt" type="amount" />
        	<field name="marketValue" type="amount" />
        	<reference name="subProductLeverageCategory" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SUB_PRODUCT_LEVERAGE_CATEGORY</param>
                </lookup>
            </reference>
        	<field name="totalCommitmentAmt" type="amount" />
        	<field name="unfundedCommitmentAmt" type="amount" />
        	<field name="bookedResidualValue" type="amount" />
        	<field name="currentResidualAmt" type="amount" />
        	<field name="fry9cCode" type="integer" />
        </entity>
        <entity name="Factoring" stereotype="managed">
        	<field name="nonRecourseCommittedAmt" type="amount" />
        	<field name="nonRecourseUncommittedAmt" type="amount" />
        	<field name="nonRecourseExposureAmt" type="amount" />
        	<field name="factDebtRecrseUnfunded" type="amount" />
        	<field name="factDebtWithExtInsAmt" type="amount" />
        	<field name="factDebtWithoutExtInsAmt" type="amount" />
        </entity>
        <entity name="CoaDefinition" stereotype="managed">
            <field name="coaId" type="text" indexed="true" unique="true" tags="Header"/>
            <field name="coaCondition" type="textarea"/>
            <reference name="coaCategory" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COA_CATEGORY</param>
                </lookup>
            </reference>
            <field name="priorTo" type="text"/>
            <reference name="variableTextReq" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>    
            <reference name="internal" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="coaType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COA_TYPE</param>
                </lookup>
            </reference>
            <reference name="nonStandard" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="productCatProject" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            
           <reference name="docRequired" entity-type="AttributeChoice" relation="refers-to"  internal="true"  >
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
			
			<reference name="documentClass" entity-type="AttributeChoice" relation="refers-to" internal="true" >
                <lookup>
                    <param name="key">DOCUMENT_CLASS</param>
                </lookup>
			</reference>
            <reference name="documentCategory" entity-type="AttributeChoice" relation="refers-to" internal="true" >
                <lookup>
                    <param name="key">DOCUMENT_CATEGORY</param>
                </lookup>
            </reference>
            <reference name="documentType" entity-type="AttributeChoice" relation="refers-to" internal="true">
                <lookup>
                    <param name="key">DOCUMENT_TYPE</param>
                </lookup>
            </reference> 
			<display-format>$o.coaId$</display-format>
            <find-queries>
                <query name="byCoaId" select="one">where coaId = :coaId</query>
                 <query name="quickSearch" select="many">where coaId like :q</query>
            </find-queries>
        </entity>        
        <entity name="CoasetDefinition" stereotype="managed">
            <field name="coaNumber" type="derived:integer"/>
            <collection name="coaEvls" collection-type="list" entity-type="CoaEvaluation" relation="owner"/>
            
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
        </entity>
        <entity name="CoaEvaluation" stereotype="managed">
            <!--<reference name="product" entity-type="Facility" relation="refers-to"/>-->
<!--             <reference name="coasetDefinition" entity-type="CoasetDefinition" relation="refers-to"/> -->
            <reference name="coaDefinition" entity-type="CoaDefinition" relation="refers-to" ruleTriggerOnEvent="true"/>
            <field name="coaConditonWithNotes" type="derived:text"/>
<!--             <reference name="coaEvaluation" entity-type="AttributeChoice" relation="refers-to"> -->
<!--                 <lookup> -->
<!--                     <param name="key">COA_EVALUATION</param> -->
<!--                 </lookup> -->
<!--             </reference>    -->
<!--             <field name="coaEvaluationExceptionMsg" type="textarea"/> -->
<!--             <field name="priorToValue" type="amount" ruleTriggerOnEvent="true"/> -->
<!--             <field name="priorToValueOriginal" type="amount"/> -->
<!--             <field name="priorToOverrideMsg" type="textarea"/> -->
<!-- 			<reference name="variableTextExist" entity-type="derived:AttributeChoice" relation="refers-to" /> -->
			<reference name="product" entity-type="Facility" relation="refers-to" />
            <field name="variableText" type="textarea"/>
            <field name="notes" type="textarea"/>
			<field name="sfdcCaseId" type="text" internal="true"/>
			<field name="sfdcCaseStatus" type="text" internal="true"/>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true" label="CoaEvaluation" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="workflowEntity">COA_EVALUATION_STATUS</param>
                </lookup>
            </reference>
            <feature operation="implements">
				<data>com.thirdpillar.foundation.model.WorkflowAware</data>
				<data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
        </entity>
        <entity name="CovenantDefinition" stereotype="managed" label="Covenant Defintion">
            <reference name="covenantCategory" entity-type="AttributeChoice" relation="refers-to" label="Category">
                <lookup>
                    <param name="key">COVENANT_CATEGORY</param>
                </lookup>
            </reference>           	
        	<field name="covenantName" type="text" label="Name"/>
        	<field name="covenantKey" type="text" label="Key"/>
        	<field name="covenantDescription" type="textarea" label="Description"/>
        	<display-format>$o.covenantName$</display-format>        	
            <find-queries>
                <query name="byKey" select="one" cacheable="true">where covenantKey = :covenantKey</query>
            </find-queries>                    	
        </entity>
        <entity name="Covenant" stereotype="managed">
        	<reference name="covenantDefinition" entity-type="CovenantDefinition" relation="refers-to" ruleTriggerOnEvent="true"/>
        	<reference name="eventType" entity-type="AttributeChoice" relation="refers-to" label="Event Type">
                <lookup>
                    <param name="key">EVENT_TYPE</param>
                </lookup>
            </reference>    
        	<field name="min" type="number" />
        	<field name="max" type="number" />
			<reference name="documentClass" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">DOCUMENT_CLASS</param>
                </lookup>
			</reference>
            <reference name="documentCategory" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">DOCUMENT_CATEGORY</param>
                    <param name="groupMvel"><![CDATA[if(thiz.documentClass != null) { return thiz.documentClass.key; } else { return null; }]]></param>                    
                </lookup>
            </reference>
            <reference name="documentType" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">DOCUMENT_TYPE</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.documentCategory != null) { return thiz.documentCategory.key; } else { return null; }]]></param>                    
                </lookup>
            </reference> 
        	<collection name="questions" collection-type="list" entity-type="Questionnaire" relation="owner" />        	
            <reference name="teamAssigned" entity-type="Team" relation="refers-to" />
            <reference name="scheduledEvent" entity-type="ScheduledEvent" relation="owner"/>            
        	<reference name="request" entity-type="Request" relation="refers-to" ruleTriggerOnEvent="true"/>
        	<collection name="covenantEvaluations" collection-type="list" entity-type="CovenantEvaluation" relation="owner" referred-by="covenant"/>
        	<feature operation="implements">
            	<data>com.thirdpillar.foundation.model.ScheduledEventAware</data>
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>        	
        </entity>
		<entity name="CovenantEvaluation" stereotype="managed">
            <reference name="covenantEvalStatus" entity-type="AttributeChoice" relation="refers-to" >
                <lookup>
                    <param name="key">COVENANT_EVALUATION_STATUS</param>
                </lookup>
            </reference> 		
        	<field name="value" type="number" />
            <field name="triggeredAt" type="date-time" internal="true"/>
            <reference name="completedBy" entity-type="User" relation="refers-to" />
            <field name="completedDate" type="date-time"/>
            <collection name="questions" collection-type="list" entity-type="Questionnaire" relation="owner" />
        	<!-- TODO Define payload datatyep -->
        	<!-- reference name="payload" entity-type="Payload" relation="refers-to" ruleTriggerOnEvent="true"/ -->        	
        	<reference name="request" entity-type="Request" relation="refers-to" ruleTriggerOnEvent="true"/>        	
			<reference name="covenant" entity-type="Covenant" relation="refers-to" ruleTriggerOnEvent="true"/>            		
            <feature operation="implements">
            	<data>com.thirdpillar.foundation.model.IScheduledEventOccurence</data>
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>        	
		</entity>        
        <entity name="CbrInformation" stereotype="managed">
            <field name="cbrAuthoOnRecvd" type="boolean"/>
            <field name="cbrRetrievedDttm" type="date-time"/>
            <field name="status" type="text" length="1020"/>
            <field name="fraudDetect" type="text" length="1020"/>
            <reference name="partner" entity-type="Partner" relation="refers-to"/>
            <field name="contactInfoId" type="text" length="36"/>
        </entity>
        <entity name="CntrInsuranceInfo" stereotype="managed">
            <field name="selfInsuredFlag" type="boolean" required="false"/>
            <field name="forcedInsApplicableFlag" type="boolean" required="false"/>
            <field name="insuranceCompId" type="text" length="36"/>
            <field name="insuranceCompSiteId" type="text" length="36"/>
            <field name="policyNumber" type="text"/>
            <field name="effectiveDttm" type="date-time"/>
            <field name="expirationDttm" type="date-time"/>
            <field name="cancelledDttm" type="date-time"/>
            <field name="coverageRecvdDttm" type="date-time"/>
            <field name="certificationDueDttm" type="date-time"/>
            <field name="certificationRecvdDttm" type="date-time"/>
            <field name="certificationNumber" type="text"/>
            <field name="externalRefId" type="text"/>
            <reference name="contract" entity-type="Contract" relation="refers-to" required="false"/>
        </entity>

        <entity name="Comment">
            <field name="commentText" type="rich-text" label="Text" required="false"/>
			<field name="derDate" type="derived:text"/>
			<field name="time" type="derived:text"/>
        </entity>
        <entity name="Contract" stereotype="managed">
            <field name="contractNumber" type="text"/>
            <field name="extSystemRefCode" type="text"/>
            <field name="sendLetterFlag" type="boolean" required="false"/>
            <field name="invServiceSepFromRent" type="boolean" required="false"/>
            <field name="letterTempltCode" type="text"/>
            <field name="advFundingFlag" type="boolean" required="false"/>
            <field name="progressPmtFlag" type="boolean" required="false"/>
            <field name="sacContractFlag" type="boolean" required="false"/>
            <field name="refundVendorFlag" type="boolean" required="false"/>
            <field name="sacEndDttm" type="date-time"/>
            <field name="riskRatingDttm" type="date-time"/>
            <field name="indirectBillingFlag" type="boolean" required="false"/>
            <field name="annDiscRate" type="percent"/>
            <field name="svcPeriodBilledAmt" type="amount"/>
            <field name="renewalPeriodsBilledAmt" type="amount"/>
            <field name="rolloverIncntvPct" type="percent"/>
            <field name="serviceEscPct" type="percent"/>
            <field name="interimSvcFlag" type="boolean" required="false"/>
            <field name="interimRentFlag" type="boolean" required="false"/>
            <field name="escrowInformationRequired" type="boolean" required="false"/>
            <field name="reportOnCurtailment" type="boolean" required="false"/>
            <field name="crossDefaultOrCollateral" type="boolean" required="false"/>
            <field name="noteRate" type="percent"/>
            <field name="loanGrade" type="integer"/>
            <field name="roundPct" type="percent"/>
            <field name="endDttm" type="date-time"/>
            <field name="externalRefId" type="text"/>
            <field name="extPriceListId" type="text"/>
            <field name="usgEscEffectiveMon" type="integer"/>
            <field name="srvEscEffectiveMon" type="integer"/>
            <field name="everGreenEligibleFlag" type="boolean" required="false"/>
            <field name="billInEvgPeriodFlag" type="boolean" required="false"/>
            <field name="usageRentalInvFlag" type="boolean" required="false"/>
            <field name="tvScriptCompleteFlag" type="boolean" required="false"/>
            <field name="evePassthroughPct" type="percent"/>
            <field name="reservePct" type="percent"/>
            <field name="useEscapeIncPct" type="percent"/>
            <field name="serviceEscIncPct" type="percent"/>
            <field name="usgEscAmt" type="amount"/>
            <field name="serviceEscAmt" type="amount"/>
            <field name="numOfCopies" type="integer"/>
            <field name="numAdvFundGraceDays" type="integer"/>
            <field name="nonRealEstateCollateralPct" type="percent"/>
            <field name="realCollateralPct" type="percent"/>
            <field name="ltvRealEstate" type="number"/>
            <field name="workPackage" type="text"/>
            <reference name="progressPayment" entity-type="AdvancedFunding" relation="owner"/>
            <reference name="amortizationInformation" entity-type="AmortizationInformation" relation="owner"/>
            <reference name="promoInformation" entity-type="PromoInformation" relation="owner"/>
            <reference name="billingParameter" entity-type="BillingParameter" relation="owner"/>
            <reference name="termoutInformation" entity-type="TermoutInformation" relation="owner"/>
            <reference name="sbAInformation" entity-type="SBAInformation" relation="owner"/>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CONTRACT_STATUS</param>
                </lookup>
            </reference>
            <reference name="riskReasonCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RISK_REASON_CODE</param>
                </lookup>
            </reference>
            <reference name="riskRatingType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RISK_RATING_TYPE</param>
                </lookup>
            </reference>
            <reference name="overageBillingTypeId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">OVERAGE_BILLING_TYPE</param>
                </lookup>
            </reference>
            <reference name="creditApp" entity-type="Request" relation="owner" unique="true"/>
            <reference name="sacVendorBuyMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">VENDOR_BUYDOWN_METHOD</param>
                </lookup>
            </reference>
            <reference name="regUZObligation" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REGULATION_U_Z_OBLIGATION</param>
                </lookup>
            </reference>
            <reference name="swap" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SWAP</param>
                </lookup>
            </reference>
            <reference name="adjustableRateType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ADJUSTABLE_RATE_TYPE</param>
                </lookup>
            </reference>
            <reference name="roundIndicator" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ADJUSTABLE_RATE_ROUND_INDICATOR</param>
                </lookup>
            </reference>
            <reference name="usageEscType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">USAGE_ESCALATOR_TYPE</param>
                </lookup>
            </reference>
            <reference name="usageEscIncreaseFreq" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ESCALATION_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="serviceEscType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SERVICE_ESCALATOR_TYPE</param>
                </lookup>
            </reference>
            <reference name="serviceEscIncreaseFreq" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ESCALATION_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="usageBillingType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">USAGE_BILLING_TYPE</param>
                </lookup>
            </reference>
            <reference name="review" entity-type="ContractReview" relation="owner"/>
            <reference name="indirectBillingParty" entity-type="Partner" relation="refers-to"/>
            <reference name="advanceFundIntTreatment" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INTEREST_TREATMENT</param>
                </lookup>
            </reference>
            <reference name="progressPmtIntTreatment" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INTEREST_TREATMENT</param>
                </lookup>
            </reference>
            <reference name="lateChargePolicy" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LATE_CHARGE_POLICY</param>
                </lookup>
            </reference>
            <reference name="lateInterestPolicy" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LATE_INTEREST_POLICY</param>
                </lookup>
            </reference>
            <reference name="paralenderWorkQueue" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PARALENDER_WORK_QUEUE</param>
                </lookup>
            </reference>
            <collection name="partnerAdvFundingDtls" collection-type="list" entity-type="PartnerAdvFundingDtl" referred-by="contract" relation="owner"/>
            <collection name="cntrInsuranceInfos" collection-type="list" entity-type="CntrInsuranceInfo" referred-by="contract" relation="owner"/>
            <collection name="reamParameters" collection-type="list" entity-type="ReamParameter" referred-by="contract" relation="owner"/>
            <collection name="adjustableRateCaps" collection-type="list" entity-type="AdjustableRateCap" referred-by="contract" relation="owner"/>
            <collection name="primeInformations" collection-type="list" entity-type="PrimeInformation" referred-by="contract" relation="owner"/>
            <collection name="principalRepaymentInfos" collection-type="list" entity-type="PrincipalRepaymentInfo" referred-by="contract" relation="owner"/>
            <collection name="fundingSchedule" collection-type="list" entity-type="FundingSchedule" referred-by="contract" relation="owner"/>
            <collection name="meterGroup" collection-type="list" entity-type="MeterGroup" referred-by="contract" relation="owner"/>
            <collection name="fundingRequests" collection-type="list" entity-type="FundingRequest" referred-by="contract" relation="owner"/>
            <collection name="contractValidationResults" collection-type="list" entity-type="ContractValidationResult" referred-by="contract" relation="owner"/>
            <collection name="riskRatings" collection-type="list" entity-type="RiskRating" referred-by="contract" relation="owner"/>
        </entity>
        <entity name="ContractReview" stereotype="managed">
            <field name="legalReviewCompleteFlag" type="boolean"/>
            <field name="creditReviewCompleteFlag" type="boolean"/>
            <field name="treasuryReviewCompleteFlag" type="boolean"/>
            <field name="uccFilingCompleteFlag" type="boolean"/>
            <field name="timelyFilingCompleteFlag" type="boolean"/>
            <field name="legalNameOnUccCorrectFlag" type="boolean"/>
            <field name="filedInCorrectStateFlag" type="boolean"/>
            <field name="verifyFstPieceDeliveryFlag" type="boolean"/>
            <field name="residenceCorrectFlag" type="boolean"/>
            <field name="assetDescCorrectFlag" type="boolean"/>
            <field name="lienSearchReqdFlag" type="boolean"/>
            <field name="searchResultsAcceptableFlag" type="boolean"/>
            <field name="taxReviewCompleteFlag" type="boolean" required="false"/>
        </entity>
        <entity name="ContractValidationResult" stereotype="managed">
            <field name="severity" type="text" length="40"/>
            <field name="name" type="text"/>
            <field name="description" type="text"/>
            <field name="errorStatus" type="text" length="40"/>
            <field name="data" type="text"/>
            <field name="type" type="text"/>
            <field name="errorNumber" type="integer"/>
            <field name="override" type="boolean" required="false"/>
            <!-- TODO: Need to cleanUP for <entity>Contract</entity>-->
            <reference name="contract" entity-type="Contract" relation="refers-to"/>
            <reference name="validationName" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CONTRACT_LP_VALIDATION_ITEMS</param>
                </lookup>
            </reference>
            <field name="comment" type="text"/>
            <reference name="overrideCommentGroup" entity-type="CommentGroup" relation="owner"/>
            <display-format>$o.name$ - $o.description$</display-format>
        </entity>
        <entity name="Counter" stereotype="managed">
            <field name="counterName" type="text"/>
            <field name="counterDesc" type="text"/>
            <field name="invItemName" type="text"/>
            <field name="invItemDesc" type="text"/>
            <field name="usageItemName" type="text"/>
            <field name="extrCounterId" type="text" length="36"/>
            <field name="extrUsageItemId" type="text" length="36"/>
            <field name="extrInvItemId" type="text" length="36"/>
            <field name="extrCounterGroupId" type="text" length="36"/>
        </entity>
        <entity name="Country" stereotype="configuration">
            <field name="name" type="text" tags="Header"/>
            <field name="isoCode" type="text" tags="Header" indexed="true"/>
            <field name="active" type="boolean" required="false"/>
            <field name="externalIdentifier" type="text" length="36"/>
            <collection name="states" collection-type="list" entity-type="State" referred-by="country" relation="owner"/>
            <display-format>$o.name$</display-format>
            <find-queries> 
                <query name="byIsoCode" select="one">where isoCode = :isoCode</query>
            </find-queries>
        </entity>
        <entity name="CreInformation" stereotype="managed" >
            <field name="purchasePrice" type="amount" label="Purchase Price" />
            <field name="lenderName" type="text" />
            <field name="amountFinanced" type="amount" />
            <field name="downPaymentAmount" type="amount" />
            <field name="amortizationMonths" type="number" label="Amortization (months)" />
            <field name="interestRate" type="percent" />
            <field name="term" type="number" label="Term (months)" />
			<reference name="ownerOccupied" entity-type="AttributeChoice" relation="refers-to" label="At Least 51% OO (Owner Occupied)">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <!--<field name="ownerOccupied" type="boolean" label="Will the Practice be at least 51% owner occupied?"/>
			<field name="annualPropertyTax" type="amount" label="Annual Property Tax"/>	
            <field name="monthlyAssociationDues" type="amount" label="Monthly Association Dues"/>
			<field name="totalNumberOfTenants" type="number" label="Total Number of Tenants"/>-->
            <field name="totalNumberOfFloors" type="number" label="Total Number of Floors"/>
        </entity>
        <entity name="CrossSell" stereotype="managed">
            <field name="leadType" type="text"/>
            <field name="productType" type="text"/>
            <field name="reasonCode" type="text"/>
            <field name="reasonDescription" type="text"/>
            <field name="accountId" type="text"/>
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
            <reference name="creditApp" entity-type="Request" relation="refers-to"/>
            <field name="amount" type="amount"/>
            <reference name="currency" entity-type="Currency" relation="refers-to"/>
            <field name="recipientId" type="text"/>
            <field name="recipientMail" type="text"/>
            <field name="recipientRole" type="text"/>
            <field name="territoryId" type="text"/>
            <field name="territoryName" type="text"/>
            <field name="productDescription" type="text" length="1024"/>
            <field name="url" type="text" length="1024"/>
            <field name="jscript" type="textarea"/>
            <field name="value" type="number"/>
            <field name="external" type="boolean" required="false"/>
            <field name="templateId" type="text"/>
            <field name="csType" type="text"/>
        </entity>

        <entity name="BankruptcyInfo" stereotype="managed">
            <field name="bankruptcy" type="boolean"/>
            <field name="dateDischarged" type="date-time"/>
            <field name="beaconScore" type="number"/>
            <field name="debtCovenantAmount" type="amount"/>
            <field name="empiricaScore" type="number"/>
            <field name="ficoScore" type="number"/>
        </entity>
        <entity name="DdAppraisal" stereotype="managed">
            <field name="appraisalTypeName" type="textarea" required="false"/>
            <field name="appraisalTypeKey" type="text" length="1020" required="false"/>
            <field name="active" type="boolean" required="false"/>
            <reference name="assesment" entity-type="DdAssesment" relation="refers-to"/>
        </entity>
        <entity name="DdAssesmentAppraisal" stereotype="managed">
            <field name="assesmentTypeName" type="text" required="false"/>
            <field name="appraisalTypeName" type="text" required="false"/>
            <field name="reportValueTypeName" type="text"/>
            <field name="active" type="boolean"/>
            <collection name="ddVendors" collection-type="list" entity-type="DdVendor" relation="owner"/>
            <collection name="ddBidRequests" collection-type="list" entity-type="DdBidRequest" referred-by="reportValue" relation="owner"/>
            <collection name="ddBiddableEntities" collection-type="list" entity-type="DdBiddableEntity" relation="owner"/>
            <collection name="ddReportTypes" collection-type="list" entity-type="DdReportType" relation="refers-to"/>
        </entity>
        <entity name="DdAssesment" stereotype="managed">
            <field name="assesmentTypeName" type="textarea" required="false"/>
            <field name="assesmentTypeKey" type="text" length="1020" required="false"/>
        </entity>
        <entity name="DdBid" stereotype="managed">
            <field name="reportPromisedDttm" type="date-time"/>
            <field name="reportCost" type="amount"/>
            <reference name="bidStatus" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">bidStatus</param>
                </lookup>
            </reference>
            <field name="bidAcceptedDttm" type="date-time"/>
            <field name="refNumber" type="auto"/>
            <field name="enteredDttm" type="date-time"/>
            <reference name="modifiedByUser" entity-type="User" relation="refers-to"/>
            <reference name="bidRequest" entity-type="DdBidRequest" relation="refers-to" required="false"/>
            <reference name="vendor" entity-type="DdVendor" relation="refers-to" required="false"/>
            <reference name="enteredByUser" entity-type="User" relation="refers-to"/>
            <reference name="bidRequestedByUser" entity-type="User" relation="refers-to" required="false"/>
            <reference name="awardedByUser" entity-type="User" relation="refers-to"/>
            <reference name="vendorCommentGroup" entity-type="CommentGroup" relation="owner"/>
            <field name="bidRequestedDttm" type="date-time" required="false"/>
            <reference name="finalReportsDocGroup" entity-type="DocumentGroup" relation="owner"/>
            <reference name="ddBidPrelimData" entity-type="DdBidPrelimData" relation="owner"/>
            <field name="bidAwardedDttm" type="date-time"/>
        </entity>
        <entity name="DdBidPrelimData" stereotype="managed">
            <field name="estMarketRentsLow" type="amount"/>
            <field name="estimatedMarketVacancyHigh" type="number"/>
            <field name="estCapLow" type="number"/>
            <field name="estCapRateHigh" type="number"/>
            <field name="namesOccupantNorth" type="text"/>
            <field name="namesOccupantSouth" type="text"/>
            <field name="namesOccupantEast" type="text"/>
            <field name="namesOccupantWest" type="text"/>
            <field name="generalNeighbourhoodDesc" type="text"/>
            <reference name="vendorCommentGroup" entity-type="CommentGroup" relation="owner"/>
            <field name="resultsOfEdrFlag" type="boolean"/>
            <field name="additionalWorkRecommFlag" type="boolean"/>
            <field name="additionalWorkAuthFlag" type="boolean"/>
            <field name="refNumber" type="auto"/>
            <reference name="enteredByUser" entity-type="User" relation="refers-to" required="false"/>
            <field name="enteredDttm" type="date-time" required="false"/>
            <field name="modifiedDttm" type="date-time" required="false"/>
            <reference name="modifiedByUser" entity-type="User" relation="refers-to"/>
            <field name="estimatedMarketRentsHigh" type="amount"/>
            <field name="estimatedMarketVacancyLow" type="number"/>
            <collection name="ddBids" collection-type="list" entity-type="DdBid" referred-by="ddBidPrelimData" relation="refers-to"/>
        </entity>
        <entity name="DdBidRequest" stereotype="managed">
            <field name="bidRequestDttm" type="date-time"/>
            <field name="bidAwardedDttm" type="date-time"/>
            <reference name="bidRequestStatus" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">bidRequestStatus</param>
                </lookup>
            </reference>
            <reference name="reportValue" entity-type="DdReportValue" relation="refers-to"/>
            <field name="bidDueDttm" type="date-time" required="false"/>
            <field name="reportCompletionDttm" type="date-time"/>
            <field name="prelimMarketDataDueDttm" type="date-time"/>
            <field name="bidRequestSendFlag" type="boolean"/>
            <reference name="commentsToVendor" entity-type="CommentGroup" relation="owner"/>
            <field name="neededDueToEdrRsltsFlag" type="boolean"/>
            <field name="includeSeismicInfoFlag" type="boolean"/>
            <field name="ubcZone" type="integer"/>
            <field name="propertyInspectionReqFlag" type="boolean"/>
            <field name="includeFloodInfoFlag" type="boolean"/>
            <reference name="asset" entity-type="Asset" relation="owner"/>
            <reference name="biddableEntity" entity-type="DdBiddableEntity" relation="refers-to"/>
            <reference name="awardedByBid" entity-type="DdBid" relation="owner"/>
            <field name="refNumber" type="auto"/>
            <reference name="appraisal" entity-type="DdAppraisal" relation="refers-to"/>
            <collection name="ddBids" collection-type="list" entity-type="DdBid" referred-by="bidRequest" relation="owner"/>
            <collection name="ddReportTypes" collection-type="list" entity-type="DdReportType" relation="refers-to" referred-by="bidRequest"/>
        </entity>
        <entity name="DdBiddableEntity" stereotype="managed">
            <field name="bidAuthorizedFlag" type="boolean"/>
            <reference name="creditApp" entity-type="Request" relation="refers-to"/>
            <reference name="assesment" entity-type="DdAssesment" relation="refers-to"/>
            <reference name="bidReqAuthByUser" entity-type="User" relation="refers-to" required="false"/>
            <reference name="bidReqAuthModByUser" entity-type="User" relation="refers-to" required="false"/>
            <field name="bidReqAuthModDttm" type="date-time" required="false"/>
            <field name="bidReqAuthDttm" type="date-time" required="false"/>
            <collection name="ddBidRequests" collection-type="list" entity-type="DdBidRequest" referred-by="biddableEntity" relation="owner"/>
        </entity>
        <entity name="DdReportDocProperty" stereotype="managed">
            <reference name="ddVendor" entity-type="DdVendor" relation="refers-to"/>
            <reference name="reportType" entity-type="DdReportType" relation="refers-to"/>
        </entity>
        <entity name="DdReportType" stereotype="managed">
            <field name="reportTypeName" type="text" required="false"/>
            <field name="active" type="boolean"/>
            <field name="reportTypeKey" type="text" length="1020"/>
            <reference name="appraisal" entity-type="DdAppraisal" relation="refers-to"/>
            <reference name="bidRequest" entity-type="DdBidRequest" relation="refers-to"/>
        </entity>
        <entity name="DdReportValue" stereotype="managed">
            <field name="reportValueName" type="textarea" required="false"/>
            <field name="reportValueKey" type="textarea"/>
            <field name="active" type="boolean" required="false"/>
            <reference name="appraisal" entity-type="DdAppraisal" relation="refers-to"/>
        </entity>
        <entity name="DdVendor" stereotype="managed">
            <field name="vendorCorporateName" type="text"/>
            <field name="vendorDunsNumber" type="text"/>
            <field name="vendorInactiveUserFlag" type="boolean" required="false"/>
            <field name="refNumber" type="auto"/>
            <field name="modifiedDttm" type="date-time" required="false"/>
            <field name="additionalContact" type="text"/>
            <field name="additionalContactPhone" type="text" length="50"/>
            <reference name="contact" entity-type="Contact" relation="owner"/>
        </entity>
        <entity name="ExpenseFunding" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="expensePaymentAmt" type="amount"/>
            <field name="comments" type="text"/>
            <reference name="expensePaymentType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">EXPENSE_PAYMENT_TYPE</param>
                </lookup>
            </reference>
            <reference name="fundingRequest" entity-type="FundingRequest" relation="refers-to"/>
        </entity>
        <entity name="Formula" stereotype="managed">
            <field name="name" type="text"/>
            <field name="description" type="text"/>
            <field name="effectiveFromDttm" type="date-time"/>
            <field name="effectiveToDttm" type="date-time"/>
        </entity>
        <entity name="FundingRequest" stereotype="managed">
            <field name="refNumber" type="auto"/>
            <field name="description" type="text"/>
            <field name="invoiceNumber" type="text" length="36"/>
            <field name="invoiceDttm" type="date-time"/>
            <field name="invoiceAmt" type="amount"/>
            <field name="fundingAmt" type="amount"/>
            <field name="supplierRetentionAmt" type="amount"/>
            <field name="fundingDueDttm" type="date-time"/>
            <field name="externalRefId" type="text"/>
            <field name="feeName" type="text"/>
            <field name="paybleThirdParty" type="text"/>
            <field name="statusDttm" type="date-time"/>
            <field name="eligibleIntCalculationFlag" type="boolean" required="false"/>
            <field name="generatedFundingFlag" type="boolean" required="false"/>
            <field name="fee" type="boolean" required="false"/>
            <reference name="costCenterForOvernight" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COST_CENTER</param>
                </lookup>
            </reference>
            <reference name="fundingType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">FUNDING_TYPE</param>
                </lookup>
            </reference>
            <reference name="invoiceType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INVOICE_TYPE</param>
                </lookup>
            </reference>
            <reference name="borrower" entity-type="Customer" relation="refers-to"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="bankTrades" entity-type="BankAndTrade" relation="owner"/>
            <reference name="partner" entity-type="Partner" relation="refers-to"/>
            <reference name="partnerSite" entity-type="PartnerSite" relation="refers-to"/>
            <reference name="fundingStatus" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FUNDING_REQUEST_STATUS</param>
                </lookup>
            </reference>
            <field name="fundingRequestTaskId" type="text" length="36"/>
            <reference name="contract" entity-type="Contract" relation="refers-to"/>
            <reference name="fundingMethod" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">FUNDING_METHOD</param>
                </lookup>
            </reference>
            <reference name="deliveryMethod" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">FUNDING_DELIVERY_METHOD</param>
                </lookup>
            </reference>
            <reference name="approval" entity-type="Approval" relation="refers-to"/>
            <collection name="assetFundings" collection-type="list" entity-type="AssetFunding" referred-by="fundingRequest" relation="owner"/>
            <collection name="expenseFunding" collection-type="list" entity-type="ExpenseFunding" referred-by="fundingRequest" relation="owner"/>
            <collection name="arShortFunds" collection-type="list" entity-type="ArShortFund" referred-by="fundingRequest" relation="owner"/>
            <collection name="tqShortFunds" collection-type="list" entity-type="TqShortFund" referred-by="fundingRequest" relation="owner"/>
        </entity>
        <entity name="FundingSchedule" stereotype="managed">
            <field name="flatFeeAmt" type="amount"/>
            <field name="retainPct" type="percent"/>
            <reference name="contract" entity-type="Contract" relation="refers-to"/>
            <reference name="fundingFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">fundingFrequency</param>
                </lookup>
            </reference>
            <reference name="party" entity-type="Customer" relation="refers-to"/>
            <collection name="lesseeRecvble" collection-type="list" entity-type="LesseeRecvble" referred-by="fundingSchedule" relation="owner"/>
            <collection name="partnerFunding" collection-type="list" entity-type="PartnerFunding" referred-by="fundingSchedule" relation="owner"/>
        </entity>
        <entity name="Guarantee" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="guaranteeAmount" type="amount"/>
            <field name="guaranteePercent" type="percent"/>
            <field name="numberOfPayments" type="integer"/>
            <!-- <field name="numberOfPaymentsDer" type="derived:text" label="Number Of Payments"/> -->
            <field name="expirationDttm" type="date-time" label="Expiration Date"/>
            <field name="comments" type="text"/>
            <field name="refNumber" type="auto"/>
            <reference name="guarantor" entity-type="Customer" relation="refers-to"/>
            <reference name="guarantyFacility" entity-type="Facility" relation="refers-to"/>
            <reference name="amountOrPercent" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <reference name="guaranteeBasis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">GUARANTEE_BASIS</param>
                </lookup>
            </reference>
            <reference name="guaranteeType" entity-type="AttributeChoice" relation="refers-to" label="Gurantee Type">
                <lookup>
                    <param name="key">GUARANTEE_TYPE</param>
                </lookup>
            </reference>
            <reference name="natureOfGuaranty" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">NATURE_OF_GUARANTY</param>
                </lookup>
            </reference>
            <reference name="cancelGuarantee" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="guaranteeBooked" type="boolean" required="false"/>
        </entity>
        <entity name="InvoiceTemplate" stereotype="managed">
            <field name="name" type="text"/>
            <field name="description" type="text"/>
            <field name="effectiveFromDttm" type="date-time"/>
            <field name="effectiveToDttm" type="date-time"/>
            <display-format>$o.name$</display-format>
            <find-queries>
                <query name="quickSearch" select="many">where name like :q</query>
            </find-queries>
        </entity>

        <entity name="LesseeRecvble" stereotype="managed">
            <field name="numOfPayment" type="integer"/>
            <field name="paymentAmt" type="amount"/>
            <field name="taxableAmt" type="amount"/>
            <field name="numIndex" type="integer"/>
            <reference name="fundingSchedule" entity-type="FundingSchedule" relation="refers-to"/>
        </entity>
        <entity name="MeterGroup" stereotype="managed">
            <field name="groupNumber" type="text"/>
            <field name="otherDescription" type="text"/>
            <reference name="description" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">METER_GROUP_DESCRIPTION</param>
                </lookup>
            </reference>
            <field name="numIndex" type="integer"/>
            <field name="externalRefId" type="text"/>
            <reference name="contract" entity-type="Contract" relation="refers-to"/>
            <reference name="meterTemplate" entity-type="Meter" relation="owner" required="false"/>
            <collection name="meter" collection-type="list" entity-type="Meter" referred-by="meterGroup" relation="refers-to"/>
        </entity>
        <entity name="Meter" stereotype="managed">
            <field name="meterNumber" type="text"/>
            <field name="meterDesc" type="text"/>
            <field name="startingMeterRead" type="integer"/>
            <field name="meterFeeAmt" type="amount"/>
            <field name="adminFeeAmt" type="amount"/>
            <field name="firstDueBankAccount" type="text"/>
            <field name="firstDueBankName" type="text"/>
            <field name="remDueBankAccount" type="text"/>
            <field name="remDueBankName" type="text"/>
            <field name="createdById" type="text" length="36"/>
            <field name="lastModifiedById" type="text" length="36"/>
            <field name="effectiveFromDttm" type="date-time"/>
            <field name="effectiveToDttm" type="date-time"/>
            <field name="externalRefId" type="text"/>
            <field name="oklMeterLinkLineId" type="text"/>
            <field name="oklCimvId" type="text"/>
            <field name="oklPmtDtlsId" type="text"/>
            <field name="oklLinkCimvId" type="text"/>
            <field name="numIndex" type="integer"/>
            <reference name="sourceSite" entity-type="PartnerSite" relation="refers-to"/>
            <reference name="asset" entity-type="Asset" relation="refers-to"/>
            <reference name="parentAsset" entity-type="Asset" relation="refers-to"/>
            <reference name="meterReadParty" entity-type="Customer" relation="owner"/>
            <reference name="firstDuePaymentMethodId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FIRST_DUE_PAYMENT_METHOD</param>
                </lookup>
            </reference>
            <reference name="overageBillingTypeId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">OVERAGE_BILLING_TYPE</param>
                </lookup>
            </reference>
            <reference name="sitePurpose" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SITE_PURPOSE</param>
                </lookup>
            </reference>
            <collection name="ubcPricingLevel" collection-type="list" entity-type="UbcPricingLevel" relation="owner"/>
            <reference name="remDuePaymentMethodId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REMAINING_DUE_PAYMENT_METHOD</param>
                </lookup>
            </reference>
            <reference name="pricingTypeId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">METER_PRICING_TYPE</param>
                </lookup>
            </reference>
            <reference name="readFrequencyId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">READING_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="readSourceId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">READING_SOURCE</param>
                </lookup>
            </reference>
            <reference name="readMethodId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">READING_METHOD</param>
                </lookup>
            </reference>
            <reference name="counter" entity-type="Counter" relation="refers-to"/>
            <reference name="meterGroup" entity-type="MeterGroup" relation="refers-to"/>
            <collection name="usagePassThrough" collection-type="list" entity-type="UsagePassthrough" referred-by="meter" relation="owner"/>
            <collection name="servicePassThrough" collection-type="list" entity-type="ServicePassthrough" referred-by="meter" relation="owner"/>
        </entity>
        <entity name="MeterReads" stereotype="managed">
            <field name="fromDttm" type="date-time"/>
            <field name="toDttm" type="date-time"/>
            <field name="currentMeterReadDate" type="date-time"/>
            <reference name="changeReadDateId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">changeReadDateId</param>
                </lookup>
            </reference>
            <field name="currentRead" type="integer"/>
            <field name="actualQuantity" type="integer"/>
            <field name="copyCredits" type="integer"/>
            <field name="consolidatedCounterName" type="text"/>
            <field name="discardFlag" type="boolean" required="false"/>
            <field name="status" type="text"/>
            <field name="message" type="text"/>
            <reference name="meter" entity-type="Meter" relation="owner" required="false"/>
            <reference name="filterByStatusId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FILTER_BY_STATUS</param>
                </lookup>
            </reference>
            <reference name="selectSystemId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SELECT_SYSTEM</param>
                </lookup>
            </reference>
            <field name="fileName" type="text"/>
            <field name="totNumberOfReads" type="integer"/>
            <field name="readsPassedValidation" type="integer"/>
            <field name="readsFailedValidation" type="integer"/>
            <field name="readsWithWarnings" type="integer"/>
            <reference name="filterById" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FILTER_BY</param>
                </lookup>
            </reference>
            <field name="meterReportingVendor" type="text"/>
            <field name="meterReportingVendorSite" type="text"/>
            <field name="modelNumber" type="text" length="38"/>
            <field name="serialNumber" type="integer" required="false"/>
            <field name="counterName" type="text"/>
            <field name="meterDate" type="date-time"/>
            <field name="attribute1" type="text"/>
            <field name="attribute2" type="text"/>
            <field name="attribute3" type="text"/>
            <field name="attribute4" type="text"/>
            <field name="attribute5" type="text"/>
            <field name="attribute6" type="text"/>
            <field name="attribute7" type="text"/>
            <field name="attribute8" type="text"/>
            <field name="attribute9" type="text"/>
            <field name="attribute10" type="text"/>
            <field name="meterRead" type="integer" required="false"/>
            <field name="scopies" type="text"/>
            <field name="billToCustomerNumber" type="text"/>
            <field name="shipToCustomerNumber" type="text"/>
            <field name="totalOverage" type="integer"/>
            <field name="overageAmt" type="integer"/>
        </entity>

        <entity name="PartnerAdvFundingDtl" stereotype="managed">
            <field name="applSpecificFlag" type="boolean" required="false"/>
            <field name="advFundLineAmt" type="amount"/>
            <field name="maxDealPct" type="percent"/>
            <field name="indexType" type="text"/>
            <field name="indexPct" type="percent"/>
            <field name="fixedRatePct" type="percent"/>
            <field name="contractRateFlag" type="boolean" required="false"/>
            <field name="gracePeriodType" type="text"/>
            <field name="numGracePeriodDays" type="integer"/>
            <field name="financeInterestFlag" type="boolean" required="false"/>
            <reference name="advFunding" entity-type="PartnerAdvFundingHdr" relation="owner" required="false"/>
            <reference name="contract" entity-type="Contract" relation="owner" required="false"/>
        </entity>
        <entity name="PartnerAdvFundingHdr" stereotype="managed">
            <field name="advFundingFlag" type="boolean" required="false"/>
            <field name="progressPmtFlag" type="boolean" required="false"/>
            <field name="numMaxBookPeriod" type="integer" required="false"/>
            <reference name="partner" entity-type="Partner" relation="refers-to" required="false"/>
            <collection name="partnerAdvFundingDtls" collection-type="list" entity-type="PartnerAdvFundingDtl" referred-by="advFunding" relation="owner"/>
        </entity>
        <entity name="PartnerFunding" stereotype="managed">
            <field name="numOfFunding" type="integer"/>
            <field name="grossFundingAmt" type="amount"/>
            <field name="fee" type="amount"/>
            <field name="retainAmt" type="amount"/>
            <field name="numIndex" type="integer"/>
            <reference name="fundingSchedule" entity-type="FundingSchedule" relation="owner"/>
        </entity>
        <entity name="PartnerTier" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="pricingProfileName" type="text"/>
            <field name="partnerPricingTier" type="integer" length="22"/>
            <reference name="program" entity-type="Program" relation="refers-to"/>
            <reference name="partnerSite" entity-type="PartnerSite" relation="refers-to"/>
        </entity>
			<entity name="BuildingLoanInfo" stereotype="managed">
				<reference name="buildingType" entity-type="AttributeChoice" relation="refers-to" label="Building Type">
	                <lookup>
						<param name="key">BUILD_TYPE</param>
	                </lookup>
            	</reference>
				<field name="loanAmount" type="amount" label="Loan Amount"/>
				<field name="maturityDttm" type="date-time" label="Maturity Date"/>
				<field name="rateApr" type="percent" label="Rate(APR)"/>
				<field name="monthlyPmt" type="amount" label="Monthly Payment"/>
				<field name="amortMonth" type="amount" label="Amortization (Months)"/>
				<field name="amortTerm" type="number" label="Loan Term (Months)"/>
				<field name="loanAsOfDttm" type="date-time" label="Loan Info As of Date"/>
				<field name="leasePmt" type="amount" label="Lease Payment"/>
				<field name="buildSqrFoot" type="number" label="Total Building Size (Sq Ft)"/>
				<field name="officeSqrFoot" type="number" label="Office Size (Sq Ft) - Current"/>
				<field name="officeSqrFootPro" type="number" label="Office Size (Sq Ft) - Proposed"/>
				<field name="yrsRemainLease" type="number" label="Years Remaining on Lease (Incl. Renewal)"/>
				<field name="leaseAmtProposed" type="amount" label="Lease Amount - Proposed"/>
				<field name="leaseExpirDttm" type="date-time" label="Lease Expiration Date"/>
				<field name="lenderName" type="text" label="Lender"/>
				<field name="amtFinance" type="amount" label="Amount Financed"/>
				<field name="annualPropTax" type="amount" label="Annual Property Taxes"/>
				<field name="monthlyAssocDue" type="amount" label="Monthly Association Fees"/>
				<field name="purchasePrice" type="amount" label="Purchase Price"/>
				<field name="noOfTenant" type="number" label="# Total Tenants"/>
				<reference name="leastOwnerOcc" entity-type="AttributeChoice" relation="refers-to" label="At Least 51% Owner Occupied?">
                <lookup>
					<param name="key">YES_OR_NO</param>
               	 </lookup>
                 </reference>
        </entity>
        <entity name="CustomerQuestionaire" stereotype="managed">
            <reference name="customer" entity-type="Customer" relation="refers-to"/>
            <reference name="question" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CUSTOMER_QUESTIONNAIRE</param>
                </lookup>
            </reference>
            <reference name="answer" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
        </entity>
        <entity name="Passthrough" stereotype="managed">
            <field name="allocatedPct" type="percent"/>
            <field name="retainedPct" type="percent"/>
            <field name="retainedFeeAmt" type="amount"/>
            <field name="externalRefId" type="text"/>
            <field name="evgpassthroughPct" type="percent"/>
            <reference name="passthroughPattern" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PASS_THROUGH_PATTERN</param>
                </lookup>
            </reference>
            <reference name="partnerSite" entity-type="PartnerSite" relation="refers-to"/>
            <reference name="paymentMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PASS_THROUGH_PAYMENT_METHOD</param>
                </lookup>
            </reference>
            <reference name="passthroughBasisCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PASSTHROUGH_BASIS</param>
                </lookup>
            </reference>
            <reference name="evgpassthroughBasisCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PASSTHROUGH_BASIS</param>
                </lookup>
            </reference>
            <reference name="partner" entity-type="Partner" relation="owner"/>
            <reference name="distributionMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PASS_THROUGH_DISTRIBUTION_METHOD</param>
                </lookup>
            </reference>
        </entity>

        <entity name="PrgAcqFee" stereotype="managed">
            <field name="eligibilityFlag" type="boolean" required="false" label="Eligibility"/>
            <field name="minDealSizeAmt" type="amount" label="Minimum Amount"/>
            <field name="maxDealSizeAmt" type="amount" label="Maximum Amount"/>
            <field name="overrideAllowedFlag" type="boolean" required="false" label="Override Allowed"/>
            <field name="retroactiveIndicatorFlag" type="boolean" required="false" label="Retroactive Indicator"/>
            <reference name="basisCode" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">BASIS</param>
                </lookup>
            </reference>
            <reference name="paymentFrequency" entity-type="AttributeChoice" relation="refers-to" label="Payment Frequency" required="false">
                <lookup>
                    <param name="key">ACQUISITON_FEE_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="accumulationTermFrequency" entity-type="AttributeChoice" relation="refers-to" label="Accumulation Term">
                <lookup>
                    <param name="key">ACQUISITON_FEE_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="retroactivePmtFrequency" entity-type="AttributeChoice" relation="refers-to" label="Retroactive Payment Frequency">
                <lookup>
                    <param name="key">ACQUISITON_FEE_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="recipientSite" entity-type="PartnerSite" relation="refers-to"/>
            <reference name="acqFeeType" entity-type="AttributeChoice" relation="refers-to" label="Acquisition Fee Type" required="false">
                <lookup>
                    <param name="key">ACQUISITION_FEE_TYPE</param>
                </lookup>
            </reference>
            <collection name="acqFeeTiers" collection-type="list" entity-type="PrgAcqFeeTier" referred-by="prgAcqFee" relation="owner"/>
        </entity>
        <entity name="PrgAcqFeeTier" stereotype="managed">
            <field name="tier" type="text"/>
            <field name="lowerAmt" type="amount" label="Lower Amount"/>
            <field name="higherAmt" type="amount" label="Higher Amount"/>
            <field name="percent" type="percent"/>
            <field name="numIndex" type="integer"/>
            <reference name="prgAcqFee" entity-type="PrgAcqFee" relation="refers-to" required="false"/>
        </entity>
        <entity name="PrgAssetInfo" stereotype="managed" label="Program Asset Information">
            <field name="assetTypeRefId" type="text" length="36"/>
            <field name="manufacturerRefId" type="text" length="36"/>
            <field name="conditionRefId" type="text" length="36"/>
            <field name="includeFlag" type="boolean" required="false"/>
            <field name="numIndex" type="integer"/>
            <reference name="allowableConditions" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ALLOWABLE_CONDITION</param>
                </lookup>
            </reference>
            <reference name="assetType"  entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_TYPE</param>
                </lookup>
            </reference>
            <reference name="manufacturer" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">MANUFACTURER_TYPE</param>
                </lookup>
            </reference>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
        </entity>
        <entity name="PrgAstRemkt" stereotype="managed">
            <reference name="remarkettingMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">METHOD_OF_REMARKETING</param>
                </lookup>
            </reference>
            <reference name="assetRecoveryResp" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_REMARKETING_RESPONSIBILITY</param>
                </lookup>
            </reference>
            <reference name="assetRecoveryRespParty" entity-type="Partner" relation="refers-to"/>
            <reference name="remktSellingResp" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_REMARKETING_RESPONSIBILITY</param>
                </lookup>
            </reference>
            <reference name="remktSellingRespParty" entity-type="Partner" relation="refers-to"/>
            <reference name="repairRecondResp" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_REMARKETING_RESPONSIBILITY</param>
                </lookup>
            </reference>
            <reference name="repairRecondRespParty" entity-type="Partner" relation="refers-to"/>
            <reference name="renewalExpPmtResp" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_REMARKETING_RESPONSIBILITY</param>
                </lookup>
            </reference>
            <reference name="renewalExpPmtRespParty" entity-type="Partner" relation="refers-to"/>
            <reference name="inspCondReportResp" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_REMARKETING_RESPONSIBILITY</param>
                </lookup>
            </reference>
            <reference name="inspCondReportRespParty" entity-type="Partner" relation="refers-to"/>
            <reference name="program" entity-type="Program" relation="refers-to" unique="true"/>
            <reference name="transportExpResp" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_REMARKETING_RESPONSIBILITY</param>
                </lookup>
            </reference>
            <reference name="transportExpeRespParty" entity-type="Partner" relation="refers-to"/>
        </entity>
        <entity name="PrgCancelableLeases" stereotype="managed">
            <field name="numNotificationDays" type="integer"/>
            <field name="numOfAssetsAllowed" type="integer"/>
            <field name="cancellationBasisAmt" type="amount"/>
            <field name="startDttm" type="date-time"/>
            <field name="endDttm" type="date-time"/>
            <reference name="cancelationBasis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CANCELATION_BASIS</param>
                </lookup>
            </reference>
            <reference name="cancelableLeaseAllowed" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CANCELABLE_LEASE_ALLOWED</param>
                </lookup>
            </reference>
            <reference name="allowanceFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ALLOWANCE_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="program" entity-type="Program" relation="refers-to" unique="true"/>
        </entity>
        <entity name="PrgContractTermination" stereotype="managed">
            <field name="annualDiscountRate" type="percent"/>
            <field name="rolloverIncentivePercent" type="percent"/>
            <field name="billServicePeriods" type="integer"/>
            <field name="billRenewPeriods" type="integer"/>
        </entity>
        <entity name="PrgCreditCard" stereotype="managed">
            <field name="ccPmtAcceptanceFlag" type="boolean" required="false"/>
            <field name="ccFeeAmt" type="amount"/>
            <field name="ccPmtLimitAmt" type="amount"/>
            <reference name="program" entity-type="Program" relation="refers-to" unique="true"/>
        </entity>
        <entity name="PrgCreditRecourse" stereotype="managed">
            <field name="poolId" type="text" length="36" label="Pool Identifier"/>
            <field name="poolName" type="text"/>
            <field name="poolNumber" type="text"/>
            <field name="startDttm" type="date-time" label="Pool Effective Date"/>
            <field name="endDttm" type="date-time" label="Pool Expiry Date"/>
            <field name="numIndex" type="integer"/>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
        </entity>
        <entity name="PrgDelayedFunding" stereotype="managed">
            <field name="delayedFundingReqFlag" type="boolean" required="false" label="Delayed Funding Required"/>
            <field name="includeDelayInPricingFlag" type="boolean" required="false" label="Include Delay In Pricing"/>
            <field name="fundingWithholdPercent" type="percent" label="Percent Of Funding To Withhold"/>
            <field name="interestPayableWithhold" type="boolean" required="false" label="Interest Payable on Funds Withheld"/>
            <field name="periodToWithholdFunds" type="integer" label="Period To Default Funds"/>
            <field name="interestIndex" type="number"/>
            <field name="bumpPercent" type="percent" label="Bump"/>
            <field name="dayToPay" type="integer"/>
        </entity>
        <entity name="PrgEarlyTermination" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="numOfReturnsAllowed" type="integer"/>
            <field name="daysAllowedQtNonVendor" type="integer"/>
            <field name="startAllowanceDttm" type="date-time"/>
            <field name="endAllowanceDttm" type="date-time"/>
            <field name="contactToReceiveQuote" type="text"/>
            <reference name="methodToReceiveQuote" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">METHOD_TO_RECEIVE_QUOTE</param>
                </lookup>
            </reference>
            <reference name="allowanceFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ALLOWANCE_FREQUENCY</param>
                </lookup>
            </reference>
            <field name="warningMsg" type="text"/>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
        </entity>
        <entity name="PrgExSoftCost" stereotype="managed">
            <field name="maxSoftCostsPct" type="percent" label="Maximum ALLOWED Soft Cost Percentage"/>
            <reference name="handlingLevel" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SOFT_COST_HANDLING_LEVEL</param>
                </lookup>
            </reference>
            <collection name="prgExSoftCostThresholds" collection-type="list" entity-type="PrgExSoftCostThreshold" referred-by="prgExSoftCost" relation="owner"/>
        </entity>
        <entity name="PrgExSoftCostThreshold" stereotype="managed">
            <field name="assetTypeRefId" type="text" length="36"/>
            <field name="maxFinancedAmount" type="amount" label="Maximum Asset Cost"/>
            <field name="percentage" type="percent" required="false"/>
            <field name="numIndex" type="integer"/>
            <reference name="prgExSoftCost" entity-type="PrgExSoftCost" relation="refers-to" required="false"/>
        </entity>
        <entity name="PrgFee" stereotype="managed" label="Fee">
        	<field name="name" type="text" />
            <field name="effectiveFrom" type="date-time"/>
            <field name="effectiveTo" type="date-time"/>
            <field name="requiredFlag" type="boolean" required="false"/>
            <field name="mayBeDisclosed" type="boolean" required="false" label="May Be Disclosed"/>	
            <field name="waiverOvrrdAllowedFlag" type="boolean" required="false" label="Waiver/Override Allowed"/>
            <field name="minFeeAmt" type="amount" label="Min Fee Amount"/>
            <field name="maxFeeAmt" type="amount" label="Max Fee Amount"/>
            <field name="feePolicyRefId" type="text" length="36" label="Fee Name"/> <!-- required="true" -->
            <field name="numIndex" type="integer"/>
            <field name="feePct" type="percent"/>
			<field name="noOfPayment" type="integer"/>
			<field name="minimumPct" type="percent"/>
			<field name="maximumPct" type="percent"/>
			<field name="defaultAmt" type="amount"/>
			<field name="defaultPct" type="percent"/>
			<reference name="calculationMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CALCULATION_METHOD</param>
                </lookup>
            </reference>
            <reference name="feeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FEE_POLICY_TYPE</param>
                </lookup>
            </reference>
             <reference name="ou" entity-type="AttributeChoice" relation="refers-to" label="Operating Unit">
                <lookup>
                    <param name="key">OPERATING_UNIT</param>
                </lookup>
            </reference>
            <reference name="sbu" entity-type="AttributeChoice" relation="refers-to" label="Strategic Business Unit">
                <lookup>
                    <param name="key">STRATEGIC_BUSINESS_UNIT</param>
                </lookup>
            </reference>
            <reference name="program" entity-type="Program" relation="refers-to"/>
            <reference name="feePolicy" entity-type="FeePolicy" relation="refers-to" ruleTriggerOnEvent="true"/>
            <reference name="currency" entity-type="Currency" relation="refers-to"/>
            <reference name="assetOrContract" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_OR_CONTRACT</param>
                </lookup>
            </reference>
            <reference name="respForPayment" entity-type="AttributeChoice" relation="refers-to" label="Responsible For Payment">
                <lookup>
                    <param name="key">RESPONSIBLE_FOR_PAYMENT</param>
                </lookup>
            </reference>
             <reference name="streamType" entity-type="AttributeChoice" relation="refers-to" label="Stream Type">
                <lookup>
                    <param name="key">STREAM_TYPE</param>
                </lookup>
            </reference>
            
            
        </entity>
        <entity name="PrgGroup" stereotype="configuration" label="Program Groups">
            <field name="prgGroupName" type="text"/>
            <field name="prgGroupDesc" type="text"/>
            <reference name="operatingUnit" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">OPERATING_UNIT</param>
                </lookup>
            </reference>
            <reference name="sbu" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">STRATEGIC_BUSINESS_UNIT</param>
                </lookup>
            </reference>
            <display-format>$o.prgGroupName$</display-format>
            <find-queries>
                <query name="quickSearch" select="many">where prgGroupName like :q</query>
            </find-queries>
        </entity>
        <entity name="PrgInterimRent" stereotype="managed">
            <field name="interimRentInterestRate" type="percent" label="Interim Rent Interest Rate"/>
            <field name="interimRentPlus" type="integer" label="Interim Rent Basis + Percent"/>
            <field name="passthroughRentPcnt" type="percent" label="Pass Through Percentage For Rent Percent"/>
            <field name="passthroughServicePcnt" type="percent" label="Pass Through Percentage For Service Percent"/>
            <field name="incomeSharingPcnt" type="percent"/>
            <field name="amount" type="amount"/>
            <reference name="calculationMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INTERIM_RENT_CALCULATION_METHOD</param>
                </lookup>
            </reference>
            <reference name="interimRentRequired" entity-type="AttributeChoice" relation="refers-to" label="Interim Rent Allowed ?" required="false">
                <lookup>
                    <param name="key">INTERIM_RENT_REQUIRED</param>
                </lookup>
            </reference>
            <reference name="interimRentBasis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INTERIM_RENT_BASIS</param>
                </lookup>
            </reference>
        </entity>
        <entity name="PrgInvoicing" stereotype="managed">
            <field name="invoicingFeeFlag" type="boolean" required="false"/>
            <reference name="invoicingTemplate" entity-type="InvoiceTemplate" relation="refers-to"/>
            <field name="numAheadDueDateDays" type="integer"/>
            <field name="backBillPrintLeadDays" type="integer"/>
            <field name="coordinateBackBillDueDate" type="boolean" required="false"/>
            <reference name="program" entity-type="Program" relation="refers-to" unique="true"/>
            <reference name="deliveryType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INVOICING_DELIVERY</param>
                </lookup>
            </reference>
            <reference name="invoiceMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INVOICING_METHOD</param>
                </lookup>
            </reference>
            <reference name="backBill" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
        </entity>
        <entity name="PrgLetter" stereotype="managed">
            <field name="requiredFlag" type="boolean" required="false"/>
            <field name="numIndex" type="integer"/>
            <reference name="party" entity-type="Partner" relation="refers-to"/>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
            <reference name="deliveryType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DELIVERY_METHOD</param>
                </lookup>
            </reference>
            <reference name="letterTemplate" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LETTER_TEMPLATE</param>
                </lookup>
            </reference>
            <reference name="scheduleDelivery" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LETTER_WHEN_TO_SEND</param>
                </lookup>
            </reference>
        </entity>
        <entity name="PrgPricingProfile" stereotype="managed" label="Program Pricing Profile">
            <field name="pricingProfileRefId" type="text" length="36"/>
            <field name="name" type="text" length="36"/>
            <field name="effectiveDttm" type="date-time" label="Effective Date"/>
            <field name="endDttm" type="date-time" label="End Date"/>
            <field name="discription" type="text" length="36"/>
            <field name="pricingProfileNumber" type="integer"/>
            <field name="numIndex" type="integer"/>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
            <reference name="facilityTypeCategory" entity-type="FacilityTypeCategory" relation="refers-to"/>
            <reference name="pricingPolicy" entity-type="PricingPolicy" relation="refers-to" ruleTriggerOnEvent="true"/>
            <reference name="facilityCategory" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_CATEGORY</param>
                </lookup>
            </reference>
            <reference name="facilityType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
        </entity>
        <entity name="PrgPromotion" stereotype="managed" label="Program Promotion">
            <field name="refNumber" type="integer"/>
            <field name="promotionName" type="text" length="36" required="false"/>
            <field name="promotionDescription" type="text" length="36" required="false"/>
            <field name="effectiveDttm" type="date-time" label="Effective Date"/>
            <field name="expirationDttm" type="date-time" label="Expiration Date"/>
            <field name="exclude" type="boolean" required="false"/>
            <field name="promotionRefId" type="text" length="36" required="false" label="Promotion Number"/>
            <field name="numIndex" type="integer"/>
            <reference name="promotionPolicy" entity-type="PromotionPolicy" relation="refers-to" ruleTriggerOnEvent="true"/>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
        </entity>
        <entity name="PrgPropertyTax" stereotype="managed">
            <field name="remitToVendorFlag" type="boolean" required="false"/>
            <field name="inclInRateFlag" type="boolean" required="false"/>
            <field name="reportableFlag" type="boolean" required="false"/>
            <reference name="remittingResp" entity-type="Partner" relation="refers-to"/>
            <reference name="collectingResp" entity-type="Partner" relation="refers-to"/>
            <reference name="invoicingResp" entity-type="Partner" relation="refers-to"/>
        </entity>
        <entity name="PrgPurchaseOption" stereotype="managed">
            <field name="fmvOptionAllowed" type="boolean" required="false"/>
            <reference name="ownerOnFmv" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_OWNER_ON_PURCHASE_OPTION</param>
                </lookup>
            </reference>
            <reference name="ownerPartyOnFmv" entity-type="Partner" relation="refers-to"/>
            <field name="fmvCapAmt" type="amount"/>
            <field name="fppoAllowed" type="boolean" required="false"/>
            <field name="overrideFppoFlag" type="boolean" required="false"/>
            <field name="fppoPercent" type="percent"/>
            <reference name="fppoPcntBasis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FIXED_PRICE_PURCHASE_OPT_PCT_BASIS</param>
                </lookup>
            </reference>
            <reference name="ownerOnFppo" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_OWNER_ON_PURCHASE_OPTION</param>
                </lookup>
            </reference>
            <reference name="ownerPartyOnFppo" entity-type="Partner" relation="refers-to"/>
            <field name="buyOutOptionAllowed" type="boolean" required="false"/>
            <reference name="ownerOnBuyOut" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_OWNER_ON_PURCHASE_OPTION</param>
                </lookup>
            </reference>
            <reference name="ownerPartyOnBuyOut" entity-type="Partner" relation="refers-to"/>
            <reference name="program" entity-type="Program" relation="refers-to" unique="true"/>
            <field name="putPurchaseOption" type="boolean" required="false"/>
            <field name="putPercent" type="percent"/>
            <field name="allowPutContractLevel" type="boolean" required="false"/>
            <field name="noOption" type="boolean" required="false"/>
            <reference name="putPercentBasis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PUT_PERCENT_BASIS</param>
                </lookup>
            </reference>
            <reference name="ownerAssetOnPut" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">OWNER_ASSET_ON_PUT</param>
                </lookup>
            </reference>
            <reference name="putPurchaseOptionParty" entity-type="Partner" relation="refers-to"/>
        </entity>
        <entity name="PrgRenewal" stereotype="managed">
            <field name="numNoticeReqToPreventRene" type="integer"/>
            <field name="eleaseAllowedFlag" type="boolean" required="false"/>
            <reference name="program" entity-type="Program" relation="refers-to" unique="true"/>
            <reference name="cntrEligibleEverGreen" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="renewalOption" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RENEWAL_OPTION</param>
                </lookup>
            </reference>
            <reference name="acceptableNoticeMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ACCEPTABLE_RENEWAL_NOTICE_METHOD</param>
                </lookup>
            </reference>
        </entity>
        <entity name="PrgReport" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="startDttm" type="date-time"/>
            <field name="endDttm" type="date-time"/>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
            <reference name="deliveryType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DELIVERY_METHOD</param>
                </lookup>
            </reference>
            <reference name="frequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REPORTING_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="reportTemplate" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REPORT_TEMPLATE</param>
                </lookup>
            </reference>
            <reference name="party" entity-type="Partner" relation="refers-to"/>
        </entity>
        <entity name="PrgSalesTax" stereotype="managed">
            <field name="eligForPassthroughFlag" type="boolean" required="false"/>
            <reference name="collectingResp" entity-type="Partner" relation="refers-to"/>
            <reference name="billingResp" entity-type="Partner" relation="refers-to"/>
            <reference name="remittingResp" entity-type="Partner" relation="refers-to"/>
        </entity>
        <entity name="PrgSharing" stereotype="managed">
            <reference name="eligibleForSharing" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="sharingPlan" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SHARING_PLAN</param>
                </lookup>
            </reference>
            <reference name="prgShPlanPRV" entity-type="PrgShPlanPRV" relation="owner"/>
            <reference name="prgShPlanCBP" entity-type="PrgShPlanCBP" relation="owner"/>
            <reference name="prgShPlanPNP" entity-type="PrgShPlanPNP" relation="owner"/>
            <reference name="prgShPlanPPP" entity-type="PrgShPlanPPP" relation="owner"/>
        </entity>
        <entity name="PrgShPlanCBP" stereotype="managed">
            <field name="minimumNumPmts" type="integer"/>
            <field name="miximumNumPmts" type="integer"/>
            <field name="initialDisbursementPct" type="percent"/>
            <field name="pctSharedAfterMaxPmtsRec" type="percent"/>
            <field name="minimumFeeAmtPct" type="percent"/>
            <reference name="minimumFeeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <reference name="recoverResExp" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <collection name="prgShPlanCBPTermSharings" collection-type="list" entity-type="PrgShPlanCBPTermSharing" referred-by="prgShPlanCBP" relation="owner"/>
        </entity>
        <entity name="PrgShPlanCBPTermSharing" stereotype="managed">
            <field name="term" type="integer"/>
            <field name="numIndex" type="integer"/>
            <field name="sharingPercent" type="percent"/>
            <reference name="prgShPlanCBP" entity-type="PrgShPlanCBP" relation="refers-to" required="false"/>
        </entity>
        <entity name="PrgShPlanPNP" stereotype="managed">
            <field name="numPmtsRetainedByFinancialinstitution" type="integer" label="Num Payments Retained By Financial institution"/>
            <field name="numPmtsRetainedByPartner" type="integer"/>
            <field name="minimumFeeAmtPct" type="percent"/>
            <reference name="minimumFeeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <reference name="payPartnerFirst" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="recoverResidualExposure" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
        </entity>
        <entity name="PrgShPlanPPP" stereotype="managed">
            <field name="residualSharingPect" type="percent"/>
            <field name="minimumFeeAmtPct" type="percent"/>
            <reference name="minimumFeeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <reference name="recoverResidualExposure" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
        </entity>
        <entity name="PrgShPlanPRV" stereotype="managed">
            <field name="resTargetPct" type="percent"/>
            <field name="pctRetainedBeforeResTarget" type="percent"/>
            <field name="pctRetainedAfterResTarget" type="percent"/>
            <field name="minimumFeeAmtPct" type="amount"/>
            <reference name="minimumFeeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
        </entity>
        <entity name="PrgSla" stereotype="managed">
            <field name="slaType" type="text"/>
            <field name="numIndex" type="integer"/>
            <field name="numRangeFrom" type="integer"/>
            <field name="numRangeTo" type="integer"/>
            <field name="requiredPct" type="percent"/>
            <field name="numTimeInMinutes" type="integer"/>
        </entity>
        <entity name="PrgSubsidy" stereotype="managed">
            <field name="refNumber" type="auto" label="Subsidy Number"/>
            <field name="name" type="text" length="36" required="false"/>
            <field name="description" type="text" length="36" required="false"/>
            <field name="effectiveDttm" type="date-time" label="Effective Date" required="true"/>
            <field name="expirationDttm" type="date-time"/>
            <field name="partnerName" type="text" length="36" required="false"/>
            <field name="partnerNumber" type="integer"/>
            <field name="promotionRefId" type="text" length="36" required="false"/>
            <field name="subsidyPolicyRefId" type="text"/>
            <field name="numIndex" type="integer"/>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
        </entity>
        <entity name="PrgUcc" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="lowerLmtAmt" type="amount"/>
            <field name="upperLmtAmt" type="amount"/>
            <field name="uccRequiredFlag" type="boolean" required="false"/>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
            <reference name="scheduleUcc" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">WHEN_UCC_NEED_TO_BE_FILLED</param>
                </lookup>
            </reference>
            <reference name="purchaseOptionType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PURCHASE_OPTION</param>
                </lookup>
            </reference>
            <reference name="facilityType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="filingTime" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FILING_TIME</param>
                </lookup>
            </reference>
            <reference name="responsibleForFiling" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RESPONSIBLE_FOR_FILLING_UCC</param>
                </lookup>
            </reference>
            <field name="searchThresholdAmount" type="amount"/>
        </entity>
        <entity name="PrgValidity" stereotype="managed">
            <field name="numValidDays" type="integer"/>
            <field name="thresholdValidityFromAmt" type="amount"/>
            <field name="thresholdValidityToAmt" type="amount"/>
            <field name="numIndex" type="integer"/>
            <reference name="program" entity-type="Program" relation="refers-to" required="false"/>
            <reference name="validityType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">VALIDITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="currency" entity-type="Currency" relation="refers-to"/>
            <reference name="quoteValidityRule" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">QUOTE_VALIDITY_RULE</param>
                </lookup>
            </reference>
            <reference name="endingPeriod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ENDING_PERIOD</param>
                </lookup>
            </reference>
        </entity>

        <entity name="PrimeInformation" stereotype="managed">
            <reference name="primeIndices" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRICING_INDICES</param>
                </lookup>
            </reference>
            <reference name="calculationType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CALCULATION_TYPE</param>
                </lookup>
            </reference>
            <field name="primeFactorPct" type="percent"/>
            <field name="numIndex" type="integer"/>
            <reference name="dayCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DAY_CODE</param>
                </lookup>
            </reference>
            <reference name="primeChangeFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRIME_CHANGE_FREQUENCY</param>
                </lookup>
            </reference>
            <field name="noOfMonths" type="integer"/>
            <reference name="alternativeCalendar" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ALTERNATIVE_CALENDAR</param>
                </lookup>
            </reference>
            <field name="anniversaryDttm" type="date-time"/>
            <reference name="contract" entity-type="Contract" relation="refers-to"/>
        </entity>
        <entity name="PrincipalRepaymentInfo" stereotype="managed">
            <field name="paymentAmt" type="amount"/>
            <reference name="billFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BILL_FREQUENCY</param>
                </lookup>
            </reference>
            <field name="billDueDttm" type="date-time"/>
            <field name="numIndex" type="integer"/>
            <field name="accrueToDttm" type="date-time"/>
            <reference name="billOrLeadDaysIndicator" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REPAY_BILL_DATE_OR_LEAD</param>
                </lookup>
            </reference>
            <field name="billDttm" type="date-time"/>
            <field name="leadDays" type="integer"/>
            <reference name="methodOfCollection" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COLLECTION_METHOD</param>
                </lookup>
            </reference>
            <reference name="maturityMethodCollection" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">MATURITY_COLLECTION_METHOD</param>
                </lookup>
            </reference>
            <reference name="prepayCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REPAYMENT_PREPAY_CODE</param>
                </lookup>
            </reference>
            <reference name="contract" entity-type="Contract" relation="refers-to"/>
            <reference name="principalIntIndicator" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRINCIPAL_INTEREST_INDICATOR</param>
                </lookup>
            </reference>
        </entity>
        <entity name="Model" stereotype="managed">
			<field name="modelName" type="text"/>
			<field name="equivalenceGroup" type="text"/>
			<reference name="manufacturer" entity-type="Manufacturer" relation="owner"/>
		</entity>
		<entity name="OuSbu" stereotype="managed">
			<field name="startDateActiveDttm" type="date-time"/>
			<field name="endDateActiveDttm" type="date-time"/>
			<reference name="operatingUnit" entity-type="OperatingUnit" relation="refers-to"/>
			<reference name="sbu" entity-type="Sbu" relation="refers-to"/>
		</entity>
		<entity name="Sbu" stereotype="configuration" label="SBU">
			<field name="name" type="text" tags="Header"/>
			<field name="description" type="text"/>
			<field name="key" type="text" tags="Header"/>
			<field name="startDateActiveDttm" type="date-time"/>
			<field name="endDateActiveDttm" type="date-time"/>
			<collection name="ouSbus" collection-type="list" entity-type="OuSbu" referred-by="sbu" relation="owner"/>
		</entity>
		<entity name="OperatingUnit" stereotype="configuration">
			<field name="name" type="text"/>
			<field name="description" type="text"/>
			<field name="key" type="text"/>
			<field name="startDateActiveDttm" type="date-time"/>
			<field name="endDateActiveDttm" type="date-time"/>
			<collection name="ouSbus" collection-type="list" entity-type="OuSbu" referred-by="operatingUnit" relation="owner"/>
		</entity>
        <entity name="BusinessSegment" stereotype="managed">
			<reference name="class1" entity-type="AttributeChoice" relation="refers-to" label="Class 1">
				<lookup>
					<param name="key">BUSINESS_SEGMENT_CLASS_1</param>
				</lookup>
			</reference>
			<reference name="class2" entity-type="AttributeChoice" relation="refers-to" label="Class 2">
				<lookup>
					<param name="key">BUSINESS_SEGMENT_CLASS_2</param>
				</lookup>
			</reference>
			<reference name="class3" entity-type="AttributeChoice" relation="refers-to" label="Class 3">
				<lookup>
					<param name="key">BUSINESS_SEGMENT_CLASS_3</param>
				</lookup>
			</reference>
			<reference name="class4" entity-type="AttributeChoice" relation="refers-to" label="Class 4">
				<lookup>
					<param name="key">BUSINESS_SEGMENT_CLASS_4</param>
				</lookup>
			</reference>
			<reference name="class5" entity-type="AttributeChoice" relation="refers-to" label="Class 5">
				<lookup>
					<param name="key">BUSINESS_SEGMENT_CLASS_5</param>
				</lookup>
			</reference>
			<field name="class6" type="text" label="Class 6"/>
			<field name="class7" type="text" label="Class 7"/>
			<field name="legacyBusinessSegiment" type="text" length="4" label="Legacy Business Segment"/>
			<field name="legacyBusinessSubSegiment" type="text" length="4" label="Legacy Business Sub Segment"/>
		</entity>
        <entity name="Program" stereotype="business-entity" label="Programs">
            <field name="programCreatedDate" type="derived:date-time"/>
            <collection name="residualPolicies" collection-type="list" entity-type="ResidualPolicy" relation="owner"/>
            <collection name="allowableConditions" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ALLOWABLE_CONDITION</param>
                </lookup>
            </collection>
            <collection name="paymentFrequency" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                </lookup>
            </collection>
            <field name="taxOpnLtrReq" type="boolean" label="Tax Opinion Letter Required"/>
            <field name="taxOpnLtrThreshold" type="text" label="Tax Opinion Letter Threshold"/>
            <reference name="lateChargeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LATE_CHARGE_TYPE</param>
                </lookup>
            </reference>
            <reference name="assetClass" entity-type="AttributeChoice" relation="refers-to" label="Asset Type" ruleTriggerOnEvent="true">
                 <lookup>
                 	<param name="key">ASSET_CLASS</param>
                 	<param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
                </lookup>
			</reference>
			 <collection name="assetSubclass" entity-type="AttributeChoice"  collection-type="list" relation="refers-to" label="Asset Sub-Type" >
                 <lookup>
                 	<param name="key">ASSET_CLASS</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.assetClass != null) { return thiz.assetClass.key; } else { return null; }]]></param>
                </lookup>
            </collection> 
            <reference name="facilityTypeRef" entity-type="AttributeChoice" relation="refers-to" label="Product Type">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
              <reference name="financialProductType" entity-type="AttributeChoice" relation="refers-to" label="Financial Product Type">
                <lookup>
                    <param name="key">FINANCIAL_PRODUCT_TYPE</param>
                    <param name="groupMvel"><![CDATA[if(thiz.facilityTypeRef != null) { return thiz.facilityTypeRef.key; } else { return null; }]]></param>
                </lookup>
            </reference>
             <collection name="noticeMethods" collection-type="list" entity-type="AttributeChoice" relation="refers-to" label="Acceptable Notice Methods">
                <lookup>
                    <param name="key">NOTICE_METHODS</param>
                </lookup>
            </collection>
             <reference name="renewalOption" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RENEWAL_OPTION</param>
                </lookup>
            </reference>
	        <!-- <reference name="manufacturer" entity-type="Manufacturer" relation="refers-to"/>     -->
       		<collection name="manufacturers" collection-type="list" entity-type="Manufacturer" relation="refers-to"/>
            <reference name="leaseExtension" entity-type="LeaseExtension" relation="owner"/>
            <field name="renewalAllowed" type="boolean" label="Renewal Allowed"/>
            <field name="eligforEvergreen" type="boolean" label="Eligible for Evergreen"/>
            <field name="noticeReqtoPreRenewal" type="text" label="Notice Required to Prevent Renewal (Days)"/>
            <field name="lateChargePercent" type="percent"/>
            <field name="lateChargeExempt" type="boolean"/>
            <field name="lateChargeFlatFee" type="amount"/>
            <field name="lateChargeGracePeriod" type="text"/>
            <field name="lateChargeMinAmount" type="amount"/>
            <field name="lateChargeMaxAmount" type="amount"/>
            <field name="stipLossTable" type="boolean"/>
            <reference name="eolGracePeriod" entity-type="AttributeChoice" relation="refers-to" label="EOL Grace Period">
                <lookup>
                    <param name="key">EOL_GRACE_PERIOD</param>
                </lookup>
            </reference>
            <field name="countryOfFedJurd" type="text" label="County of Federal Jurisdiction" required="false"/>
            <reference name="typeOfEolNotification" entity-type="AttributeChoice" relation="refers-to" label="Type of EOL Notification" required="false">
                <lookup>
                    <param name="key">EOL_NOTIFICATION</param>
                </lookup>
            </reference>
            <reference name="stateOfLegaljurd" entity-type="AttributeChoice" relation="refers-to" label="State of Legal Jurisdiction" required="false">
                <lookup>
                    <param name="key">stateOfLegaljurd</param>
                </lookup>
            </reference>
            <reference name="eolNotificationDays" entity-type="AttributeChoice" relation="refers-to" label="EOL Notification Days" required="false">
                <lookup>
                    <param name="key">EOL_NOTIFICATION_DAY</param>
                </lookup>
            </reference>
            <reference name="assetLocationNotDate" entity-type="AttributeChoice" relation="refers-to" label="Asset Location Notification Days">
                <lookup>
                    <param name="key">assetLocationNotDate</param>
                </lookup>
            </reference>
            <field name="assetLocNotificationDays" type="text" label="Asset Location Notification Days"/>
            <reference name="likeForLike" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">likeForLike</param>
                </lookup>
            </reference>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true">
				<lookup>
					<param name="workflowEntity">WORKFLOW_ENTITY_PROGRAM</param>
				</lookup>
			</reference>
            <reference name="acceptanceType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">ACCEPTANCE_TYPE</param>
                </lookup>
            </reference>
            <field name="fmvCaps" type="boolean" label="FMV Caps"/>
            <field name="deemedAcceptanceDays" type="text"/>
            <field name="renewalCaps" type="boolean"/>
            <field name="scheduleReturn" type="text"/>
            <field name="earlyTerminations" type="boolean"/>
            <field name="invoicingLeadDays" type="text"/>
            <field name="fixedExtension" type="boolean"/>
            <field name="negotiatedRenewals" type="boolean"/>
            <field name="bestEffortLanguage" type="boolean"/>
            <field name="mwdForgiveness" type="boolean" label="MWD Forgiveness"/>
            <reference name="poReqForOrdRel" entity-type="AttributeChoice" relation="refers-to" label="PO Required For Order Release" required="false">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <field name="maxContractInc" type="boolean" label="Maximum Contract Increase?"/>
            <field name="maxContractIncPerc" type="percent"/>
            <field name="maxContractDec" type="boolean" label="Maximum Contract Decrease?"/>
            <field name="maxContractDecPerc" type="percent"/>
            <collection name="payCodesForAutoAssgn" collection-type="list" entity-type="AttributeChoice" label="Pay Codes For Automatic Assignment" relation="refers-to">
                <lookup>
                    <param name="key">PAYCODE_FOR_AUTO_ASSIGN</param>
                </lookup>
            </collection>
            <field name="allowForPermtLeases" type="boolean" label="Allow For Permitted Lessees"/>
            <collection name="incompatibleBlockCodes" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INCOMPATIBLE_BLOCK_CODE</param>
                </lookup>
            </collection>
            <reference name="uccTypes" entity-type="AttributeChoice" relation="refers-to" label="UCC Type" required="false">
                <lookup>
                    <param name="key">UCC_TYPE</param>
                </lookup>
            </reference>
            <reference name="branchCode" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">BRANCH_CODE</param>
                </lookup>
            </reference>
            <reference name="remitToCode" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">remitToCode</param>
                </lookup>
            </reference>
            <reference name="financialinstitutionCode" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution Code">
                <lookup>
                    <param name="key">financialinstitutionCode</param>
                </lookup>
            </reference>
            <reference name="programCategory" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">PROGRAM_CATEGORY</param>
                </lookup>
            </reference>
            <reference name="programType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">PROGRAM_TYPE</param>
                </lookup>
            </reference>
            <reference name="financialinstitutionName" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution Name">
                <lookup>
                    <param name="key">FINANCIAL_INSTITUTION_NAME</param>
                </lookup>
            </reference>
            <field name="otherFinancialinstitutionName" type="text" tags="Header" label="Other Financial Institution Name"/>
            <field name="validityOpinionRqrdFlg" type="boolean" label="Validity Opinion Required"/>
            <field name="valdtyOpnLtrThrshold" type="text" label="Validity Opinion Letter Threshold"/>
            <collection name="allowableManufacturers" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">MANUFACTURER_TYPE</param>
                </lookup>
            </collection>
            
            <collection name="allowableAssetClasses" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSET_TYPE</param>
                </lookup>
            </collection>            
            <field name="programName" type="text" tags="Header" label="Program Name"/>
            <field name="description" type="textarea" tags="Header" label="Program Description"/>
            <field name="startDttm" type="date-time" tags="Header" label="Program Start Date"/>
            <field name="endDttm" type="date-time" tags="Header" label="Program End Date"/>
            <field name="useStdTmplFlag" type="boolean" required="false" label="Standard Template"/>
            <field name="uccRequiredFlag" type="boolean" required="false"/>
            <field name="forcedInsuranceAllwdFlag" type="boolean" required="false"/>
            <field name="versionNumber" type="integer" tags="Header"/>
            <field name="daysGrandfatheringApps" type="integer" label="Number of Days Grandfathering Apps on Start Date " required="false"/>
            <field name="daysGrandfatheringBooking" type="integer" label="Number of Days Grandfathering Booking on Start Date " required="false"/>
            <field name="idCFlag" type="boolean"/>
            <field name="priSrcRelFlag" type="boolean" label="Primary Source Relationship"/>
            <field name="privateLblAlwdFlag" type="boolean" required="false"/>
            <field name="effectiveFromDttm" type="date-time" label="Program Effective From"/>
            <field name="effectiveToDttm" type="date-time" label="Program Effective To"/>
            <field name="tmplGroupCode" type="text"/>
            <field name="pmtDueDay" type="integer" label="Payment Due Day" required="false"/>
            <field name="pmtDueDayDer" type="derived:text" label="Payment Due Day"/>
            <field name="pmtDueDayAccToPayFreq" type="integer" label="Payment Due Day" required="false" internal="true"/>
            <field name="eligScrCard" type="text"/>
            <field name="autoApproveFlag" type="boolean" required="false"/>
           <!--  <field name="autoDeclineFlag" type="boolean" required="false"/> -->
            <field name="autoApprovalMaxAmount" type="amount"/>
            <!-- <field name="autoDeclineMaxAmount" type="amount"/> -->
            <field name="autoApprovalFICOScore" type="number"/>
            <field name="autoApprovalMinYears" type="number"/>
            <field name="minimumTerm" type="integer"/>
            <field name="maximumTerm" type="integer"/>
            <field name="telVerificationReqFlag" type="boolean" required="false"/>
            <field name="earliestAppDttm" type="date-time" label="Earliest App Date For Program Eligibility"/>
            <field name="numMaxSoftCostsForAutoapr" type="integer"/>
            <field name="inactivatedDttm" type="date-time" label="Program Inactivated On"/>
            <field name="refNumber" type="auto" tags="Header" label="Program Number"/>
            <field name="utilizeLesseeRiskRtngFlag" type="boolean" required="false"/>
            <field name="syndicationEligibleFlag" type="boolean" required="false"/>
            <field name="bookingEndDttm" type="date-time" label="Booking End Date" required="false"/>
            <field name="physicalDamageInsurance" type="boolean" required="false"/>
            <field name="rateParticipationEligible" type="boolean" required="false"/>
            <field name="programNameDer" type="derived:text" tags="Header" label="Program Name" />
			<field name="descriptionDer" type="derived:text" tags="Header" label="Program Description" />
			<field name="startDttmDer" type="derived:date-time" tags="Header" label="Program Start Date" />
			<field name="endDttmDer" type="derived:date-time" tags="Header" label="Program End Date" />
			<field name="derivedVersionNumber" type="derived:integer" label="Version Number"/> 
            <reference name="inactiveReason" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PROGRAM_INACTIVE_REASONS</param>
                </lookup>
            </reference>
            <reference name="lateChargePolicy" entity-type="AttributeChoice" relation="refers-to" label="Late Charge Interest">
                <lookup>
                    <param name="key">LATE_CHARGE_POLICY</param>
                </lookup>
            </reference>
            <reference name="lateInterestPolicy" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LATE_INTEREST_POLICY</param>
                </lookup>
            </reference>
            <reference name="prgSalesTax" entity-type="PrgSalesTax" relation="owner"/>
            <reference name="prgSharing" entity-type="PrgSharing" relation="owner"/>
            <reference name="prgExSoftCost" entity-type="PrgExSoftCost" relation="owner"/>
            <reference name="prgDelayedFunding" entity-type="PrgDelayedFunding" relation="owner"/>
            <reference name="prgInterimRent" entity-type="PrgInterimRent" relation="owner"/>
            <reference name="businessSegment" entity-type="BusinessSegment" relation="owner"/>
            <reference name="prgPropertyTax" entity-type="PrgPropertyTax" relation="owner"/>
            <reference name="prgAstRemkt" entity-type="PrgAstRemkt" relation="owner"/>
            <reference name="prgRenewal" entity-type="PrgRenewal" relation="owner"/>
            <reference name="prgPurchaseOption" entity-type="PrgPurchaseOption" relation="owner"/>
            <reference name="prgCancelableLease" entity-type="PrgCancelableLeases" relation="owner"/>
            <reference name="prgFaxFunding" entity-type="FaxFunding" relation="owner"/>
            <reference name="prgRentalOption" entity-type="RentalOption" relation="owner"/>
            <reference name="rentalFleet" entity-type="RentalFleet" relation="owner"/>
            <reference name="usageOption" entity-type="UsageOption" relation="owner"/>
            <reference name="defMaintenance" entity-type="DefMaintenance" relation="owner"/>
            <reference name="prgOtherProduct" entity-type="OtherProduct" relation="owner"/>
            <reference name="prgFacilitiesMgmt" entity-type="FacilityManagement" relation="owner"/>
            <reference name="prgInvoicing" entity-type="PrgInvoicing" relation="owner"/>
            <reference name="prgAcqFee" entity-type="PrgAcqFee" relation="owner"/>
            <reference name="cashApplicationHier" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CASH_APPLICATION_HIERARCHY</param>
                </lookup>
            </reference>
            <reference name="structure" entity-type="Structure" relation="owner"/>
            <reference name="reportingEntity" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REPORTING_ENTITY</param>
                </lookup>
            </reference>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to" label="Program Status">
                <lookup>
                    <param name="key">PROGRAM_STATUS</param>
                </lookup>
            </reference>
            <reference name="parent" entity-type="Program" relation="refers-to"/>
            <reference name="defaultLanguage" entity-type="Language" relation="refers-to"/>
            <reference name="approval" entity-type="Approval" relation="owner"/>
            <reference name="requestor" entity-type="User" relation="refers-to"/>
            <reference name="owner" entity-type="User" relation="refers-to"/>
            <reference name="operatingUnit" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">OPERATING_UNIT</param>
                </lookup>
            </reference>
            <reference name="secondarySales" entity-type="User" relation="refers-to"/>
            <reference name="primarySales" entity-type="User" relation="refers-to"/>
            <reference name="pmtFreqCode" entity-type="AttributeChoice" relation="refers-to" label="Payment Frequency">
                <lookup>
                    <param name="key">PROGRAM_PAYMENT_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="sbu" entity-type="AttributeChoice" relation="refers-to" label="Strategic Business Unit">
                <lookup>
                    <param name="key">STRATEGIC_BUSINESS_UNIT</param>
                </lookup>
            </reference>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
            <reference name="currency" entity-type="Currency" relation="refers-to"/>
            <reference name="versionStatus" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">VERSION_STATUS</param>
                </lookup>
            </reference>
            <reference name="thirdPartyBilling" entity-type="Partner" relation="refers-to" label="Party That Bills"/>
            <field name="thirdPartyBillingContact" type="text" label="Billing Contact"/>
            <reference name="thirdPartyCollecting" entity-type="Partner" relation="refers-to" label="Party That Collects"/>
            <field name="thirdPartyCollectingContact" type="text" label="Collecting Contact"/>
            <reference name="programGroup" entity-type="PrgGroup" relation="refers-to"/>
            <reference name="respFillingUcc" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RESPONSIBLE_FOR_FILLING_UCC</param>
                </lookup>
            </reference>
            <reference name="docPrepRespParty" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DOCUMENT_PREP_RESPONSIBILITY</param>
                </lookup>
            </reference>
            <reference name="prgContractTermination" entity-type="PrgContractTermination" relation="owner"/>
            <collection name="prgPricingIndices" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRICING_INDICES</param>
                </lookup>
            </collection>
            <reference name="defPricingBasis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FACILITY_TYPE_BASIS</param>
                </lookup>
            </reference>
            <reference name="defFirstPmtAdvance" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DEFAULT_FIRST_PAYMENT_OPTION</param>
                </lookup>
            </reference>
            <reference name="defFirstPmtArrears" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DEFAULT_FIRST_PAYMENT_OPTION</param>
                </lookup>
            </reference>
            <collection name="advanceMonies" collection-type="list" entity-type="AdvanceMoney" relation="owner"/>
            <collection name="prgReports" collection-type="list" entity-type="PrgReport" referred-by="program" relation="owner"/>
            <reference name="prgCreditCard" entity-type="PrgCreditCard" relation="owner"/>
            <collection name="excludedPrgPromotions" collection-type="list" entity-type="PrgPromotion" referred-by="program" relation="owner"/>
            <collection name="prgCreditRecourses" collection-type="list" entity-type="PrgCreditRecourse" referred-by="program" relation="owner"/>
            <collection name="allowableManufacturersRef" collection-type="list" entity-type="Manufacturer" relation="refers-to"/>
            <collection name="prgEarlyTerminations" collection-type="list" entity-type="PrgEarlyTermination" referred-by="program" relation="owner"/>
            <reference name="docPrepResponsibleParty" entity-type="Partner" relation="refers-to"/>
            <collection name="prgUccs" collection-type="list" entity-type="PrgUcc" referred-by="program" relation="owner"/>
            <collection name="prgFees" collection-type="list" entity-type="PrgFee" referred-by="program" relation="owner"/>
            <!-- <collection name="prgPartners" collection-type="list" entity-type="Partner" relation="refers-to"/> -->
            <collection name="prgPartners" collection-type="list" entity-type="Partner" referred-by="partnerPrograms" relation="refers-to" />
            <collection name="prgValidities" collection-type="list" entity-type="PrgValidity" referred-by="program" relation="owner"/>
            <collection name="prgSubsidies" collection-type="list" entity-type="PrgSubsidy" referred-by="program" relation="owner"/>
            <collection name="allowableAssetClassesRef" collection-type="list" entity-type="AssetInvItem" relation="refers-to"/>
            <collection name="prgLetters" collection-type="list" entity-type="PrgLetter" referred-by="program" relation="owner"/>
            <collection name="prgAssetInfos" collection-type="list" entity-type="PrgAssetInfo" referred-by="program" relation="owner"/>
            <collection name="prgPricingProfiles" collection-type="list" entity-type="PrgPricingProfile" referred-by="program" relation="owner"/>
            <collection name="pricingProfiles" collection-type="list" entity-type="PricingPolicy" relation="refers-to"/>
            <collection name="prgCreditDecisionSLAs" collection-type="list" entity-type="PrgSla" relation="owner"/>
            <collection name="prgSameDayFundingSLAs" collection-type="list" entity-type="PrgSla" relation="owner"/>
            <collection name="prgAppEntrySLAs" collection-type="list" entity-type="PrgSla" relation="owner"/>
            <collection name="guarantees" collection-type="list" entity-type="Guarantee" relation="owner"/>
            <collection name="facilityTypeCategories" collection-type="list" entity-type="FacilityTypeCategory" relation="owner"/>
            <collection name="facilityCategory" collection-type="list"  entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_CATEGORY</param>
                </lookup>
            </collection>
            <collection name="facilityType" collection-type="list" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </collection>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.WorkflowAware</data>                
            </feature>
            <display-format>$o.programName$</display-format>
            <find-queries>
                <query name="quickSearch" select="many">where programName like :q</query>
            </find-queries>
        </entity>
        <entity name="Manufacturer" stereotype="managed">
			<field name="manufacturerName" type="text"/>
			<collection name="models" collection-type="list" entity-type="Model" referred-by="manufacturer" relation="owner"/>
			<display-format>$o.manufacturerName$</display-format>
			<find-queries>
				<query name="quickSearch" select="many">where manufacturerName like :q</query>
			</find-queries>
		</entity>
        <entity name="FacilityCategory" stereotype="managed">
			<field name="name" type="text"/>
			<field name="key" type="text"/>
			<collection name="facilityTypeCategories" collection-type="list" entity-type="FacilityTypeCategory" referred-by="facilityCategory" relation="owner"/>
		</entity>
		<entity name="ProductObligationType" stereotype="managed">
			<field name="syndicated" type="boolean"/>
			<field name="collateralsReqd" type="boolean"/>
			<reference name="productType" entity-type="ProductType" relation="refers-to"/>
			<reference name="obligationType" entity-type="ObligationType" relation="refers-to"/>
			<collection name="facTypeCatPrdctTypes" collection-type="list" entity-type="FacTypeCatPrdctType" referred-by="productObligationType" relation="owner"/>
		</entity>
		<entity name="ProductType" stereotype="managed">
			<field name="description" type="text"/>
			<field name="key" type="text"/>
			<collection name="facTypeCatPrdctTypes" collection-type="list" entity-type="FacTypeCatPrdctType" referred-by="productType" relation="owner"/>
			<collection name="productObligationTypes" collection-type="list" entity-type="ProductObligationType" referred-by="productType" relation="owner"/>
		</entity>
		<entity name="ObligationType" stereotype="managed">
			<field name="description" type="text"/>
			<field name="key" type="text"/>
			<field name="obligationCode" type="integer"/>
			<collection name="productObligationTypes" collection-type="list" entity-type="ProductObligationType" referred-by="obligationType" relation="owner"/>
		</entity>
		<entity name="FacTypeCatPrdctType" stereotype="managed">
			<reference name="facilityTypeCategory" entity-type="FacilityTypeCategory" relation="refers-to"/>
			<reference name="facilityType" entity-type="ProductType" relation="refers-to"/>
			<field name="checkAccess" type="boolean"/>
			<field name="hierarchy" type="boolean"/>
			<field name="sba" type="boolean"/>
			<field name="productCode" type="integer"/>
			<field name="active" type="boolean"/>
			<field name="standalone" type="boolean"/>
			<field name="commitmentWithLoan" type="boolean"/>
			<reference name="productObligationType" entity-type="ProductObligationType" relation="refers-to"/>
			<reference name="sbaType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SBA_TYPE</param>
				</lookup>
			</reference>
		</entity>
		<entity name="AssetInvItem" stereotype="managed" label="Asset Item">
			<field name="extrInvItemId" type="text" length="36" required="true"/>
			<field name="itemName" type="text" required="true"/>
			<field name="itemDesc" type="textarea"/>
			<field name="invOrgId" type="text" length="36"/>
			<field name="invOrgName" type="text"/>
			<field name="categorySegment" type="text"/>
			<field name="startDateActiveDttm" type="date-time"/>
			<field name="endDateActiveDttm" type="date-time"/>
			<field name="categoryDesc" type="textarea"/>
			<field name="catalogSegment1" type="text" required="true"/>
			<field name="catalogSegment2" type="text" required="true"/>
			<field name="catalogSegment3" type="text"/>
			<field name="catalogSegment4" type="text"/>
			<field name="catalogDesc" type="textarea"/>
			<field name="itemMake" type="text" length="36"/>
			<field name="itemModel" type="text" length="36"/>
			<field name="serialNumberControlCode" type="text" length="2"/>
			<field name="concatenatedCatalogSegment" type="text" required="true"/>
			<field name="masterIndicator" type="text" length="36"/>
			<field name="active" type="boolean"/>
			<field name="serializedFlag" type="boolean"/>
			<reference name="operatingUnit" entity-type="OperatingUnit" relation="refers-to"/>
			<field name="assetClassId" type="text"/>
			<display-format>$o.itemName$</display-format>
			<find-queries>
				<query name="quickSearch" select="many">where itemName like :q</query>
			</find-queries>
		</entity>
        <entity name="FacilityTypeCategory" stereotype="managed">
			<reference name="facilityType" entity-type="FacilityType" relation="refers-to" required="false"/>
			<reference name="facilityCategory" entity-type="FacilityCategory" relation="refers-to" required="false"/>
			<field name="leaseTypeTl" type="boolean" required="false"/>
			<field name="leaseTypeLp" type="boolean" required="false"/>
			<field name="leaseTypeCs" type="boolean" required="false"/>
			<field name="leaseTypeOl" type="boolean" required="false"/>
			<field name="programMla" type="boolean" required="false"/>
			<field name="programIpa" type="boolean" required="false"/>
			<field name="programPoa" type="boolean" required="false"/>
			<field name="programDml" type="boolean" required="false"/>
			<field name="programPfsReseller" type="boolean" required="false"/>
			<field name="programBuyDesk" type="boolean" required="false"/>
			<field name="lessorDfs" type="boolean" required="false"/>
			<field name="lessorPfs" type="boolean" required="false"/>
			<field name="lessorDmlpOther" type="boolean" required="false"/>
			<field name="syndicationEligible" type="boolean" required="false"/>
			<field name="sbuLargeEnt" type="boolean" required="false"/>
			<field name="sbuPublic" type="boolean" required="false"/>
			<field name="sbuSmb" type="boolean" required="false"/>
			<field name="hardwareOnly" type="boolean" required="false"/>
			<field name="softwareOnly" type="boolean" required="false"/>
			<field name="hardwareSoftwareOnly" type="boolean" required="false"/>
			<field name="hardwareServicesOnly" type="boolean" required="false"/>
			<field name="softwareServicesOnly" type="boolean" required="false"/>
			<field name="servicesOnly" type="boolean" required="false"/>
			<field name="nonLessorEquipment" type="boolean" required="false"/>
			<field name="quoteReqd" type="boolean" required="false"/>
			<field name="poReqd" type="boolean" required="false"/>
			<field name="creditLimitreqd" type="boolean" required="false"/>
			<field name="deferredPaymentAvail" type="boolean" required="false"/>
			<field name="interimRentInterestApp" type="boolean" required="false"/>
			<field name="residual" type="boolean" required="false"/>
			<field name="earlyBuyoutOption" type="boolean" required="false"/>
			<field name="earlyTerminationOption" type="boolean" required="false"/>
			<field name="extensionPayAvailable" type="boolean" required="false"/>
			<field name="persProptaxmgmtElig" type="boolean" required="false"/>
			<field name="otherMiscBillElig" type="boolean" required="false"/>
			<field name="contractSpecificUccFil" type="boolean" required="false"/>
			<field name="outputPayment" type="boolean" required="false"/>
			<field name="outputRate" type="boolean" required="false"/>
			<field name="outputYield" type="boolean" required="false"/>
			<field name="outputCustEffectiveRate" type="boolean" required="false"/>
			<field name="amortizationAvailableReq" type="boolean" required="false"/>
			<collection name="facTypeCatPrdctTypes" collection-type="list" entity-type="FacTypeCatPrdctType" referred-by="facilityTypeCategory" relation="owner"/>
			<display-format>$o.facilityCategory.name$ - $o.facilityType.name$</display-format>
		</entity>
		<entity name="FacilityType" stereotype="managed">
			<field name="name" type="text"/>
			<field name="key" type="text"/>
			<collection name="facilityTypeCategories" collection-type="list" entity-type="FacilityTypeCategory" referred-by="facilityType" relation="owner"/>
		</entity>
        <entity name="PromoInformation" stereotype="managed">
            <reference name="primeIndices" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRICING_INDICES</param>
                </lookup>
            </reference>
            <reference name="calculationType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CALCULATION_TYPE</param>
                </lookup>
            </reference>
            <field name="primeFactorPct" type="percent"/>
            <reference name="dayCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DAY_CODE</param>
                </lookup>
            </reference>
            <reference name="primeChangeFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRIME_CHANGE_FREQUENCY</param>
                </lookup>
            </reference>
            <field name="noOfMonths" type="integer"/>
            <reference name="alternativeCalendar" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ALTERNATIVE_CALENDAR</param>
                </lookup>
            </reference>
            <field name="anniversaryDttm" type="date-time"/>
            <field name="usePromoRate" type="boolean" required="false"/>
            <reference name="goToType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RATE_TYPE</param>
                </lookup>
            </reference>
            <field name="goToRate" type="percent"/>
            <field name="promotionalExpirationDttm" type="date-time"/>
        </entity>
		<entity name="CreditReqLateCharge" stereotype="managed">
			<field name="lateChargeExempt" type="boolean"/>
			<field name="lateChargePct" type="percent" label="Late Charge Percent"/>
			<field name="lateChargeGracePrd" type="integer" label="Late Charge Grace Period"/>
			<field name="lateChargeMinAmt" type="amount" label="Late Charge Min Amount"/>
			<field name="lateChargeMaxAmt" type="amount" label="Late Charge Max Amount"/>
			<field name="lateChargeFlatFee" type="amount"/>
		</entity>
		<entity name="DocumentPackage" stereotype="managed">
			<reference name="versionStatus" entity-type="AttributeChoice" relation="refers-to" label="Status">
				<lookup>
					<param name="key">VERSION_STATUS</param>
				</lookup>
			</reference>
			<field name="numIndex" type="integer"/>
			<field name="esignatureRqd" type="boolean" label="E-Signature"/>
			<reference name="application" entity-type="Request" relation="refers-to"/>
			<reference name="request" entity-type="Request" relation="refers-to"/>
			<reference name="partner" entity-type="Partner" relation="refers-to"/>
			<reference name="facility" entity-type="Facility" relation="refers-to"/>
			<field name="versionNumber" type="integer" label="Package Version" internal="true"/>
			<field name="packageSize" type="number" label="Size" required="false"/>
			<field name="packageName" type="text" internal="true"/> <!-- required="true" -->
			<field name="packageFileName" type="text" internal="true"/><!-- required="true" -->
			<field name="refNumber" type="auto"/>
			<field name="minorVersion" type="integer"/>
			<field name="documentPackageRepo" type="text"/>
			<!-- Temporary fields added to support UI Start -->
			<reference name="approval" entity-type="Approval" relation="owner"/>
			<field name="selectSigners" type="text"/>
			<field name="uploadedStream" type="binary" ruleTriggerOnEvent="true"/>
			<field name="fileSize" type="integer"/>
			<field name="contentType" type="text" length="100"/>
			<field name="generatedDttm" type="date-time" label="Generated Date and Time"/>
			<reference name="generatedStreamBy" entity-type="User" relation="refers-to"/>
			<reference name="documentGroup" entity-type="DocumentGroup" relation="refers-to"/>
			<!-- Temporary fields added to support UI End -->
			<reference name="documentPackageStatus" entity-type="AttributeChoice" relation="refers-to" label="Status" ><!-- required="true" -->
				<lookup>
					<param name="key">DOCUMENT_STATUS</param>
				</lookup>
			</reference>
			<collection name="documentPackageAssociations" collection-type="list" entity-type="DocumentPackageAssociation" referred-by="documentPackage" relation="owner"/>
			<collection name="documentPublishHistories" collection-type="list" entity-type="DocumentPublishHistory" referred-by="documentPackage" relation="owner"/>
            <collection name="genAndUploadedDoc" collection-type="list" entity-type="DocumentPackageDetail" relation="owner" />
			<feature operation="implements">
				<data>com.thirdpillar.foundation.model.Metafied</data>
			</feature>
		</entity>
		<entity name="DocumentPackageDetail" stereotype="managed">
			<reference name="document" entity-type="Document" relation="refers-to">
				<lookup name="mvel">
                    <param name="expr">thiz.getFilteredDocuments</param>
                </lookup> 
			</reference>
			<field name="orderInpackage" type="integer"/>
			<field name="docDescription" type="derived:text" internal="true"/>
		</entity>
		<entity name="RelationshipSubsetParty" stereotype="managed">
			<reference name="relationshipParty" entity-type="RelationshipParty" relation="refers-to"/>
			<field name="permittedlessee" type="boolean" label="Permitted Lessee"/>
			<field name="entity" type="text" required="true"/>
			<reference name="lead" entity-type="AttributeChoice" relation="refers-to" label="Primary Lessee">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
		</entity>
		<entity name="CreditAppGuarantor" stereotype="managed">
			<field name="aggregateGuaranteeAmt" type="amount"/>
			<field name="refNumber" type="auto"/>
			<field name="legalName" type="text"/>
			<field name="sicCode" type="text"/>
			<field name="primaryName" type="text"/>
			<field name="ssn" type="text"/>
			<field name="legalJurisdiction" type="text"/>
			<field name="ratingScore" type="number"/>
			<field name="exposureAmount" type="amount"/>
			<field name="guaranteeAmount" type="amount"/>
			<field name="guaranteeAmountPct" type="percent"/>
			<field name="cost" type="amount"/>
			<field name="receivables" type="amount"/>
			<field name="recourse" type="text"/>
			<field name="residuals" type="text"/>
			<field name="receivedDttm" type="date-time"/>
			<field name="expiryDttm" type="date-time"/>
			<reference name="creditApp" entity-type="Request" relation="refers-to"/>
			<reference name="party" entity-type="PartyDetail" relation="owner"/>
			<reference name="contactInfo" entity-type="ContactInfo" relation="owner"/>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<reference name="guarantorType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">guarantorType</param>
				</lookup>
			</reference>
		</entity>
		<entity name="Recipient" stereotype="business-entity" extends="PartyDetail">
			<field name="autoSendNotification" type="boolean"/>
			<reference name="correspondenceMethod" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CORRESPONDENCE_METHOD</param>
				</lookup>
			</reference>
			<reference name="correspondenceType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CORRESPONDENCE_TYPE</param>
				</lookup>
			</reference>
			<reference name="notificationType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PARTNER_NOTIFICATION</param>
				</lookup>
			</reference>
			<reference name="contactPoint" entity-type="ContactInfo" relation="owner"/>
			<collection name="documentCategories" collection-type="list" entity-type="DocumentCategory" relation="refers-to"/>
		</entity>
		<entity name="Broker" stereotype="business-entity" extends="PartyDetail">
			<field name="amountToBePaid" type="amount"/>
			<field name="percentageToBePaid" type="percent"/>
			<field name="generatedFundRefNumber" type="auto"/>
			<field name="oklFeeLineId" type="text"/>
			<field name="oklFeeLinkLineId" type="text"/>
			<field name="oklCimvId" type="text"/>
			<field name="oklCplvId" type="text"/>
			<field name="oklLinkCimvId" type="text"/>
		</entity>
		<entity name="UccSummary" stereotype="managed">
			<field name="orderId" type="text" length="36"/>
			<field name="timelyReqFlag" type="boolean"/>
			<field name="state" type="text"/>
			<field name="zipCode" type="text"/>
			<field name="type" type="text"/>
			<field name="sentDttm" type="date-time"/>
			<field name="recordedDttm" type="date-time"/>
			<field name="recordNo" type="text"/>
			<reference name="status" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">UCC_STATUS</param>
				</lookup>
			</reference>
			<field name="uccDiligenzeStatus" type="text"/>
			<field name="attachmentFlag" type="boolean"/>
			<field name="assetNo" type="text"/>
			<field name="collateralStmt" type="text" required="true"/>
			<field name="externalRefId" type="text"/>
			<reference name="collateralStmtId" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">COLLATERAL_STATEMENT_TYPE</param>
				</lookup>
			</reference>
			<field name="lineNumber" type="integer"/>
			<field name="customerName" type="text"/>
			<reference name="creditApp" entity-type="Request" relation="refers-to"/>
			<collection name="uccFilingInfos" collection-type="list" entity-type="UccFilingInfo" referred-by="ucc" relation="owner"/>
			<collection name="uccLeaseInfos" collection-type="list" entity-type="UccLeaseInfo" referred-by="ucc" relation="owner"/>
			<collection name="attachments" collection-type="list" entity-type="Attachment" referred-by="uccSummary" relation="owner"/>
			<collection name="messages" collection-type="list" entity-type="Message" referred-by="uccSummary" relation="owner"/>
		</entity>
		<entity name="BanksTrade" stereotype="managed">
			<field name="name" type="text" label="Bank Name" /><!-- required="true" -->
			<field name="accountName" type="text"/>
			<field name="bankAccountNumber" type="text" /><!-- required="true" -->
			<field name="wiringInstructions" type="textarea"/>
			<field name="referenceDttm" type="date-time"/>
			<field name="referenceInformationFlag" type="boolean"/>
			<field name="businessFlag" type="boolean"/>
			<field name="personalFlag" type="boolean"/>
			<reference name="accountInfo" entity-type="AttributeChoice" relation="refers-to"  label="Account Usage">
				<lookup>
					<param name="key">BANK_ACCOUNT_INFO</param>
				</lookup>
			</reference>
			<field name="authorizedSignerId" type="text" length="36"/>
			<field name="numIndex" type="integer"/>
			<field name="routingNumber" type="text"/>
			<field name="accountOpenedDttm" type="date-time"/>
			<field name="lineOfCredit" type="text"/>
			<field name="presentBalance" type="amount"/>
			<field name="averageBalance" type="amount"/>
			<field name="lineOfCreditAmount" type="amount"/>
			<field name="accountExpOrRenewalDttm" type="date-time"/>
			<reference name="bankCustomerCode" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">BANK_CUSTOMER_CODE</param>
				</lookup>
			</reference>
			<reference name="authSigner2" entity-type="ContactInfo" relation="owner"/>
			<reference name="authSigner1" entity-type="ContactInfo" relation="owner"/>
			<reference name="bankContactInfo" entity-type="ContactInfo" relation="owner"/>
			<reference name="bankTradeType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">BANK_TRADE_TYPE</param>
				</lookup>
			</reference>
			<reference name="contactInfo" entity-type="ContactInfo" relation="owner"/>
			<reference name="authSigner3" entity-type="ContactInfo" relation="owner"/>
			<reference name="accountType" entity-type="AttributeChoice" relation="refers-to" > <!-- required="true" -->
				<lookup>
					<param name="key">BANK_ACCOUNT_TYPE</param>
				</lookup>
			</reference>
			<reference name="contact1" entity-type="ContactInfo" relation="owner"/>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<field name="comments" type="textarea"/>
			<field name="month1DepositAmount" type="amount"/>
			<field name="month2DepositAmount" type="amount"/>
			<field name="month3DepositAmount" type="amount"/>
			<field name="month1" type="integer"/>
			<field name="month2" type="integer"/>
			<field name="month3" type="integer"/>
			<field name="servicingIdentifier" type="text" indexed="true" tags="Header"/>
			<reference name="partner" entity-type="Partner" relation="refers-to"/>
			<collection name="banksTradeContactInfo" entity-type="BanksTradeContactInfo" collection-type="list" referred-by="banksTrade" relation="owner"/>
			<display-format>$o.name$</display-format>
			<find-queries>
				<query name="quickSearch" select="many">where name like :q</query>
			</find-queries>
		</entity>
		<entity name="PartyContact" stereotype="business-entity">
			<field name="primaryContactFlag" type="boolean"/>
			<field name="servicingIdentifier" type="text"/>
			<reference name="contactPoint" entity-type="ContactInfo" relation="owner"/>
			<reference name="financialinstitutionMayContact2" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution May Contact">
				<lookup>
					<param name="key">FINANCIAL_INSTITUTION_MAY_CONTACT</param>
				</lookup>
			</reference>
			<reference name="financialinstitutionMayContact" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution May Contact">
				<lookup>
					<param name="key">FINANCIAL_INSTITUTION_MAY_CONTACT</param>
				</lookup>
			</reference>
		</entity>
		<entity name="CreditAppScoring" stereotype="managed">
			<reference name="creditApp" entity-type="Request" relation="owner"/>
			<field name="evalDttm" type="date-time" required="true" label="Scoring Recommended Decision Date"/>
			<field name="finalDecisionDttm" type="date-time" label="Final Decision Date"/>
			<collection name="scorecardDetails" collection-type="list" entity-type="ScorecardDetails" referred-by="creditAppScoring" relation="owner"/>
			<collection name="facilityRecomms" collection-type="list" entity-type="FacilityRecomm" referred-by="creditAppScoring" relation="owner"/>
		</entity>
		<entity name="DocumentPackageAssociation" stereotype="managed">
			<field name="documentOrder" type="integer"/>
			<reference name="document" entity-type="Document" relation="refers-to"/>
			<reference name="documentPackage" entity-type="DocumentPackage" relation="owner"/>
		</entity>
		<entity name="ContactInfo" stereotype="managed">
			<field name="servicingIdentifier" type="text"/>
			<field name="telephoneNumber" type="text" length="50"/>
			<field name="telephoneNumber2" type="text" length="50"/>
			<field name="telephoneNumber3" type="text" length="50"/>
			<field name="faxNumber" type="text" length="50"/>
			<field name="faxNumber2" type="text" length="50"/>
			<field name="faxNumber3" type="text" length="50"/>
			<field name="email" type="email"/>
			<field name="firstName" type="text"/>
			<field name="middleName" type="text" label="Middle Initial"/>
			<field name="contactName" type="text"/>
			<field name="lastName" type="text"/>
			<field name="suffix" type="text"/>
			<field name="prefix" type="text"/>
			<field name="address1" type="text"/>
			<field name="address2" type="text" label="Address Line2"/>
			<field name="address3" type="text"/>
			<field name="address4" type="text"/>
			<field name="city" type="text"/>
			<field name="county" type="text"/>
			<field name="postalCode" type="text"/>
			<field name="entityId" type="text" length="36"/>
			<field name="type" type="text"/>
			<field name="title" type="text"/>
			<field name="externalRefId" type="text"/>
			<field name="postalCodePlus4" type="text" label="Zip Extn"/>
			<field name="district" type="text"/>
			<field name="poBox" type="text"/>
			<field name="locationCode" type="text"/>
			<field name="validatedFlag" type="boolean"/>
			<field name="identifyingFlag" type="boolean"/>
			<field name="addressOverrideFlag" type="boolean"/>
			<field name="geoCodeForSalesTax" type="text"/>
			<field name="streetNum" type="text"/>
			<field name="streetName" type="text"/>
			<field name="jobFunction" type="text"/>
			<field name="authorizedToESign" type="boolean" label="Authorized To e-sign"/>
			<field name="acceptanceCode" type="text"/>
			<field name="phoneExtn" type="number"/>
			<field name="phoneExtn2" type="number"/>
			<field name="phoneExtn3" type="number"/>
			<field name="faxExtn" type="number"/>
			<field name="faxExtn2" type="number"/>
			<field name="faxExtn3" type="number"/>
			<field name="stateOther" type="text"/>
			<field name="comment" type="textarea"/>
			<reference name="financialinstitutionMayContact" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution May Contact">
				<lookup>
					<param name="key">FINANCIAL_INSTITUTION_MAY_CONTACT</param>
				</lookup>
			</reference>
			<reference name="partyContactType" label="Contact Type" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PARTY_CONTACT_TYPE</param>
				</lookup>
			</reference>
			<reference name="streetType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">STREET_TYPE</param>
				</lookup>
			</reference>
			<reference name="region" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">REGION</param>
				</lookup>
			</reference>
			<reference name="country" entity-type="Country" relation="refers-to"/>
			<reference name="state" entity-type="State" relation="refers-to">
				<!-- <lookup name="mvel">
					<param name="expr">thiz.country.states</param>
				</lookup> -->
			</reference>
			<reference name="countyId" entity-type="County" relation="owner"/>
			<reference name="roleTitle" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">TITLE</param>
				</lookup>
			</reference>
			<collection name="siteUseType" collection-type="list" entity-type="AttributeChoice" relation="refers-to" label="Site Usage">
				<lookup>
					<param name="key">SITE_USE_TYPE</param>
				</lookup>
			</collection>
			<reference name="partner" entity-type="Partner" relation="refers-to"/>
			<reference name="partysite" entity-type="PartySite" relation="refers-to"/>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<collection name="siteUsage" collection-type="list" entity-type="PartySiteUse" relation="refers-to"/>
			<reference name="partyContact" entity-type="derived:Contact" relation="owner"/>
			<collection name="contacts" collection-type="list" entity-type="Contact" relation="owner"/>
			<collection name="contactTypeDetails" collection-type="list" entity-type="ContactTypeDetail" referred-by="contactInfo" relation="owner"/>
		</entity>
		<entity name="DocumentCategory" stereotype="managed">
			<reference name="documentCategoryDetail" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">DOCUMENT_CATEGORY</param>
				</lookup>
			</reference>
			<collection name="documentTypes" collection-type="list" entity-type="DocumentType" relation="refers-to"/>
		</entity>
		<entity name="UccFilingInfo" stereotype="managed">
			<field name="assetDeliveryDttm" type="date-time"/>
			<field name="uccSentDttm" type="date-time"/>
			<field name="uccRecordedDttm" type="date-time"/>
			<field name="uccFilingStateVerifiedFlag" type="boolean"/>
			<field name="ssn" type="text"/>
			<field name="uccType" type="text"/>
			<field name="uccReqdFlag" type="boolean"/>
			<field name="uccWaivedFiling" type="text"/>
			<field name="waivedBy" type="text"/>
			<field name="timelyWaivedBy" type="text"/>
			<field name="timelyFilingRequiredFlag" type="boolean"/>
			<field name="waivedTimelyFiling" type="text"/>
			<field name="lienOrderDttm" type="date-time"/>
			<field name="referenceNumber" type="text"/>
			<field name="uccNumber" type="text"/>
			<field name="titleNumber" type="text"/>
			<field name="uccContinuedDttm" type="date-time"/>
			<field name="searchSatisfied" type="boolean"/>
			<field name="lienSearchOrdered" type="boolean"/>
			<field name="uccContinued" type="boolean"/>
			<field name="lienSearchReceived" type="date-time"/>
			<reference name="stateOfTitle" entity-type="State" relation="refers-to"/>
			<reference name="uccFilingState" entity-type="State" relation="refers-to"/>
			<reference name="securedParty" entity-type="PartyDetail" relation="owner"/>
			<reference name="ucc" entity-type="UccSummary" relation="owner"/>
		</entity>
		<entity name="UccLeaseInfo" stereotype="managed">
			<field name="leaseNo" type="text"/>
			<field name="applicationNo" type="text"/>
			<field name="leaseType" type="text"/>
			<field name="blanketUCCFlag" type="boolean"/>
			<field name="purchaseOption" type="text"/>
			<field name="appBookedAmt" type="amount"/>
			<field name="masterLeaseNo" type="text"/>
			<field name="masterLeaseSchNo" type="text"/>
			<field name="assetLocation" type="text"/>
			<field name="programName" type="text"/>
			<reference name="program" entity-type="Program" relation="refers-to"/>
			<reference name="ucc" entity-type="UccSummary" relation="owner"/>
		</entity>
		<entity name="Attachment" stereotype="managed">
			<field name="attachmenturl" type="text" required="true"/>
			<field name="description" type="text"/>
			<reference name="uccSummary" entity-type="UccSummary" relation="owner"/>
		</entity>
		<entity name="Message" stereotype="managed">
			<field name="validationlevel" type="text" required="true"/>
			<field name="validationMessage" type="text" required="true"/>
			<reference name="uccSummary" entity-type="UccSummary" relation="owner"/>
		</entity>
		<entity name="BanksTradeContactInfo" stereotype="managed">
			<reference name="partner" entity-type="Partner" relation="refers-to"/>
			<reference name="bankAndTrade" entity-type="BankAndTrade" relation="refers-to"/>
			<reference name="banksTrade" entity-type="BanksTrade" relation="refers-to"/>
			<reference name="contactInfo" entity-type="ContactInfo" relation="owner"/>
			<field name="authorisedSignerFirstName" type="text"/>
			<field name="authorisedSignerLastName" type="text"/>
			<display-format>$o.contactInfo.firstName$ $o.contactInfo.lastName$</display-format>
		</entity>
		<entity name="RiskGrade" stereotype="managed">
			<field name="numIndex" type="integer"/>
			<field name="asOfDate" type="date-time"/>
			<field name="riskValue" type="percent"/>
			<field name="gradeExplanation" type="text"/>
			<reference name="baseGrade" entity-type="AttributeChoice" relation="refers-to" internal="true">
				<lookup>
					<param name="key">FINAL_PD_GRADE</param>
				</lookup>
			</reference>
			<reference name="baseGradeMethod" entity-type="AttributeChoice" relation="refers-to" internal="true">
				<lookup>
					<param name="key">BASE_GRADE_METHOD</param>
				</lookup>
			</reference>
			<reference name="gradeType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">GRADE_TYPE</param>
				</lookup>
			</reference>
			<reference name="pdGrade" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FINAL_PD_GRADE</param>
				</lookup>
			</reference>
			<reference name="derivationMethod" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">DERIVATION_METHOD</param>
				</lookup>
			</reference>
			<reference name="outlook" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RISK_OUTLOOK</param>
				</lookup>
			</reference>
			<reference name="partyDetail" entity-type="PartyDetail" relation="refers-to"/>
			<reference name="enteredBy" entity-type="User" relation="refers-to"/>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<feature operation="implements">
				<data>com.thirdpillar.foundation.model.Metafied</data>
			</feature>
		</entity>
		<entity name="RiskDebtRating" stereotype="managed">
			<field name="numIndex" type="integer"/>
			<field name="asOfDate" type="date-time"/>
			<reference name="source" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">DEBT_RATING_SOURCE</param>
				</lookup>
			</reference>
			<reference name="gradeValue" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">DEBT_RATING</param>
				</lookup>
				<filters>
					<filter triggerExpr="thiz.source !=null &amp;&amp; thiz.source.key =='DEBT_RATING_SOURCE_SANDP'" expr="entity.key.startsWith('DEBT_RATING_SP')"/>
					<filter triggerExpr="thiz.source !=null &amp;&amp; thiz.source.key =='DEBT_RATING_SOURCE_MOODY'" expr="entity.key.startsWith('DEBT_RATING_MD')"/>
				</filters>
			</reference>
			<reference name="partyDetail" entity-type="PartyDetail" relation="refers-to"/>
			<reference name="enteredBy" entity-type="User" relation="refers-to"/>
			<feature operation="implements">
				<data>com.thirdpillar.foundation.model.Metafied</data>
			</feature>
		</entity>
		<entity name="PartyBackgroundInfo" stereotype="managed">
			<field name="industrySummary" type="textarea"/>
			<reference name="industryPosition" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">INDUSTRY_POSITION</param>
				</lookup>
			</reference>
			<field name="managementDiscussion" type="textarea"/>
			<field name="employeeLaborRelations" type="textarea" label="Employee/Labor Relations"/>
			<field name="partySummary" type="textarea" label="Summary of Customer"/>
			<field name="ownershipDetail" type="textarea"/>
			<field name="anyOtherCreditAmt" type="textarea"/>
			<field name="partyDetailedDescription" type="textarea" label="Detailed Description of Customer"/>
			<reference name="payHistory" entity-type="AttributeChoice" relation="refers-to" label="DFS Pay History">
				<lookup>
					<param name="key">PAY_HISTORY</param>
				</lookup>
			</reference>
			<field name="payHistoryDiscussion" type="textarea" label="DFS Pay History Discussion"/>
			<field name="paydex" type="text"/>
			<field name="highTrade" type="number"/>
			<field name="noOfTrades" type="integer" label="Number of Trades"/>
			<field name="anyOtherCreditComments" type="textarea"/>
			<reference name="relationship" entity-type="Relationship" relation="refers-to"/>
		</entity>
		<entity name="PartyMatchDetail" stereotype="managed">
			<field name="matchedFlag" type="boolean"/>
			<field name="matchCandidateId" type="text"/>
			<field name="matchPattern" type="text"/>
			<field name="recordType" type="text"/>
			<field name="recordKey" type="text"/>
			<field name="matchedBy" type="text"/>
			<field name="matchedRuleId" type="text"/>
			<field name="matchedConfidenceLevel" type="text"/>
		</entity>
		<entity name="PartyDetailFinAnlysis" stereotype="managed">
			<field name="strengths" type="textarea"/>
			<field name="weaknesses" type="textarea"/>
			<field name="customerFinancialSummary" type="textarea" label="Customer's Financial Summary"/>
			<field name="detailedFinAnalysis" type="textarea" label="Detailed Financial Analysis"/>
		</entity>
		<entity name="PartyDemographicInfo" stereotype="managed">
			<field name="demoGraphics" type="textarea" label="Demographics"/>
			<field name="enrollmentSummary" type="textarea"/>
			<field name="currentFiscalYearEnd" type="date-time"/>
			<field name="cyEnrollment" label="CY Enrollment" type="text"/>
			<field name="cyEnrollment_1" label="CY-1 Enrollment" type="text"/>
			<field name="cyEnrollment_2" label="CY-2 Enrollment" type="text"/>
			<field name="cyEnrollment_3" label="CY-3 Enrollment" type="text"/>
			<field name="cyEnrollment_4" label="CY-4 Enrollment" type="text"/>
		</entity>
		<entity name="PartyDetailQuestionaire" stereotype="managed">
			<reference name="partyDetail" entity-type="PartyDetail" relation="refers-to"/>
			<reference name="question" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PARTY_BUSINESS_QUESTIONNAIRE</param>
				</lookup>
				<filters>
					<filter expr="entity.key == 'PARTY_BUSINESS_QUESTIONNAIRE_IS_PERMISSION_TO_PULL_CREDIT_REPORT'"/>
				</filters>
			</reference>
			<reference name="answer" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
		</entity>
		<entity name="MoodyPartyFinancialInfo" stereotype="managed">
			<field name="partyNameFromMoody" type="text" required="false"/>
			<field name="city" type="text"/>
			<reference name="state" entity-type="State" relation="refers-to"/>
			<field name="postalCode" type="text"/>
			<field name="lastStatementDttm" type="date-time"/>
			<!-- to be deleted
			<reference name="application" entity-type="Request" relation="refers-to" required="true"/>
			 -->
			<field name="mfaid" type="text"/>
			<field name="gfcId" type="text"/>
			<field name="linkedFlag" type="boolean"/>
			<reference name="sourceCurrency" entity-type="Currency" relation="refers-to"/>
			<field name="statementDttm" type="date-time"/>
			<reference name="industryModel" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">INDUSTRY_MODEL</param>
				</lookup>
			</reference>
			<reference name="financialStatememtType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FINANCIAL_STMT_TYPE</param>
				</lookup>
			</reference>
			<reference name="template" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">TEMPLATE</param>
				</lookup>
			</reference>
			<reference name="useFinancialsFrom" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">USE_FINANCIALS_FROM</param>
				</lookup>
			</reference>
			<field name="financialSummary" type="binary"/>
			<reference name="moodyPartyRiskSummary" entity-type="MoodyPartyRiskSummary" relation="owner"/>
			<!-- TO BE DELETED 
			<collection name="partyMoodyFinancialAssocs" collection-type="list" entity-type="PartyMoodyFinancialAssoc" referred-by="moodyPartyFinancialInfo" relation="owner"/>
			 -->
			<collection name="moodyPartyFinancialDets" collection-type="list" entity-type="MoodyPartyFinancialDet" referred-by="moodyPartyFinancialInfo" relation="owner"/>
			<reference name="partDetail" entity-type="PartyDetail" relation="refers-to"/>
		</entity>
		<entity name="PartySiteUse" stereotype="managed">
			<field name="activeFlag" type="boolean"/>
			<field name="primPerFlag" type="boolean"/>
			<field name="tcaSiteUseId" type="text" length="36"/>
			<field name="tcaAcctSiteUseId" type="text" length="36"/>
			<reference name="siteUseType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SITE_USE_TYPE</param>
				</lookup>
			</reference>
		</entity>
		<entity name="ContactTypeDetail" stereotype="managed">
			<reference name="contactInfo" entity-type="ContactInfo" relation="owner"/>
			<reference name="contactType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">COMMUNICATION_TYPE</param>
				</lookup>
			</reference>
			<field name="countryCode" type="text" length="50"/>
			<field name="areaCode" type="text" length="50"/>
			<field name="value" type="text"/>
			<field name="extension" type="text" length="50"/>
			<reference name="partyContactDetail" entity-type="PartyContactDetail" relation="owner"/>
			<reference name="partyDetail" entity-type="PartyDetail" relation="owner"/>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
		</entity>
		<entity name="MoodyPartyRiskSummary" stereotype="managed">
			<reference name="orrOverridenReason" entity-type="CommentGroup" relation="owner" required="true"/>
			<reference name="scorecardMethod" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SCORECARD_METHOD</param>
				</lookup>
			</reference>
			<field name="subgradeAdjustment" type="text" length="20"/>
			<field name="baselineObligorRR" type="text" length="20"/>
			<field name="yearFinancialBanking" type="number"/>
			<field name="overallFinancialBanking" type="number"/>
			<field name="preQualitativeRating" type="text" length="36"/>
			<field name="drmBaselineObligorRR" type="text"/>
			<field name="approvedObligorRR" type="text"/>
			<field name="speqPreQualitativeRating" type="text" length="20"/>
			<field name="speqDrmBaselineObligorRR" type="text" length="20"/>
			<reference name="moodyPartyFinancialDet" entity-type="MoodyPartyFinancialDet" relation="owner" required="true"/>
		</entity>
		<entity name="MoodyPartyFinancialDet" stereotype="managed">
			<reference name="moodyPartyFinancialInfo" entity-type="MoodyPartyFinancialInfo" relation="refers-to" required="true"/>
			<field name="statementDttm" type="date-time"/>
			<field name="periodInMonths" type="integer"/>
			<reference name="auditMethod" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">auditMethod</param>
				</lookup>
			</reference>
			<field name="value" type="amount"/>
			<field name="cashTaxesExpenses" type="amount"/>
			<field name="unfinanceCapez" type="amount"/>
			<field name="oneYearPd" type="number"/>
			<field name="oneYearDefaultRateMapping" type="text"/>
			<field name="type" type="text"/>
			<field name="source" type="text"/>
			<field name="currency" type="text"/>
			<field name="scale" type="text"/>
			<field name="template" type="text"/>
			<reference name="pvtSecNonBank" entity-type="TemplatePvtSecNonBank" relation="owner"/>
			<reference name="k12Slg" entity-type="TemplateK12Slg" relation="owner"/>
			<reference name="hiEdNonProfit" entity-type="TemplateHiEdNonProfit" relation="owner"/>
			<reference name="federal" entity-type="TemplateFederal" relation="owner"/>
			<collection name="moodyPartyRiskSummaries" collection-type="list" entity-type="MoodyPartyRiskSummary" referred-by="moodyPartyFinancialDet" relation="owner"/>
		</entity>
		<entity name="AgreementRequest" stereotype="managed">
			<reference name="requestNumber" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">REQUEST_NUMBER</param>
				</lookup>
			</reference>
			<field name="requestType" type="text"/>
			<!--
				<reference name="requestType" entity-type="AttributeChoice" relation="refers-to"> <lookup> <param name="key">REQUEST_TYPE</param> </lookup> </reference>
			-->
		</entity>
		<entity name="PartyContactDetail" stereotype="managed">
			<field name="numIndex" type="integer"/>
			<reference name="partyDetail" entity-type="PartyDetail" relation="owner"/>
			<field name="fullName" type="text"/>
			<reference name="financialinstitutionMayContact" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution May Contact">
				<lookup>
					<param name="key">FINANCIAL_INSTITUTION_MAY_CONTACT</param>
				</lookup>
			</reference>
			<reference name="title" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PARTY_TITLE</param>
				</lookup>
			</reference>
			<collection name="contactTypeDetails" collection-type="list" entity-type="ContactTypeDetail" referred-by="partyContactDetail" relation="owner"/>
		</entity>
		<entity name="PartyAsset" stereotype="managed">
			<reference name="asset" entity-type="Asset" relation="refers-to"/>
			<reference name="party" entity-type="PartyDetail" relation="refers-to"/>
		</entity>
		<entity name="CreditReqTermCharge" stereotype="managed" label="Credit Request Term Changes">
			<reference name="charge" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CHARGE</param>
				</lookup>
			</reference>
			<reference name="concession" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CONCESSION</param>
				</lookup>
			</reference>
			<field name="amount" type="amount"/>
			<reference name="requestTermCondition" entity-type="RequestTermCondition" relation="refers-to"/>
		</entity>
		<entity name="CreditAppRelatedPartner" stereotype="managed">
			<field name="numIndex" type="integer"/>
			<reference name="creditApp" entity-type="Request" relation="refers-to"/>
			<reference name="partner" entity-type="Partner" relation="refers-to" required="true"/>
			<reference name="partnerType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">partnerType</param>
				</lookup>
			</reference>
		</entity>
		<entity name="County" stereotype="managed">
			<field name="name" type="text"/>
			<field name="afsCode" type="text" length="128"/>
			<reference name="state" entity-type="State" relation="refers-to"/>
		</entity>
		
		<entity name="TemplateK12Slg" stereotype="managed">
			<reference name="fundSelectedForRepayment" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FUND_FOR_REPAYMENT</param>
				</lookup>
			</reference>
			<reference name="scale" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SCALE</param>
				</lookup>
			</reference>
			<field name="statementDttm" type="date-time"/>
			<field name="periods" type="integer"/>
			<reference name="auditMethod" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">auditMethod</param>
				</lookup>
			</reference>
			<reference name="statememtType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FINANCIAL_STMT_TYPE</param>
				</lookup>
			</reference>
		    <reference name="currency" entity-type="Currency" relation="refers-to"/>
			<field name="localSources" type="amount"/>
			<field name="stateSources" type="amount"/>
			<field name="federalSources" type="amount"/>
			<field name="otherSources" type="amount"/>
			<field name="totalFundRevenues" type="amount"/>
			<field name="instructAdminExpenses" type="amount"/>
			<field name="supportServicesExpenses" type="amount"/>
			<field name="otherExpenses" type="amount"/>
			<field name="totalExpenses" type="amount"/>
			<field name="revenueOverUnderExpenses" type="amount"/>
			<field name="operatingTransfersInOut" type="amount"/>
			<field name="otherFinancingSources" type="amount"/>
			<field name="surplusDeficitToFund" type="amount"/>
			<field name="cashAndCashEquivalents" type="amount"/>
			<field name="totalFundAssets" type="amount"/>
			<field name="shortTermNotesPayable" type="amount"/>
			<field name="totalFundLiabilities" type="amount"/>
			<field name="unreservedFundBalance" type="amount"/>
			<field name="totalFundBalance" type="amount"/>
			<field name="unreservedFundBalPercent" type="percent"/>
			<field name="cashEquiToFundLiability" type="percent"/>
			<field name="bankRelationship" type="textarea"/>
			<field name="ltdMaturitiesCyPlus1" type="amount"/>
			<field name="ltdMaturitiesCyPlus2" type="amount"/>
			<field name="ltdMaturitiesCyPlus3" type="amount"/>
			<field name="ltdMaturitiesCyPlus4" type="amount"/>
			<field name="ltdMaturitiesCyPlus5" type="amount"/>			
		</entity>
		<entity name="TemplateHiEdNonProfit" stereotype="managed">		
			<field name="financialsFrom"  type="name"/>
			<reference name="scale" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SCALE</param>
				</lookup>
			</reference>
			<field name="statementDttm"  type="date-time"/>
			<field name="periods"  type="integer"/>
			<reference name="auditMethod" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">auditMethod</param>
				</lookup>
			</reference>
			<reference name="statememtType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FINANCIAL_STMT_TYPE</param>
				</lookup>
			</reference>
			<reference name="currency" entity-type="Currency" relation="refers-to"/>
			<field name="tuitionAndFeeRevenue"  type="amount"/>
			<field name="otherOperatingRevenue"  type="amount"/>
			<field name="totalOperatingRevenue"  type="amount"/>
			<field name="instructAdminExpenses"  type="amount"/>
			<field name="supportServicesExpenses"  type="amount"/>
			<field name="otherExpenses"  type="amount"/>
			<field name="totalOperatingExpenses"  type="amount"/>
			<field name="netOperatingSurplusDeficit"  type="amount"/>
			<field name="nonOperatingRevenue"  type="amount"/>
			<field name="totalchangeInNetAssets"  type="amount"/>
			<field name="cashAndCashEquivalents"  type="amount"/>
			<field name="totalAssets"  type="amount"/>
			<field name="cpltd"  type="amount"/>
			<field name="ltDebt"  type="amount"/>
			<field name="totalLiabilities"  type="amount"/>
			<field name="unrestrictedNetAssets"  type="amount"/>
			<field name="unrestrictAssetsOperateExp"  type="text"/>
			<field name="bankRelationship" type="textarea"/>
			<field name="ltdMaturitiesCyPlus1" type="amount"/>
			<field name="ltdMaturitiesCyPlus2" type="amount"/>
			<field name="ltdMaturitiesCyPlus3" type="amount"/>
			<field name="ltdMaturitiesCyPlus4" type="amount"/>
			<field name="ltdMaturitiesCyPlus5" type="amount"/>	
		</entity>
		<entity name="TemplateFederal" stereotype="managed">		
			<field name="financialsFrom"  type="name"/>
			<reference name="scale" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SCALE</param>
				</lookup>
			</reference>
			<field name="statementDttm"  type="date-time"/>
			<field name="periods"  type="integer"/>
			<reference name="auditMethod" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">auditMethod</param>
				</lookup>
			</reference>
			<reference name="statememtType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FINANCIAL_STMT_TYPE</param>
				</lookup>
			</reference>
			<reference name="currency" entity-type="Currency" relation="refers-to"/>
			<field name="beginningBalance"  type="amount"/>
			<field name="budgetaryFinancingSources"  type="amount"/>
			<field name="otherFinancingSources"  type="amount"/>
			<field name="netCostOfOperations"  type="amount"/>
			<field name="netChange"  type="amount"/>
			<field name="endingBalance"  type="amount"/>
			<field name="fundBalanceTreasuryCash"  type="amount"/>
			<field name="totalAssetsDeptAgency"  type="amount"/>
			<field name="totalLiabilityOfDeptAgency"  type="amount"/>
			<field name="netPosition"  type="amount"/>
			<field name="bankRelationship" type="textarea"/>
			<field name="ltdMaturitiesCyPlus1" type="amount"/>
			<field name="ltdMaturitiesCyPlus2" type="amount"/>
			<field name="ltdMaturitiesCyPlus3" type="amount"/>
			<field name="ltdMaturitiesCyPlus4" type="amount"/>
			<field name="ltdMaturitiesCyPlus5" type="amount"/>	
		</entity>
		<entity name="DocumentClassCategory" stereotype="managed">
			<reference name="documentClass" entity-type="DocumentClass" relation="owner" required="true"/>
			<reference name="documentCategory" entity-type="DocumentCategory" relation="owner" required="true"/>
			<collection name="documentTypes" collection-type="list" entity-type="DocumentType" relation="refers-to"/>
		</entity>
		<entity name="DocumentClass" stereotype="managed">
			<reference name="documentClassDetail" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">DOCUMENT_CLASS</param>
				</lookup>
			</reference>
			<collection name="documentClassCategories" collection-type="list" entity-type="DocumentClassCategory" referred-by="documentClass" relation="owner"/>
		</entity>
		<entity name="TemplatePvtSecNonBank" stereotype="managed">
			<field name="financialsFrom" type="text"/>
			<field name="scale" type="text"/>
			<field name="statementDttm" type="date-time"/>
			<field name="periods" type="integer"/>
			<reference name="auditMethod" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">auditMethod</param>
				</lookup>
			</reference>
			
			<reference name="statememtType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FINANCIAL_STMT_TYPE</param>
				</lookup>
			</reference>
			<reference name="currency" entity-type="Currency" relation="refers-to"/>
			<field name="sales" type="amount"/>
			<field name="operatingProfit" type="amount"/>
			<field name="netProfit" type="amount"/>
			<field name="depreAndAmortizationExp" type="amount"/>
			<field name="otherNonCashExp" type="amount"/>
			<field name="interestExp" type="amount"/>
			<field name="cashAndEquivalents" type="amount"/>
			<field name="currentAssets" type="amount"/>
			<field name="totalAssets" type="amount"/>
			<field name="currentLiabilities" type="amount"/>
			<field name="cpLtd" type="amount"/>
			<field name="cpSubDebt" type="amount"/>
			<field name="stDebt" type="amount"/>
			<field name="ltDebt" type="amount"/>
			<field name="totalLiabilities" type="amount"/>
			<field name="netWorth" type="amount"/>
			<field name="intangibleAssets" type="amount"/>
			<field name="currentRatio" type="amount"/>
			<field name="ebitda" type="amount"/>
			<field name="debtToTnw" type="amount"/>
			<field name="debtAmortization" type="amount"/>
			<field name="annualDebtServiceCoverage" type="amount"/>
			<field name="netCashFromOptActivities" type="amount"/>
			<field name="capEx" type="amount"/>
			<field name="dividends" type="amount"/>
			<field name="freeCashFlow" type="amount"/>
			<field name="netFreeCashFlow" type="amount"/>
			<field name="firstYearEdf" type="text"/>
			<field name="bankRelationship" type="textarea"/>
			<field name="ltdMaturitiesCyPlus1" type="amount"/>
			<field name="ltdMaturitiesCyPlus2" type="amount"/>
			<field name="ltdMaturitiesCyPlus3" type="amount"/>
			<field name="ltdMaturitiesCyPlus4" type="amount"/>
			<field name="ltdMaturitiesCyPlus5" type="amount"/>
		</entity>
		<entity name="DocumentType" stereotype="configuration">
			<field name="internal" type="boolean"/>
			<field name="generatable" type="boolean"/>
			<field name="uploadable" type="boolean"/>
			<field name="receivable" type="boolean"/>
			<field name="automatedDocumentId" type="text" length="50"/>
			<reference name="documentTypeDetail" entity-type="AttributeChoice" relation="refers-to" required="true">
				<lookup>
					<param name="key">DOCUMENT_TYPE</param>
				</lookup>
			</reference>
			<collection name="documentCategories" collection-type="list" entity-type="DocumentCategory" referred-by="documentTypes" relation="refers-to"/>
			<collection name="documentClassCategories" collection-type="list" entity-type="DocumentClassCategory" referred-by="documentTypes" relation="refers-to"/>
		</entity>
		<entity name="RiskGradeEDF" stereotype="managed">
			<field name="numIndex" type="integer"/>
			<field name="asOfDate" type="date-time"/>
			<field name="riskValue" type="percent"/>
			<reference name="riskModel" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">MOODY_KMV_EDF_SOURCE</param>
				</lookup>
			</reference>
			<reference name="riskType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RISK_TYPE</param>
				</lookup>
			</reference>
			<reference name="partyDetail" entity-type="PartyDetail" relation="refers-to"/>
			<reference name="enteredBy" entity-type="User" relation="refers-to"/>
			<feature operation="implements">
				<data>com.thirdpillar.foundation.model.Metafied</data>
			</feature>
		</entity>
		<entity name="RiskLGDGrade" stereotype="managed">
			<field name="numIndex" type="integer"/>
			<field name="asOfDate" type="date-time"/>
			<field name="lgdGradeExplanation" type="text"/>
			<reference name="baseGrade" entity-type="AttributeChoice" relation="refers-to" internal="true">
				<lookup>
					<param name="key">FINAL_LGD_GRADE</param>
				</lookup>
			</reference>
			<reference name="finalLGDGrade" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FINAL_LGD_GRADE</param>
				</lookup>
			</reference>
			<reference name="partyDetail" entity-type="PartyDetail" relation="refers-to"/>
			<reference name="enteredBy" entity-type="User" relation="refers-to"/>
			<feature operation="implements">
				<data>com.thirdpillar.foundation.model.Metafied</data>
			</feature>
		</entity>
		<entity name="PartySite" stereotype="managed">
			<field name="numIndex" type="integer"/>
			<field name="siteName" type="text" length="1020" required="false"/>
			<field name="activeFlag" type="boolean"/>
			<field name="primarySiteFlag" type="boolean"/>
			<field name="inactivatedDttm" type="date-time" label="Inactive Date"/>
			<field name="inactiveReason" type="text" length="1020"/>
			<field name="refNumber" type="auto" internal="true"/>
			<field name="notificationFlag" type="boolean"/>
			<field name="contactsSameasPrimaryFlag" type="boolean"/>
			<field name="apVendorSiteId" type="text" length="36"/>
			<field name="tcaSiteId" type="text" length="36"/>
			<field name="siteNumber" type="text" length="36"/>
			<field name="extSiteNumber" type="text" length="36"/>
			<field name="tcaAcctSiteId" type="text" length="36"/>
			
			<reference name="active" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<reference name="request" entity-type="Request" relation="refers-to"/>
			<reference name="partyDetail" entity-type="PartyDetail" relation="refers-to"/>
			<reference name="masterAggRequest" entity-type="CreditMasterAggRequest" relation="refers-to"/>
			<collection name="contactInfo" collection-type="list" entity-type="ContactInfo" relation="owner"/>
			<reference name="agreementRequest" entity-type="AgreementRequest" relation="owner"/>
			<reference name="partyContactInfo" entity-type="derived:ContactInfo" relation="owner"/>
			<reference name="mainSiteInfo" entity-type="ContactInfo" relation="owner"/>
			<collection name="partyExtIdentifiers" collection-type="list" entity-type="PartyExtIdentifier" referred-by="complianceDetail" relation="owner"/>
			<collection name="contacts" collection-type="list" entity-type="PartyContact" relation="owner"/>
			<collection name="correspondents" collection-type="list" entity-type="Recipient" relation="owner"/>
			
			<collection name="partySiteExtIdentifiers" collection-type="list" entity-type="PartyExtIdentifier" referred-by="partySite" relation="owner"/>
			<collection name="orders" collection-type="list" entity-type="Order" referred-by="partySite" relation="owner"/>
			<display-format>$o.siteName$</display-format>
			<quick-search>where siteName like :q</quick-search>
		</entity>
		<entity name="PartyBankAccount" stereotype="managed">
			<field name="numIndex" type="integer"/>
			<field name="referenceSentDttm" type="date-time"/>
			<field name="referenceCompleteDttm" type="date-time"/>
			<field name="highCredit" type="amount"/>
			<field name="securedFlag" type="boolean"/>
			<field name="collateral" type="text" length="1020"/>
			<field name="invoiceTerm" type="text" length="1020"/>
			<field name="commercialAccountFlag" type="boolean"/>
			<field name="authorizedDealerFlag" type="boolean"/>
			<field name="productPurchased" type="text" length="1020"/>
			<field name="numberOfOverdrafts" type="integer"/>
			<field name="numberOfNsf" type="integer"/>
			<field name="primary" type="boolean"/>
			<reference name="paymentHistory" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PARTNER_PAYMENT_HISTORY</param>
				</lookup>
			</reference>
			<reference name="rating" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PARTNER_RATING</param>
				</lookup>
			</reference>
			<reference name="referenceType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">referenceType</param>
				</lookup>
			</reference>
			<reference name="referenceSubType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">referenceSubType</param>
				</lookup>
			</reference>
			<reference name="referenceCompletedBy" entity-type="User" relation="refers-to"/>
			<reference name="banksTrades" entity-type="BanksTrade" relation="owner"/>
			<reference name="partyDetail" entity-type="PartyDetail" relation="refers-to"/>
		</entity>
		<entity name="PartyClassification" stereotype="managed">
			<field name="tcaClassificationId" type="text"/>
			<field name="startDttm" type="date-time"/>
			<field name="endDttm" type="date-time"/>
			<field name="primaryFlag" type="boolean"/>
			<reference name="partyDetail" entity-type="PartyDetail" relation="refers-to"/>
			<reference name="category" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PARTY_CLASS_CATEGORY</param>
				</lookup>
			</reference>
			<reference name="code" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PARTY_CLASS_CATEGORY_CODE</param>
				</lookup>
			</reference>
			<reference name="status" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">ACTIVE_INACTIVE_STATUS</param>
				</lookup>
			</reference>
		</entity>
		<entity name="PartyDetail" stereotype="business-entity" label="Customer">
			<filter expr="entity.partyDetailType != null"/>
			<field name="cgrqrdForPrmitdLesses" type="boolean" label="CG Required for Permitted Lessees"/>
			<field name="rfaData" type="text"/>
			<field name="gfp" type="text" length="50"/>
			<field name="cag" type="text" length="50"/>
			<field name="originalParty" type="boolean"/>
			<field name="firstName" type="text"/>
			<field name="refNumber" type="auto"/>
			<field name="licenseYear" type="integer"/>
			<field name="bankNumber" type="text" length="50"/>
			<field name="middleName" type="text"/>
			<field name="lastName" type="text"/>
			<field name="legalName" type="text" label="Customer Name"/>
			<field name="nameSuffix" type="text"/>
			<field name="gender" type="text" length="30"/>
			<field name="maritalStatus" type="text" length="30"/>
			<field name="birthDttm" type="date-time" label="Date of Birth" required="false"/>
			<field name="naicsCode" type="text"/>
			<field name="businessStartDttm" type="date-time"/>
			<field name="taxExemptFlag" type="boolean"/>
			<field name="countryLegalIncorporation" type="text" length="1020"/>
			<field name="countryContractRelationship" type="text" length="1020"/>
			<field name="japaneseCompanyFlag" type="boolean"/>
			<field name="creditHoldFlag" type="boolean"/>
			<field name="applicationRequireFlag" type="boolean"/>
			<field name="delistedFlag" type="boolean"/>
			<field name="subsidiaryFlag" type="boolean"/>
			<field name="freezeFlag" type="boolean"/>
			<field name="healthcareCompanyFlag" type="boolean"/>
			<field name="licenseNumber" type="text" length="1020"/>
			<field name="licenseDttm" type="date-time"/>
			<field name="sourceSystem" type="text"/>
			<field name="tcaAccountId" type="text" length="1020"/>
			<field name="tcaPartyNumber" type="text" length="1020"/>
			<field name="tcaAccountNumber" type="text" length="1020"/>
			<field name="tcaId" type="text" length="1020"/>
			<field name="icvId" type="text" length="1020"/>
			<field name="apVendorId" type="text" length="1020"/>
			<field name="apVendorNumber" type="text" length="1020"/>
			<field name="partnerClientNum" type="text" length="1020"/>
			<field name="otherOrganizationType" type="text"/>
			<field name="dunsNum" type="number" />
			<field name="experianFileNumber" type="text" length="36"/>
			<field name="organizationName" type="text"/>
			<field name="otherLegalEntityType" type="text"/>
			<field name="partySinceDttm" type="date-time" label="DFS Customer Since"/>
			<field name="organizationNumber" type="text"/>
			<field name="creditApprovalAmt" type="amount"/>
			<field name="creditApprovalExpDate" type="date-time"/>
			<field name="finalPDGradeAsOfDate" type="date-time"/>
			<field name="ownershipPct" type="percent" label="Ownership %"/>
			<field name="moodyKmvEdf" type="text" label="Moody's KMV EDF"/>
			<field name="mobileNumber" type="text"/>
			<field name="emailAddress" type="email"/>
			<field name="customerWebsiteAddress" type="text"/>
			<!-- Convenience method start -->
			<collection name="relationships" collection-type="derived:list" entity-type="Relationship" relation="owner"/>
			<collection name="facilities" collection-type="derived:list" entity-type="Facility" relation="owner"/>
			<field name="state" type="derived:text"/>
			<field name="financialinstitutionCustomerNumber1" type="derived:text" label="Financial Institution Customer Number"/>
			<field name="financialinstitutionCustomerNumber" type="derived:text" label="Financial Institution Customer Number"/>
			<field name="customerName" type="derived:text"/>
			<reference name="finalRiskGrade" entity-type="derived:RiskGrade" relation="refers-to"/>
			<reference name="latestPublicDebtRating" entity-type="derived:RiskDebtRating" relation="refers-to"/>
			<collection name="allRiskDebtRateSorted" collection-type="derived:list" entity-type="RiskDebtRating" relation="refers-to"/>
			<collection name="allRiskGradeEDFSorted" collection-type="derived:list" entity-type="RiskGradeEDF" relation="refers-to"/>
			<collection name="allRiskLGDGradeSorted" collection-type="derived:list" entity-type="RiskLGDGrade" relation="refers-to"/>
			<field name="country" type="derived:text"/>
			<field name="city" type="derived:text"/>
			<field name="taxIdValue" type="derived:text"/>
			<field name="primaryContactName" type="derived:text"/>
			<reference name="taxID" entity-type="AttributeChoice" relation="refers-to" label="Tax ID">
				<lookup>
					<param name="key">TAX_ID</param>
				</lookup>
			</reference>
			<reference name="legalEntityType" entity-type="AttributeChoice" relation="refers-to" label="Legal Entity Type" required="false">
				<lookup>
					<param name="key">LEGAL_ENTITY_TYPE</param>
				</lookup>
				<filters>
					<filter triggerExpr="thiz.partyDetailType.key =='CUSTOMER_TYPE_INDIVIDUAL'" expr="entity.key == 'LEGAL_ENTITY_TYPE_SOLE_PROPRIETORSHIP'"/>
					<filter triggerExpr="thiz.partyDetailType.key =='CUSTOMER_TYPE_NON_INDIVIDUAL'" expr="entity.key != 'LEGAL_ENTITY_TYPE_SOLE_PROPRIETORSHIP'"/>
				</filters>
			</reference>
			<field name="taxIDNumber" type="text" label="Tax ID Number" required="false"/>
			<field name="relationshipName" type="text"/>
			<reference name="moodyKmvEdfSource" entity-type="AttributeChoice" relation="refers-to" label="Moody's KMV EDF Source">
				<lookup>
					<param name="key">MOODY_KMV_EDF_SOURCE</param>
				</lookup>
			</reference>
			<field name="moodyKmvEdfAsOfDate" type="date-time" label="Moody's KMV EDF As of Date"/>
			<reference name="finalPDGrade" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FINAL_PD_GRADE</param>
				</lookup>
			</reference>
			<reference name="lgdGrade" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">LGD_GRADE</param>
				</lookup>
			</reference>
			<reference name="publicDebtRatingSource" entity-type="AttributeChoice" relation="refers-to" label="Valid Public Debt Rating Source">
				<lookup>
					<param name="key">DEBT_RATING_SOURCE</param>
				</lookup>
			</reference>
			<reference name="publicDebtRating" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">DEBT_RATING</param>
				</lookup>
			</reference>
			<field name="publicDebtRatingDttm" type="date-time" label="Public Debt Rating As of Date"/>
			<reference name="partyBackgroundInfo" entity-type="PartyBackgroundInfo" relation="owner"/>
			<reference name="hqCountry" entity-type="Country" relation="refers-to" label="HQ Country" required="false"/>
			<reference name="hqState" entity-type="State" relation="refers-to" label="HQ State" required="false">
				<lookup name="mvel">
					<param name="expr">thiz.hqCountry.states</param>
				</lookup>
			</reference>
			<field name="hqStateOther" type="text" label="HQ State Other"/>
			<field name="hqCity" type="text" label="HQ City" required="false"/>
			<reference name="bureauName" entity-type="AttributeChoice" relation="refers-to" label="Bureau">
				<lookup>
					<param name="key">BUREAU_NAME</param>
				</lookup>
			</reference>
			<reference name="reportName" entity-type="AttributeChoice" relation="refers-to" label="Name">
				<lookup>
					<param name="key">REPORT_NAME</param>
				</lookup>
			</reference>
			<reference name="consolidationType" entity-type="AttributeChoice" relation="refers-to" required="false">
				<lookup>
					<param name="key">CONSOLIDATION_TYPE</param>
				</lookup>
			</reference>
			<reference name="csr" entity-type="AttributeChoice" relation="refers-to" label="CSR">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="title" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">TITLE</param>
				</lookup>
			</reference>
			<reference name="legalStructure" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">LEGAL_STRUCTURE</param>
				</lookup>
			</reference>
			<reference name="paymentOption" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PREFERRED_PAYMENT_OPTION</param>
				</lookup>
			</reference>
			<reference name="industryCode" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">industryCode</param>
				</lookup>
			</reference>
			<reference name="physicianSpeciality" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PHYSICIAN_SPECIALITY</param>
				</lookup>
			</reference>
			<reference name="partyDetailType" entity-type="AttributeChoice" relation="refers-to" label="Customer Type" required="false">
				<lookup>
					<param name="key">CUSTOMER_TYPE</param>
				</lookup>
			</reference>
			<field name="yearsInBusiness" type="text" label="Years in Business"/>
			<!-- <reference name="yearsInBusiness" entity-type="AttributeChoice" relation="refers-to" label="Years in Business">
				<lookup>
					<param name="key">YEARS_IN_BUSINESS</param>
				</lookup>
			</reference>-->
			<reference name="prefLanguage" entity-type="Language" relation="refers-to"/>
			<reference name="sublineBusiness" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SUB_LINE_OF_BUSINESS</param>
				</lookup>
			</reference>
			<reference name="businessType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">BUSINESS_TYPE</param>
				</lookup>
			</reference>
			<reference name="businessStructure" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">BUSINESS_STRUCTURE</param>
				</lookup>
			</reference>
			<reference name="customerProfile" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CUSTOMER_PROFILE</param>
				</lookup>
			</reference>
			<reference name="stateIncorporated" entity-type="State" relation="refers-to" label="Organized under laws of (State / Jurisdiction)">
				<filters>
					<filter expr="entity.country.isoCode.equals('US')"/>
				</filters>
			</reference>
			<reference name="publicOrPrivate" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PUBLIC_PRIVATE</param>
				</lookup>
			</reference>
			<reference name="watchList" entity-type="PartyCaution" relation="owner"/>
			<reference name="suspiciousActivity" entity-type="PartyCaution" relation="owner"/>
			<reference name="outOfBusiness" entity-type="PartyCaution" relation="owner"/>
			<reference name="status" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">ACTIVE_INACTIVE_STATUS</param>
				</lookup>
			</reference>
			<reference name="legalNameConfirmed" label="Legal Name Verified" entity-type="AttributeChoice" relation="refers-to" required="false">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="bankruptcy" entity-type="PartyCaution" relation="owner"/>
			<reference name="partyMatchDetail" entity-type="PartyMatchDetail" relation="owner"/>
			<field name="businessDescription" type="text"/>
			<reference name="countryOfCitizenship" entity-type="Country" relation="refers-to"/>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<field name="currentManagementStartDttm" type="date-time" label="Management Control Date"/>
			<field name="organizationStartDttm" type="date-time" label="Organization Start Date"/>
			<field name="disclosePersonalInfo" type="boolean"/>
			<field name="numOfEmployees" type="integer" label="Number of employees"/>
			<field name="sectorOfOperations" type="text"/>
			<field name="birthCity" type="text" length="36"/>
			<reference name="birthCountry" entity-type="Country" relation="refers-to"/>
			<reference name="specialIndustryType" entity-type="AttributeChoice" relation="refers-to" label="Special Industry">
				<lookup>
					<param name="key">SPECIAL_INDUSTRY_TYPE</param>
				</lookup>
			</reference>
			<field name="yearOfResidenceAtCurrAddr" type="integer"/>
			<reference name="delinquent" entity-type="PartyCaution" relation="owner"/>
			<field name="yearsWithCompany" type="integer"/>
			<field name="yearsWithIndustry" type="integer"/>
			<field name="previousAnnualRevenue" type="amount"/>
			<field name="titleOther" type="text"/>
			<reference name="versionStatus" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">VERSION_STATUS</param>
				</lookup>
			</reference>
			<field name="versionNumber" type="integer"/>
			<field name="existingContigentExposure" type="amount"/>
			<field name="yearsInPractice" type="number"/>
			<field name="medicalOrDentalParty" type="boolean"/>
			<field name="licensedSince" type="text" length="20"/>
			<field name="cautionListAsOfDate" type="date-time" label="As of Date"/>
			<reference name="equityCapitalization" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">EQUITY_CAPITALIZATION</param>
				</lookup>
			</reference>
			<field name="ownershipDetail" type="text"/>
			<field name="ticker" type="text"/>
			<field name="marketCap" type="amount"/>
			<field name="marketCapDate" type="date-time" label="Market Cap As of Date"/>
			<reference name="sector" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">PUBLIC_PRIVATE</param>
				</lookup>
			</reference>
			<reference name="cautionList" entity-type="AttributeChoice" relation="refers-to" internal="true">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="partnerAlsoDirectObligor" entity-type="AttributeChoice" relation="refers-to" label="Partner Also Direct Obligor?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="reasonForOverride" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">REASON_FOR_OVERRIDE</param>
				</lookup>
			</reference>
			<reference name="financialCenter" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FINANCIAL_CENTER</param>
				</lookup>
			</reference>
			<reference name="fimp" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">FIMP</param>
				</lookup>
			</reference>
			<reference name="afsBankCode" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">AFS_BANK_CODE</param>
				</lookup>
			</reference>
			<reference name="assignmentUnit" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">ASSIGNMENT_UNIT</param>
				</lookup>
			</reference>
			<field name="verifiedDate" type="date-time" label="Date Verified"/>
			<reference name="sicCodeId" entity-type="AttributeChoice" relation="refers-to" label="SIC Code" required="false">
				<lookup>
					<param name="key">SIC_CODE</param>
				</lookup>
			</reference>
			<reference name="naicsCodeId" entity-type="AttributeChoice" relation="refers-to" label="NAICS">
				<lookup>
					<param name="key">NAICS_CODE</param>
				</lookup>
			</reference>
			<field name="losResolved" type="boolean"/>
			<field name="obligationNumber" type="text" length="36"/>
			<field name="deleted" type="boolean"/>
			<field name="currentlyDelinquent" type="boolean"/>
			<field name="priorLossOrChargeOff" type="boolean"/>
			<reference name="companyNumber" entity-type="AttributeChoice" relation="refers-to" required="false">
				<lookup>
					<param name="key">COMPANY_NUMBER</param>
				</lookup>
			</reference>
			<field name="businessChannel" type="text" internal="true"/>
			<field name="acceptanceCode" type="text"/>
			<field name="accountName" type="name"/>
			<reference name="servicingTier" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SERVICING_TIER</param>
				</lookup>
			</reference>
			<field name="lastActivityDate" type="date-time"/>
			<reference name="customerCanBeContacted" entity-type="AttributeChoice" relation="refers-to" label="Customer can Be Contacted?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="ndaInPlace" entity-type="AttributeChoice" relation="refers-to" label="NDA In Place?">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="industryPosition" entity-type="AttributeChoice" relation="refers-to" required="false">
				<lookup>
					<param name="key">INDUSTRY_POSITION</param>
				</lookup>
			</reference>
			<field name="jobFunction" type="text"/>
			<field name="authorizedToEsign" type="boolean"/>
			<field name="industrySummary" type="textarea"/>
			<field name="paydex" type="text"/>
			<field name="highTrade" type="amount"/>
			<field name="noOfTrades" type="number"/>
			<reference name="useRatingFrom" entity-type="AttributeChoice" relation="refers-to" required="false">
				<lookup>
					<param name="key">RATING_FROM</param>
				</lookup>
			</reference>
			<reference name="useEDFFrom" entity-type="AttributeChoice" relation="refers-to" required="false">
				<lookup>
					<param name="key">RATING_FROM</param>
				</lookup>
			</reference>
			<reference name="useRiskGradeFrom" entity-type="AttributeChoice" relation="refers-to" required="false">
				<lookup>
					<param name="key">RATING_FROM</param>
				</lookup>
			</reference>
			<reference name="useLGDGradeFrom" entity-type="AttributeChoice" relation="refers-to" required="false">
				<lookup>
					<param name="key">RATING_FROM</param>
				</lookup>
			</reference>
			<field name="pgGradeDiscussion" type="textarea"/>
			<field name="lgdGradeDiscussion" type="textarea"/>
			<field name="dellNetInvestment" type="amount" internal="true"/>
			<field name="nonDellNetInvestment" type="amount" internal="true"/>
			<reference name="partyDetailFinAnlysis" entity-type="PartyDetailFinAnlysis" relation="owner"/>
			<reference name="partyDemographicInfo" entity-type="PartyDemographicInfo" relation="owner"/>
			<reference name="parentPartyDetail" entity-type="PartyDetail" relation="refers-to"/>
			<reference name="partyQuestionaire" entity-type="derived:PartyDetailQuestionaire" relation="owner"/>
			<!-- <collection name="relatedParties" collection-type="list" entity-type="Party" relation="owner"/>-->
			
			<collection name="relatedPartiesDetail" collection-type="list" entity-type="PartyDetail" relation="owner"/>
			<collection name="dbas" collection-type="list" entity-type="PartyDba" referred-by="partyDetail" relation="owner"/>
			<collection name="extIdentifiers" collection-type="list" entity-type="PartyExtIdentifier" referred-by="partyDetail" relation="owner"/>
			<collection name="sites" collection-type="list" entity-type="PartySite" referred-by="partyDetail" relation="owner"/>
			<collection name="bankAccounts" collection-type="list" entity-type="PartyBankAccount" referred-by="partyDetail" relation="owner"/>
			<collection name="partyClassifications" collection-type="list" entity-type="PartyClassification" referred-by="partyDetail" relation="owner"/>
			<collection name="partyDetailQuestionnaires" collection-type="list" entity-type="PartyDetailQuestionaire" referred-by="partyDetail" relation="owner"/>
			<collection name="partyContactDetails" collection-type="list" entity-type="PartyContactDetail" referred-by="partyDetail" relation="owner"/>
			<collection name="contactTypeDetails" collection-type="list" entity-type="ContactTypeDetail" referred-by="partyDetail" relation="owner"/>
			<collection name="bureauReports" collection-type="list" entity-type="BureauReport" referred-by="partyDetail" relation="owner"/>
			<collection name="compliances" collection-type="list" entity-type="Compliance" referred-by="partyDetail" relation="owner"/>
			<collection name="fraudAlerts" collection-type="list" entity-type="FraudAlert" referred-by="partyDetail" relation="owner"/>
			<reference name="moodyPartyFinancialInfo" entity-type="MoodyPartyFinancialInfo" relation="owner"/>
			<!-- TO BE DELETED
			<collection name="partyMoodyFinancialAssocs" collection-type="list" entity-type="PartyMoodyFinancialAssoc" referred-by="partyDetail" relation="owner"/>
			 -->
			<collection name="partyOwnedAssets" collection-type="list" entity-type="PartyOwnedAsset" referred-by="partyDetail" relation="owner"/>
			<collection name="partyLiabilities" collection-type="list" entity-type="PartyLiability" referred-by="partyDetail" relation="owner"/>
			<collection name="riskRatings" collection-type="list" entity-type="RiskRating" referred-by="partyDetail" relation="owner"/>
			<collection name="uccs" collection-type="list" entity-type="UCC" referred-by="customer" relation="owner"/>
			<collection name="users" collection-type="list" entity-type="User" relation="refers-to"/>
			<collection name="allRelationshipParties" collection-type="list" entity-type="RelationshipParty" referred-by="partyDetail" relation="owner"/>
			<collection name="allRiskDebtRatings" collection-type="list" entity-type="RiskDebtRating" referred-by="partyDetail" relation="owner"/>
			<collection name="allRiskgradeEDF" collection-type="list" entity-type="RiskGradeEDF" referred-by="partyDetail" relation="owner"/>
			<collection name="allRiskgrade" collection-type="list" entity-type="RiskGrade" referred-by="partyDetail" relation="owner"/>
			<collection name="allRiskLGDgrade" collection-type="list" entity-type="RiskLGDGrade" referred-by="partyDetail" relation="owner"/>
			<collection name="classification" collection-type="list" entity-type="AttributeChoice" relation="refers-to" label="Classifications">
				<lookup>
					<param name="key">PARTY_CLASSIFICATION</param>
				</lookup>
			</collection>
			<collection name="scorecardDetails" collection-type="list" entity-type="ScorecardDetails" referred-by="party" relation="owner"/>
			<collection name="facilityRecomms" collection-type="list" entity-type="FacilityRecomm" referred-by="winningParty" relation="owner"/>
			<collection name="partyAssets" collection-type="list" entity-type="PartyAsset" referred-by="party" relation="owner"/>
			<collection name="partyScoreAdverseActions" collection-type="list" entity-type="PartyScoreAdverseAction" referred-by="party" relation="owner"/>
			<collection name="customerAccountTeams" collection-type="derived:list" entity-type="User" relation="refers-to"/>
			<collection name="partyDocumentAssociations" collection-type="list" entity-type="Document" referred-by="partyDocumentAssociations" relation="owner"/>
			<reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
			<collection name="documentPackages" collection-type="list" entity-type="DocumentPackage" referred-by="partyDetail" relation="owner"/>
			<!-- Convenience Related fields -->
			<field name="guarantorAddress" type="derived:text"/>
			<field name="guarantorPhoneNum" type="derived:text"/>
			<reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to">
				<lookup>
					<param name="workflowEntity">WORKFLOW_ENTITY_CUSTOMER</param>
				</lookup>
			</reference>
			<reference name="collectionsHold" entity-type="Hold" relation="owner"/>
			<reference name="creditHold" entity-type="Hold" relation="owner"/>
			<reference name="documentationHold" entity-type="Hold" relation="owner"/>
			<reference name="accountHold" entity-type="Hold" relation="owner"/>
			<reference name="primaryContact" entity-type="derived:ContactInfo" relation="refers-to"/>
			<collection name="pdContacts" collection-type="list" entity-type="Contact" relation="owner"/>
			<feature operation="implements">
				
				<data>com.thirdpillar.foundation.model.DocumentAware</data>
			</feature>
			<display-format>$o.customerName$</display-format>
			<find-queries>
				<query name="quickSearch" select="many">where firstName like :q or lastName like :q or legalName like :q or organizationName like :q</query>
			</find-queries>
		</entity>
		<entity name="RequestTermCondition" stereotype="managed">
			<reference name="financialinstitutionName" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution Name">
				<lookup>
					<param name="key">FINANCIAL_INSTITUTION_NAME</param>
				</lookup>
			</reference>
			<reference name="interimRentAllowed" entity-type="AttributeChoice" relation="refers-to" label="Interim Rent Allowed?">
				<lookup>
					<param name="key">INTERIM_RENT_REQUIRED</param>
				</lookup>
			</reference>
			<field name="stipTableLoss" type="boolean" label="Stip Loss Table"/>
			<field name="cntryOfFdrlJurisdiction" type="text" required="true" label="County of Federal Jurisdiction"/>
			<reference name="stateOfLegalJurisdict" entity-type="State" relation="refers-to" label="State of Legal Jurisdiction" required="true"/>
			<field name="qalException" type="boolean" label="QAL Exception"/>
			<field name="assetLocNotificationDays" type="text" label="Asset Location Notification Days"/>
			<reference name="acceptanceType" entity-type="AttributeChoice" relation="refers-to" required="true">
				<lookup>
					<param name="key">ACCEPTANCE_TYPE</param>
				</lookup>
			</reference>
			<field name="deemedAcceptanceDays" type="number"/>
			<field name="sheduleReturn" type="text" label="Schedule Return"/>
			<field name="negotiatedPPT" type="number" label="Negotiated PPT Factor"/>
			<reference name="eolGracePeriod" entity-type="AttributeChoice" relation="refers-to" label="EOL Grace Period">
				<lookup>
					<param name="key">EOL_GRACE_PERIOD</param>
				</lookup>
			</reference>
			<reference name="typeOfEOLNotification" entity-type="AttributeChoice" relation="refers-to" label="Type of EOL Notification">
				<lookup>
					<param name="key">EOL_NOTIFICATION</param>
				</lookup>
			</reference>
			<reference name="eolNotificationDays" entity-type="AttributeChoice" relation="refers-to" label="EOL Notification Days">
				<lookup>
					<param name="key">EOL_NOTIFICATION_DAY</param>
				</lookup>
			</reference>
			<reference name="likeForLike" entity-type="AttributeChoice" relation="refers-to" required="true">
				<lookup>
					<param name="key">LIKE_FOR_LIKE</param>
				</lookup>
			</reference>
			<field name="fmvCaps" type="boolean"/>
			<field name="renewalCaps" type="boolean"/>
			<field name="earlyTerminations" type="boolean"/>
			<!-- to be delted fmvCapAmount. CR- 49 -->
			<field name="fmvCapAmount" type="percent"/>
			<field name="fmvCapPercent" type="percent" label="FMV Cap %"/>
			<!-- to be deleted numofPayment. CR-49 -->
			<field name="numOfPayment" type="number"/>
			<field name="renewalNumOfPayment" type="number"/>
			<field name="fixedExtension" type="boolean"/>
			<field name="negotiatedRenewals" type="boolean"/>
			<field name="bestEffortLanguage" type="boolean"/>
			<field name="mwdForgiveness" type="boolean"/>
			<field name="pctOfOriginalPayment" type="percent" label="Percentage of Original Payment"/>
			<reference name="genEarlyTerminateSched" entity-type="AttributeChoice" relation="refers-to" label="Generate Early Termination Schedule">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="fixedExtensionPricing" entity-type="AttributeChoice" relation="refers-to" label="Fixed Extension Pricing Created">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="fmvCapAssetType" entity-type="AttributeChoice" relation="refers-to" label="Asset Type">
				<lookup>
					<param name="key">ASSET_TYPE</param>
				</lookup>
			</reference>
			<reference name="fmvCapTerm" entity-type="AttributeChoice" relation="refers-to" label="Term">
				<lookup>
					<param name="key">FMV_CAP_TERM</param>
				</lookup>
			</reference>
			<reference name="renewalCapAssetType" entity-type="AttributeChoice" relation="refers-to" label="Asset Type">
				<lookup>
					<param name="key">ASSET_TYPE</param>
				</lookup>
			</reference>
			<reference name="renewalCapTerm" entity-type="AttributeChoice" relation="refers-to" label="Term">
				<lookup>
					<param name="key">RENEWAL_CAP_TERM</param>
				</lookup>
			</reference>
			<collection name="creditReqTermCharges" collection-type="list" entity-type="CreditReqTermCharge" referred-by="requestTermCondition" relation="owner"/>
		</entity>
        <entity name="CreditMasterAggRequest" stereotype="business-entity" label="Master Agreement Request">
			<field name="refNumber" type="auto" label="Request Number"/>
			<field name="requestDttm" type="date-time" label="Request Date"/>
			<field name="requestEffectiveDate" type="date-time" required="true"/>
			<field name="letterOfCredit" type="percent"/>
			<field name="downPayment" type="percent"/>
			<field name="recommendation" type="textarea"/>
			<field name="ammendCheck" type="boolean"/>
			<field name="poRequiredOrderRelease" type="boolean" label="PO Required For Order Release"/>
			<field name="requestTypeDetail" type="derived:text" length="36"/>
			<reference name="syndicated" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>
			<reference name="relationship" entity-type="Relationship" relation="refers-to"/>
			<reference name="primaryLessee" entity-type="RelationshipParty" relation="refers-to">
				<lookup name="mvel">
					<param name="expr">thiz.relationshipCustomers</param> 
				</lookup>
			</reference>
			<collection name="permittedLessee" collection-type="list" entity-type="RelationshipParty" relation="refers-to">
				<lookup name="mvel">
					<param name="expr">thiz.relationshipCustomers</param> 
				</lookup>
			</collection>	
			<collection name="relationshipCustomers" collection-type="derived:list" entity-type="RelationshipParty" relation="refers-to" />		
			<reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
			<reference name="requestStatus" entity-type="WorkflowStatus" relation="refers-to" label="Status"/>
			<reference name="requestTermCondition" entity-type="RequestTermCondition" relation="owner"/>
			<reference name="program" entity-type="Program" relation="refers-to">
				<filters>
					<filter expr="entity.programCategory != null &amp;&amp; entity.programCategory.key.equalsIgnoreCase('PROGRAM_CATEGORY_MASTER')"/>
				</filters>
			</reference>
			<reference name="creditReqLateCharge" entity-type="CreditReqLateCharge" relation="owner"/>
			<reference name="approval" entity-type="Approval" relation="owner"/>
			<reference name="requestType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">REQUEST_TYPE</param>
				</lookup>
			</reference>
			<reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
			<collection name="documentPackages" collection-type="list" entity-type="DocumentPackage" referred-by="request" relation="owner"/>
			<collection name="relationshipSubsetParty" collection-type="list" entity-type="RelationshipSubsetParty" referred-by="CreditMasterAggRequest" relation="owner"/>
			<collection name="uccs" collection-type="list" entity-type="UCC" referred-by="masterAggreementNumber" relation="owner"/>
			<collection name="guarantees" collection-type="list" entity-type="Guarantee" relation="owner"/>
			<collection name="creditAppGuarantors" collection-type="list" entity-type="CreditAppGuarantor" referred-by="creditApp" relation="owner"/>
			<collection name="relatedPartners" collection-type="list" entity-type="CreditAppRelatedPartner" referred-by="creditApp" relation="owner"/>
			<collection name="assignSites" collection-type="list" entity-type="CustomerSite" relation="refers-to">
				<lookup name="mvel">
					<param name="expr">thiz.relatedSites</param>
				</lookup>
			</collection>
			<collection name="relatedSites" collection-type="derived:list" entity-type="CustomerSite" relation="refers-to"/>
			<collection name="correspondents" collection-type="list" entity-type="Recipient" relation="owner"/>
			<collection name="brokers" collection-type="list" entity-type="Broker" relation="owner"/>
			<collection name="relatedParties" collection-type="list" entity-type="PartyDetail" relation="owner"/>
			<collection name="uccSummaries" collection-type="list" entity-type="UccSummary" referred-by="creditApp" relation="owner"/>
			<collection name="investors" collection-type="list" entity-type="Partner" relation="refers-to"/>
			<collection name="banksTrade" collection-type="list" entity-type="BanksTrade" relation="owner"/>
			<collection name="partnerSalesReps" collection-type="list" entity-type="PartyContact" relation="owner"/>
			<collection name="ddBiddableEntities" collection-type="list" entity-type="DdBiddableEntity" referred-by="creditApp" relation="owner"/>
			<collection name="creditAppScorings" collection-type="list" entity-type="CreditAppScoring" referred-by="creditApp" relation="owner"/>
			<reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to">
				<lookup>
					<param name="workflowEntity">WORKFLOW_ENTITY_MLA</param>
				</lookup>
			</reference>
			<feature operation="implements">
				<data>com.thirdpillar.foundation.model.WorkflowAware</data>
				<data>com.thirdpillar.foundation.model.DocumentAware</data>
			</feature>
			<display-format>$o.refNumber$</display-format>
		</entity>
        <entity name="RacEvaluation" stereotype="managed">
            <field name="racNumber" type="integer"/>
            <field name="evaluation" type="text"/>
            <field name="automatedDecision" type="boolean" required="false"/>
            <field name="criteria" type="textarea"/>
            <field name="comment" type="text"/>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RAC_STATUS</param>
                </lookup>
            </reference>
            <reference name="exceptionAuthority" entity-type="AttributeChoice" relation="refers-to" internal="true">
                <lookup>
                    <param name="key">RAC_EXCEPTION_AUTHORITY</param>
                </lookup>
            </reference>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <reference name="racsetEvaluation" entity-type="RacsetEvaluation" relation="owner"/>
            <reference name="user" entity-type="User" relation="refers-to"/>
            <reference name="racDefinition" entity-type="RacDefinition" relation="refers-to"/>
        </entity>
        <entity name="RacsetEvaluation" stereotype="managed" label="RAC Set Evaluation">
            <field name="externalIdentifier" type="text" length="36"/>
            <field name="exceptionAuthority" type="text"/>
            <field name="refNumber" type="auto"/>
            <field name="versionNumber" type="integer"/>
            <field name="automated" type="boolean" required="false"/>
            <field name="pass" type="derived:integer"/>
            <field name="fail" type="derived:integer"/>
            <field name="na" type="derived:integer"/>
            <field name="racNumber" type="derived:integer"/>
            <field name="statusValue" type="derived:text"/>
            <field name="exceptionAuthorityValue" type="derived:text"/>
            <reference name="request" entity-type="Request" relation="refers-to"/>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RACSET_STATUS</param>
                </lookup>
            </reference>
            <reference name="versionStatus" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">VERSION_STATUS</param>
                </lookup>
            </reference>
            <reference name="racsetDefinition" entity-type="RacsetDefinition" relation="refers-to" ruleTriggerOnEvent="true"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
            <collection name="racEvaluations" collection-type="list" entity-type="RacEvaluation" referred-by="racsetEvaluation" relation="owner"/>
        </entity>
        <entity name="RacsetDefinition" stereotype="managed">
            <field name="name" type="text" indexed="true"/>
            <field name="description" type="textarea"/>
            <reference name="racsetGroup" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RACSET_GROUP</param>
                </lookup>
            </reference>
            <collection name="racDefinitions" collection-type="list" entity-type="RacDefinition" referred-by="racsetDefinition" relation="owner"/>
            <display-format>$o.name$</display-format>
            <find-queries>
                <query name="byName" select="one">where name = :name</query>
            </find-queries>
        </entity>
        <entity name="RacDefinition" stereotype="managed">
            <field name="racId" type="integer"/>
            <reference name="racCategory" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RAC_CATEGORY</param>
                </lookup>
            </reference>
            <field name="description" type="textarea"/>
            <reference name="racsetDefinition" entity-type="RacsetDefinition" relation="refers-to"/>
        </entity>
        <entity name="ReamParameter" stereotype="managed">
            <reference name="parameterType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REAM_PARAMETER_TYPE</param>
                </lookup>
            </reference>
            <field name="effectiveDttm" type="date-time"/>
            <field name="numIndex" type="integer"/>
            <field name="nextChangeDttm" type="date-time"/>
            <reference name="increaseOrDecreaseType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <field name="increaseAmt" type="amount"/>
            <field name="increasePct" type="percent"/>
            <field name="decreaseAmt" type="amount"/>
            <field name="decreasePct" type="percent"/>
            <field name="billFrequencyChange" type="integer"/>
            <field name="maxAdditionalPeriods" type="integer"/>
            <reference name="contract" entity-type="Contract" relation="refers-to"/>
        </entity>
        <entity name="ResidualPolicy" stereotype="managed">
            <field name="name" type="text" label="Residual Policy Name"/>
            <field name="description" type="text" label="Residual Policy Description"/>
            <reference name="asset" entity-type="Asset" relation="refers-to"/>
        </entity>
        <entity name="SalesRep" stereotype="managed">
            <field name="title" type="text"/>
            <field name="numIndex" type="integer"/>
            <field name="primaryFlag" type="boolean" required="false"/>
            <field name="secondaryFlag" type="boolean" required="false"/>
            <reference name="region" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">REGION</param>
                </lookup>
            </reference>
            <reference name="district" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DISTRICT</param>
                </lookup>
            </reference>
            <reference name="salesUser" entity-type="User" relation="refers-to"/>
            <reference name="partnerSite" entity-type="PartnerSite" relation="refers-to"/>
        </entity>
        <entity name="Service" stereotype="managed">
            <field name="serviceAmt" type="amount"/>
            <field name="effectiveFromDttm" type="date-time"/>
            <field name="effectiveToDttm" type="date-time"/>
            <reference name="pricingType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">pricingType</param>
                </lookup>
            </reference>
            <field name="externalRefId" type="text"/>
            <field name="oklServiceLinkLineId" type="text"/>
            <field name="oklCimvId" type="text"/>
            <field name="oklCplvId" type="text"/>
            <field name="oklLinkCimvId" type="text"/>
            <field name="evgEligibleFlag" type="boolean" required="false"/>
            <field name="numIndex" type="integer"/>
            <reference name="servicingParty" entity-type="Partner" relation="owner"/>
            <reference name="asset" entity-type="Asset" relation="refers-to"/>
            <reference name="evergreenFrequencyId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                </lookup>
            </reference>
            <reference name="paymentFrequencyId" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                </lookup>
            </reference>
            <field name="evergreenBillingAmt" type="amount"/>
            <collection name="ubcPricingLevel" collection-type="list" entity-type="UbcPricingLevel" relation="owner"/>
            <collection name="servicePassThrough" collection-type="list" entity-type="ServicePassthrough" referred-by="service" relation="owner"/>
        </entity>
        <entity name="ServicePassthrough" stereotype="managed">
            <reference name="service" entity-type="Service" relation="owner"/>
            <field name="numIndex" type="integer"/>
            <field name="externalRefId" type="text"/>
            <reference name="passthrough" entity-type="Passthrough" relation="owner"/>
            <reference name="meter" entity-type="Meter" relation="refers-to"/>
        </entity>
        <entity name="SBAInformation" stereotype="managed">
            <field name="sbaGpNumber" type="text" length="38"/>
            <field name="amount" type="amount"/>
            <field name="approvalDttm" type="date-time"/>
            <field name="guaranteedPct" type="percent"/>
            <reference name="sourceCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SBA_SOURCE_CODE</param>
                </lookup>
            </reference>
            <reference name="sourceProgramNumber" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SBA_SOURCE_PROGRAM_NUMBER</param>
                </lookup>
            </reference>
            <reference name="sbaStatusCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SBA_STATUS_CODE</param>
                </lookup>
            </reference>
            <reference name="spreadPaymentOption" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SBA_SPREAD_PAYMENT_OPTION</param>
                </lookup>
            </reference>
        </entity>

        <entity name="SyndicationAgent" stereotype="managed">
            <field name="legalName" type="text" length="1024"/>
            <reference name="status" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">USER_STATUS</param>
                </lookup>
            </reference>
            <field name="firstName" type="text"/>
            <field name="lastName" type="text"/>
            <field name="phone" type="text" length="50"/>
            <field name="email" type="text"/>
            <field name="fax" type="text" length="50"/>
            <reference name="agentType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AGENT_TYPE</param>
                </lookup>
            </reference>
            <reference name="financialinstitutionMayContact" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution May Contact">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="title" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">TITLE</param>
                </lookup>
            </reference>
        </entity>
        <entity name="Syndication" stereotype="managed">
            <field name="syndicationAmount" type="amount" ruleTriggerOnEvent="true"/>
            <reference name="agent" entity-type="Partner" relation="refers-to"/>
            <field name="finalTakePct" type="percent" scale="2"/>
            <field name="finalTakeAmt" type="amount"/>
            <field name="apportioned" type="boolean"/>
            <field name="sharingPct" type="percent" scale="2"/>
            <field name="totalCalculatedFee" type="derived:amount" />
            <reference name="syndicationTier" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SYNDICATION_TIER</param>
                </lookup>
            </reference>
            <reference name="syndicationRole" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SYNDICATION_ROLE</param>
                </lookup>
            </reference>
            <reference name="syndicationBasis" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <reference name="syndicationAgent" entity-type="Partner" relation="refers-to"/>
            <reference name="tranche" entity-type="Tranche" relation="refers-to"/>
            <collection name="feeAllocations" collection-type="list" entity-type="FeeAllocation" referred-by="syndication" relation="owner"/>
            
            <display-format>$o.syndicationAgent.legalName$</display-format>
        	<find-queries>
                <query name="quickSearch" select="many">where legalName like :q</query>
            </find-queries>
            
        </entity>
        <entity name="Tranche" stereotype="managed">
            <field name="name" type="text"/>
            <field name="minAmount" type="amount"/>
            <field name="maxAmount" type="amount"/>
            <field name="startDate" type="date-time"/>
            <field name="endDate" type="date-time"/>
        	<field name="totalTrancheAmt" type="derived:amount"/>
        	<field name="remainingTrancheAmt" type="derived:amount"/>
        	<field name="totalTrancheFee" type="derived:amount"/>
        	<reference name="facility" entity-type="Facility" relation="refers-to"/>
            <collection name="syndications" collection-type="list" entity-type="Syndication" referred-by="tranche" relation="owner"/>

            <display-format>$o.name$</display-format>
        </entity>
        <entity name="FeeAllocation" stereotype="managed">
            <field name="feeAmount" type="amount"/>
            <field name="feePct" type="percent"/>
			<field name="calculatedFee" type="derived:amount"/>
			<reference name="fee" entity-type="Fee" relation="refers-to">
				<lookup name="mvel">
                    <param name="expr">thiz.syndication.tranche.facility.pricingOption.structure.fees</param>
                </lookup>
			</reference>
			<reference name="syndication" entity-type="Syndication" relation="refers-to"/>
        </entity>
        
        
        <entity name="TermoutInformation" stereotype="managed">
            <field name="loanTermoutAuto" type="boolean" required="false"/>
            <reference name="termoutType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">TERM_OUT_TYPE</param>
                </lookup>
            </reference>
            <field name="termoutDttm" type="date-time"/>
            <field name="termoutMonths" type="integer"/>
            <field name="delinquentDays" type="integer"/>
        </entity>
 
        <entity name="TqShortFund" stereotype="managed">
            <field name="termintionQuoteNumber" type="text"/>
            <field name="quoteDttm" type="date-time"/>
            <field name="quoteType" type="text"/>
            <field name="quoteReason" type="text"/>
            <field name="effectiveToDttm" type="date-time"/>
            <field name="fullPartialQuote" type="text"/>
            <field name="comments" type="text"/>
            <field name="quoteAmount" type="amount"/>
            <field name="taxAmount" type="amount"/>
            <field name="total" type="amount"/>
            <field name="excludeFromInterest" type="boolean" required="false"/>
            <reference name="shortFundReason" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SHORT_FUND_REASON</param>
                </lookup>
            </reference>
            <reference name="fundingRequest" entity-type="FundingRequest" relation="refers-to"/>
        </entity>

        <entity name="UbcPricingLevelDtl" stereotype="managed">
            <field name="fromReading" type="integer"/>
            <field name="toReading" type="integer"/>
            <field name="serviceAmt" type="amount"/>
            <field name="overageAmt" type="amount"/>
            <field name="numIndex" type="integer"/>
            <reference name="ubcPricingLevel" entity-type="UbcPricingLevel" relation="owner"/>
        </entity>
        <entity name="UbcPricingLevel" stereotype="managed">
            <field name="effectiveFromDttm" type="date-time"/>
            <field name="effectiveToDttm" type="date-time"/>
            <field name="numOfPayments" type="integer"/>
            <field name="externalRefId" type="text"/>
            <field name="serviceAmt" type="amount"/>
            <field name="numIndex" type="integer"/>
            <collection name="ubcPricingLevelDtl" collection-type="list" entity-type="UbcPricingLevelDtl" referred-by="UbcPricingLevel" relation="owner"/>
        </entity>        
         
        <entity name="UsagePassthrough" stereotype="managed">
            <field name="numIndex" type="integer"/>
            <field name="externalRefId" type="text"/>
            <reference name="passthrough" entity-type="Passthrough" relation="owner"/>
            <reference name="meter" entity-type="Meter" relation="refers-to"/>
        </entity>
        <entity name="Order" stereotype="business-entity">
            <field name="orderRefNumber" type="auto" label="Order Number" required="false"/>
            <field name="doMorderRefNumber" type="number"/>
            <field name="orderPlacedDttm" type="date-time"/>
            <field name="financialinstitutionComanyNumber" type="number" label="Dell Company Number" required="false"/>
            <field name="financialinstitutionCustomerName" type="text" label="Dell Customer Name" required="false"/>
            <field name="financialinstitutionCustomerNumber" type="number" label="Dell Customer Number"/>
            <field name="financialinstitutionQuoteNumber" type="number" label="Dell Quote Number"/>
            <field name="fundingSourceCode" type="text"/>
            <field name="customerPO" type="text" label="Customer PO Number"/>
            <field name="financialinstitutionSaleRep" type="text" label="Dell Sales Rep"/>
            <field name="insuranceTotal" type="amount" required="false"/>
            <field name="insuranceFinanced" type="boolean" required="false" label="Insurance Financed"/>
            <field name="orderSource" type="text" required="false"/>
            <reference name="orderStatus" entity-type="WorkflowStatus" relation="owner"/>
            <field name="financialinstitutionStatus" type="text" label="Financial Institution Status"/>
            <field name="payCode" type="text"/>
            <reference name="productType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">PRODUCT_TYPE</param>
                </lookup>
            </reference>
            <field name="orderTerm" type="number" label="Term" required="false"/>
            <reference name="orderTermFrequency" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">TERM_UNIT</param>
                </lookup>
            </reference>
            <field name="parentOrderFlag" type="boolean" label="Parent Order"/>
            <field name="invoiceNumber" type="number"/>
            <field name="invoiceTotal" type="amount" required="false"/>
            <reference name="acceptanceType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">ACCEPTANCE_TYPE</param>
                </lookup>
            </reference>
            <field name="acceptanceDttm" type="date-time" label="Acceptance Date"/>
            <field name="creditOrder" type="boolean" required="false"/>
            <reference name="paymentFrq" entity-type="AttributeChoice" relation="refers-to" label="Payment Frequency" required="false">
                <lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                </lookup>
            </reference>
            <field name="returnRefNumber" type="text" label="Return Reference Number"/>
            <reference name="creditType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">CREDIT_TYPE</param>
                </lookup>
            </reference>
            <field name="consolidationType" type="text"/>
            <field name="hardCostTotal" type="amount" required="false"/>
            <field name="softCostTotal" type="amount" required="false"/>
            <field name="expensedTotal" type="amount" required="false"/>
            <field name="salesTaxTotal" type="amount" required="false"/>
            <field name="salesTaxFinanced" type="boolean" required="false" label="Sales Tax Financed"/>
            <field name="feeTotal" type="amount" label="Fees Total" required="false"/>
            <field name="feeFinaced" type="boolean" required="false" label="Fees Financed"/>
            <field name="shippingTotal" type="amount" required="false"/>
            <field name="shippingFinanced" type="boolean" required="false" label="Shipping Financed"/>
            <field name="eoLLogisticTotal" type="amount" required="false"/>
            <field name="eoLLogisticFinanced" type="boolean" required="false" label="EOL Logistic Financed"/>
            <field name="dataWipeServiceTotal" type="amount" required="false"/>
            <field name="dataWipeServicefinanced" type="boolean" required="false" label="Data Wipe Service Financed"/>
            <field name="personalPropertyTaxMMF" type="amount"/>
            <field name="personalPropertyMMFBill" type="boolean" required="false" label="PPT MMF Rebill"/>
            <field name="totalFinancedAmount" type="amount" required="false"/>
            <field name="lastUpdatedDttm" type="date-time"/>
            <field name="invoiceDttm" type="date-time" label="Invoice Date"/>
            <reference name="financialinstitutionOMSStatus" entity-type="AttributeChoice" relation="refers-to" label="Financial Institution OMS Status">
                <lookup>
                    <param name="key">FINANCIAL_INSTITUTION_OMS_STATUS</param>
                </lookup>
            </reference>
            <reference name="dateType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">DATE_TYPE</param>
                </lookup>
            </reference>
            <reference name="lastUpdatedBy" entity-type="User" relation="refers-to"/>
            <reference name="facility" entity-type="Facility" relation="refers-to" required="false"/>
            <reference name="program" entity-type="Program" relation="refers-to"/>
            <reference name="masterProgram" entity-type="Program" relation="refers-to"/>
            <reference name="parentOrder" entity-type="Order" relation="refers-to" required="false"/>
            <reference name="shipTo" entity-type="Address" relation="owner"/>
            <reference name="partySite" entity-type="CustomerSite" relation="refers-to" required="false"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner" required="false"/>
            <reference name="partner" entity-type="Partner" relation="refers-to" required="false"/>
            <collection name="associatedOrders" collection-type="list" entity-type="Order" referred-by="parentOrder" relation="refers-to"/>
            <collection name="assets" collection-type="list" entity-type="Asset" referred-by="order" relation="owner"/>
            <collection name="auditOrders" collection-type="list" entity-type="AuditOrder" referred-by="order" relation="owner" label="Audit"/>
            <collection name="auditOrderHistories" collection-type="list" entity-type="AuditOrderHistory" referred-by="order" relation="owner"/>
            <display-format>$o.orderRefNumber$</display-format>
        </entity>
        <entity name="AuditOrder" stereotype="managed">
            <field name="rulesSet" type="text" required="false"/>
            <field name="rules" type="number" required="false" label="# Rules"/>
            <field name="pass" type="number" required="false"/>
            <field name="fail" type="number" required="false"/>
            <field name="exceptions" type="number" required="false"/>
            <field name="exceptionAuthority" type="text"/>
            <field name="evaluationDttm" type="date-time" label="Evaluation Date"/>
            <field name="status" type="text"/>
            <field name="comment" type="textarea" required="false"/>
            <reference name="order" entity-type="Order" relation="refers-to"/>
            <reference name="auditOrderHistory" entity-type="AuditOrderHistory" relation="owner"/>
            <collection name="auditOrderDetails" collection-type="list" entity-type="AuditOrderDetail" referred-by="AuditOrder" relation="owner"/>
        </entity>
        <entity name="AuditOrderHistory" stereotype="managed">
            <field name="ruleSet" type="text"/>
            <field name="manualyAdded" type="boolean"/>
            <reference name="order" entity-type="Order" relation="refers-to"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
        </entity>
        <entity name="AuditOrderDetail" stereotype="managed">
            <field name="exception" type="boolean"/>
            <field name="numIndex" type="integer" label="ID"/>
            <field name="category" type="number" required="false"/>
            <field name="description" type="number" required="false"/>
            <field name="criteria" type="number" required="false"/>
            <field name="evaluation" type="text"/>
            <field name="passOrFail" type="text" label="Pass/Fail"/>
            <reference name="exceptionAuthority" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RAC_EXCEPTION_AUTHORITY</param>
                </lookup>
            </reference>
            <reference name="auditOrderHistory" entity-type="AuditOrderHistory" relation="owner"/>
            <reference name="auditOrder" entity-type="AuditOrder" relation="refers-to"/>
            <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
        </entity>
        <entity name="Insurance" stereotype="managed">
            <reference name="primaryInsuranceType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PRIMARY_INSURANCE_TYPE</param>
                </lookup>
            </reference>
            <reference name="primaryInsuranceBroker" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">INSURANCE_BROKER</param>
                </lookup>
            </reference>
            <reference name="usageType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">USAGE_TYPE</param>
                </lookup>
            </reference>
            <reference name="selfInsuranceAllowed" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="selfInsuranceLetter" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="disclose" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
            <reference name="billInsurance" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BILL_INSURANCE</param>
                </lookup>
            </reference>
            <field name="comments" type="textarea"/>
            <field name="agentName" type="text"/>
            <field name="agentContactName" type="text"/>
            <field name="entity" type="text"/>
            <reference name="entityType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ENTITY_TYPE</param>
                </lookup>
            </reference>
            <field name="premiumAmt" type="amount" label="Premium Amount"/>
            <field name="premiumPaymentAmt" type="amount" label="Premium Payment Amount"/>
            <field name="agentPhone" type="text"/>
            <field name="finance" type="boolean"/>
            <reference name="insuranceDetail" entity-type="InsuranceDetail" relation="owner"/>
            <reference name="liabilityInsuranceDetail" entity-type="InsuranceDetail" relation="owner"/>
        </entity>
        <entity name="InsuranceDetail" stereotype="managed">
            <field name="insuranceCarier" type="text"/>
            <field name="policyNumber" type="text"/>
            <field name="effectiveDate" type="date-time"/>
            <field name="expirationDate" type="date-time"/>
            <!--  Descriminator used for differentiating Liablility/Property Insurance detail panel
-->
            <field name="insuranceDetailType" type="text"/>
            <field name="amount" type="amount" label="Amount Insured"/>
            <reference name="lossPayee" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LOSS_PAYEE</param>
                </lookup>
            </reference>
            <reference name="additionalInsured" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">YES_OR_NO</param>
                </lookup>
            </reference>
        </entity>
                
        <entity name="CustRelationManagement" stereotype="managed">
        	<field name="firstName" type="text"/>
        	<field name="lastName" type="text"/>
        	<field name="ssn" type="secret" input-mask="99-9999999"/>
        	<field name="postion" type="text"/>
        	<field name="address" type="text"/>
        	<field name="percentOwned" type="percent"/>
        	<field name="usCitizen" type="boolean"/>
        	<field name="race" type="text"/>
        	<reference name="sex" entity-type="AttributeChoice" relation="refers-to">
        		<lookup>
        			<param name="key">SEX</param>
        		</lookup>
        	</reference>
        	<field name="pendingLawsuits" type="text"/>
        	<field name="bankruptcy" type="boolean"/>
         </entity>  
         
         <entity name="TenantProfile" stereotype="managed">
         	<field name="tenantName" type="text"/>
         	<field name="tenantBusiness" type="text"/>
         	<field name="yesrsAsTenant" type="number"/>
         	<field name="squareFeet" type="number"/>
         	<field name="leaseExpDate" type="date-time"/>
         	<field name="monthlyRent" type="amount"/>
         	<reference name="leaseType" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">LEASE_TYPE</param>
         		</lookup>
         	</reference>
         	<field name="vacantSuites" type="text"/>
         </entity>  
         
         <entity name="NewConstructionProject" stereotype="managed">
         	<field name="projectName" type="text"/>
         	<reference name="propertyType" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">PROPERTY_TYPE</param>
         		</lookup>
         	</reference>
         	<field name="projectDesc" type="textarea"/>
         	<field name="noOfNewEmployees" type="integer"/>
         	<field name="currentValue" type="amount"/>
         	<field name="valueOnComplete" type="amount"/>
         	<field name="totalCost" type="amount"/>
         	<field name="costPerSqFt" type="amount"/>
         	<field name="grossIncomeYr" type="amount"/>
         	<field name="expensesYr" type="amount"/>
         	<field name="netIncomeYr" type="derived:amount"/>
         	<reference name="isPropCollateral" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">YES_OR_NO</param>
         		</lookup>
         	</reference> 
         	<reference name="isPropInspected" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">YES_OR_NO</param>
         		</lookup>
         	</reference>
         	<reference name="propValueDetermined" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">PROPERTY_VALUE</param>
         		</lookup>
         	</reference>
         	<reference name="statusOfSite" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">SITE_STATUS</param>         			
         		</lookup>
         	</reference>
         	<field name="salesPrice" type="amount"/>
         	<field name="stories" type="integer"/>
         	<field name="units" type="integer"/>
         	<field name="officeUnits" type="integer"/>
         	<field name="otherUnits" type="integer"/>
         	<field name="residentUnits" type="integer"/>
         	<field name="residentRooms" type="integer"/>
         	<field name="residentSqFt" type="number"/>
         	<field name="officeSqFt" type="number"/>
         	<field name="retailSqFt" type="number"/>
         	<field name="commercialSqFt" type="number"/>
         	<field name="rentableSqFt" type="number"/>
         	<field name="lotSize" type="number"/>
         	<field name="totalBuildingSqFt" type="number"/>
         	<field name="pctCommercial" type="percent"/>
         	<field name="projectZone" type="text"/>
         	<reference name="isChgRequired" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">YES_OR_NO</param>
         		</lookup>	
         	</reference>
         	<field name="proposedName" type="text"/>
         	<field name="businessType" type="text"/>
         	<reference name="propType" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">PROPTYPE</param>
         		</lookup>
         	</reference>	
         	<field name="areaInAcres" type="number"/>
         	<field name="areaInSqFt" type="number"/>
         	<reference name="isLeased" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">YES_OR_NO</param>
         		</lookup>
         	</reference>
         	<reference name="isDefaulted" entity-type="AttributeChoice" relation="refers-to">
         		<lookup>
         			<param name="key">YES_OR_NO</param>
         		</lookup>
         	</reference>
         </entity> 
         <entity name="FinancialAssetLiability" stereotype="managed">
        	<field name="totalREValue" type="derived:money"/>
        	<field name="totalSecuritiesValue" type="derived:money"/>
        	<field name="totalMVValue" type="derived:money"/>
        	<field name="totalPPValue" type="derived:money"/>
        	<field name="totalAssetValue" type="derived:money"/>
        	<field name="totalMortgageLimit" type="derived:money"/>
        	<field name="totalMortgageBalance" type="derived:money"/>
        	<field name="totalLoanLimit" type="derived:money"/>
        	<field name="totalLoanBalance" type="derived:money"/>
        	<field name="totalLiabilityBalance" type="derived:money"/>
        	<field name="netWorth" type="derived:money"/>
        	<collection name="assetRealEstates" collection-type="list" entity-type="FinancialAssetRE" referred-by="assetLiability" relation="owner"/>
        	<collection name="assetSecurities" collection-type="list" entity-type="FinancialAssetSecurities" referred-by="assetLiability" relation="owner"/>
        	<collection name="assetMotorVechiles" collection-type="list" entity-type="FinancialAssetMV" referred-by="assetLiability" relation="owner"/>
        	<collection name="assetPersonalProperties" collection-type="list" entity-type="FinancialAssetPP" referred-by="assetLiability" relation="owner"/>
        	<collection name="liabilityMortgages" collection-type="list" entity-type="FinancialLiabilityMortgage" referred-by="assetLiability" relation="owner"/>
        	<collection name="liabilityLoans" collection-type="list" entity-type="FinancialLiabilityLoan" referred-by="assetLiability" relation="owner"/>
        </entity>
        
        <entity name="FinancialAssetRE" stereotype="managed" label="Financial Asset Real Estate">
        	<field name="assetValue" type="money"/>
        	<reference name="address" entity-type="Address" relation="owner"/>
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="assetLiability" entity-type="FinancialAssetLiability" relation="refers-to"/>
         </entity>
        
        <entity name="FinancialAssetSecurities" stereotype="managed" label="Financial Asset Marketable Securities">
        	<field name="assetValue" type="money"/>
        	<field name="description" type="text"/>
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="assetLiability" entity-type="FinancialAssetLiability" relation="refers-to"/>
        </entity>
        
        <entity name="FinancialAssetMV" stereotype="managed" label="Financial Asset Motor Vechiles">
        	<field name="assetValue" type="money"/>
        	<field name="description" type="text"/>
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="assetLiability" entity-type="FinancialAssetLiability" relation="refers-to"/>
         </entity>
        
        <entity name="FinancialAssetPP" stereotype="managed" label="Financial Asset Prersonal Property">
        	<field name="assetValue" type="money" label="Asset Value"/>
			<reference name="contents" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">HOME_CONTENTS</param>
                </lookup>
            </reference>         	
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="assetLiability" entity-type="FinancialAssetLiability" relation="refers-to"/>
         </entity>        
        
        <entity name="FinancialLiabilityMortgage" stereotype="managed" label="Financial Liability Mortgage">        	
        	<field name="limit" type="money" label="Limit"/>
        	<field name="balance" type="money" label="Balance"/>
            <field name="mortgagee" type="text"/>                      	
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="assetLiability" entity-type="FinancialAssetLiability" relation="refers-to"/>
        </entity>        
        
        <entity name="FinancialLiabilityLoan" stereotype="managed" label="Financial Liability Loans">
        	<field name="limit" type="money"/>
        	<field name="balance" type="money"/>
            <reference name="loanType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LIABILITY_LOAN_TYPE</param>
					<param name="groupMvel"><![CDATA[return 'LIABILITY_LOAN_TYPE_LOANS';]]></param>
                </lookup>
            </reference>
            <reference name="loanFor" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LIABILITY_LOAN_FOR</param>
                </lookup>
            </reference>        	
            <field name="loanLender" type="text"/>
            <reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="assetLiability" entity-type="FinancialAssetLiability" relation="refers-to"/>
        	 <field name="externalIdentifier" type="text" length="36" indexed="true" />
 			<find-queries>
 				<query name="byLoanLender" select="one">where loanLender = :loanLender</query>
                <query name="byExternalIdentifier" select="one">where externalIdentifier = :externalIdentifier</query>
            </find-queries>
        </entity>
		
		<entity name="FinancialIncomeExpense" stereotype="managed">
           	<field name="totalSalaryGrossIncome" type="derived:money"/>
        	<field name="totalSalaryNetIncome" type="derived:money"/>
        	<field name="totalDividendIncome" type="derived:money"/>
        	<field name="totalRentIncome" type="derived:money"/>
        	<field name="totalGovtIncome" type="derived:money"/>
        	<field name="totalIncome" type="derived:money"/>
        	<field name="totalMortgagePayment" type="derived:money"/>
        	<field name="totalLoanPayment" type="derived:money"/>
        	<field name="totalMiscPayment" type="derived:money"/>
        	<field name="totalExpense" type="derived:money"/>
        	<collection name="salaries" collection-type="list" entity-type="FinancialIncomeSalary" referred-by="incomeExpense" relation="owner"/>
        	<collection name="dividends" collection-type="list" entity-type="FinancialIncomeDividend" referred-by="incomeExpense" relation="owner"/>
        	<collection name="rentalIncomes" collection-type="list" entity-type="FinancialIncomeRental" referred-by="incomeExpense" relation="owner"/>
        	<collection name="governmentalIncomes" collection-type="list" entity-type="FinancialIncomeGovt" referred-by="incomeExpense" relation="owner"/>
        	<collection name="mortgages" collection-type="list" entity-type="FinancialExpenseMortgage" referred-by="incomeExpense" relation="owner"/>
        	<collection name="loans" collection-type="list" entity-type="FinancialExpenseLoan" referred-by="incomeExpense" relation="owner"/>
        	<collection name="miscExpenses" collection-type="list" entity-type="FinancialExpenseMisc" referred-by="incomeExpense" relation="owner"/>        	
        </entity>
        
        <entity name="FinancialIncomeSalary" stereotype="managed">
            <field name="grossIncome" type="money"/>
            <field name="netIncome" type="money"/>
            <field name="source" type="text"/>
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="incomeExpense" entity-type="FinancialIncomeExpense" relation="refers-to"/>
        </entity>
        
        <entity name="FinancialIncomeDividend" stereotype="managed">
            <field name="netIncome" type="money"/>
            <field name="nameOfListing" type="text"/>
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="incomeExpense" entity-type="FinancialIncomeExpense" relation="refers-to"/>
        </entity>
        
        <entity name="FinancialIncomeRental" stereotype="managed" label="Financial Income Rental">
            <field name="rentPaid" type="money"/>
            <field name="rentalAddress" type="text"/>
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="incomeExpense" entity-type="FinancialIncomeExpense" relation="refers-to"/>
        </entity>
        
        <entity name="FinancialIncomeGovt" stereotype="managed" label="Financial Income Governmental">
            <field name="netIncome" type="money"/>
            <reference name="govtIncomeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">GOVERNMENTAL_INCOME_TYPE</param>
                </lookup>
            </reference> 
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="incomeExpense" entity-type="FinancialIncomeExpense" relation="refers-to"/>
        </entity>
        
        <entity name="FinancialExpenseMortgage" stereotype="managed" label="Financial Expense">
        	<field name="monthlyPayment" type="money"/>
            <field name="mortgagee" type="text"/>                  	            
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="incomeExpense" entity-type="FinancialIncomeExpense" relation="refers-to"/>
         </entity>
         
        <entity name="FinancialExpenseLoan" stereotype="managed" label="Financial Expense">
        	<field name="balancePayment" type="money"/>
            <reference name="loanType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LIABILITY_LOAN_TYPE</param>
                </lookup>
            </reference>
            <reference name="loanFor" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LIABILITY_LOAN_FOR</param>
                </lookup>
            </reference>        	
            <field name="loanLender" type="text"/>
           	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="incomeExpense" entity-type="FinancialIncomeExpense" relation="refers-to"/>
         </entity>
         
        <entity name="FinancialExpenseMisc" stereotype="managed" label="Financial Expense">
        	<field name="balancePayment" type="money"/>
            <reference name="miscExpenseType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">LIABILITY_MISC_EXPENSE</param>
                </lookup>
            </reference>    	                         
        	<reference name="borrower" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BORROWER_TYPE</param>
                </lookup>
            </reference>
        	<reference name="incomeExpense" entity-type="FinancialIncomeExpense" relation="refers-to"/>
        </entity>                
        
        <entity name="OneStopApp" stereotype="managed" label="One Stop App">
            <reference name="productType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="facilitySubType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CRE_FACILITY_SUB_TYPE</param>
                </lookup>
            </reference>
        	<reference name="propertyAddress" entity-type="Address" relation="owner" />
            <reference name="nonIndividualCustomer" entity-type="Customer" relation="refers-to" label="Borrower" ruleTriggerOnEvent="true">
            		<filters>
            			<filter triggerExpr="isdef root" expr="entity.customerType.key == 'CUSTOMER_TYPE_NON_INDIVIDUAL'"/>            		
                    </filters>
            </reference>
        	<field name="entityName" type="text" label="Entity Name"/>
            <reference name="legalEntityType" entity-type="AttributeChoice" relation="refers-to" label="Legal Entity Type" required="false">
                <lookup>
                    <param name="key">LEGAL_ENTITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="purposeCode" entity-type="AttributeChoice" relation="refers-to">
            	<lookup>
                 	<param name="key">PURPOSE_CODE</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.productType != null) { return thiz.productType.key; } else { return null; }]]></param>
                </lookup>
            </reference>
            <field name="term" type="integer" />            
            <field name="requestedAmt" type="amount" label="Requested Amount"/>
            <field name="otherLegalEntityType" type="text" label="Other Legal Entity Type"/>
			<field name="federalTaxId" type="secret" input-mask="99-9999999" label="Federal Tax ID"/>
			<reference name="contact" entity-type="Contact" relation="owner" />
			<reference name="contactCustomer" entity-type="Customer" relation="refers-to" label="Contact Customer" ruleTriggerOnEvent="true">
				<filters>
            			<filter triggerExpr="isdef root" expr="entity.customerType.key != 'CUSTOMER_TYPE_COUNTER_PARTY'"/>            		
                 </filters>
			</reference>
			<reference name="guarantorCustomer" entity-type="Customer" relation="refers-to" label="Guarantor" ruleTriggerOnEvent="true"/>
			<reference name="guarantor" entity-type="Contact" relation="owner" />
			<field name="guarantorSsn" type="secret"  input-mask="99-9999999" label="Social Security Number" />
			<!-- CRE LPOB-962 -->
			<reference name="dayCountConvention" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FACILITY_TYPE_BASIS</param>
                </lookup>
            </reference>
            <field name="amortizationTerm" type="integer" />
            <field name="interestRate" type="percent" />
            <field name="capRate" type="percent" />
            <reference name="productPurpose" entity-type="AttributeChoice" relation="refers-to">
            	<lookup>
                 	<param name="key">PRODUCT_PURPOSE</param>
                </lookup>
            </reference>
            <reference name="collateralCustomer" entity-type="Collateral" relation="refers-to" ruleTriggerOnEvent="true">
            	<lookup name="mvel">
                   <param name="expr">if(thiz.nonIndividualCustomer != null  &amp;&amp; thiz.nonIndividualCustomer.collaterals != null) {return thiz.nonIndividualCustomer.allCollaterals;}else{ return new java.util.ArrayList();}</param>
                 </lookup>
            </reference>
            <collection name="collaterals" collection-type="list" entity-type="Collateral" relation="owner" referred-by="oneStopApp"/>
        </entity>
        <entity name="OneStopExposure" stereotype="managed" label="One Stop Exposure">
            <reference name="productType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">EXPOSURE_LIMIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
        	
            <reference name="counterParty" entity-type="Customer" relation="refers-to" label="Counter Party" ruleTriggerOnEvent="true">
            		<filters>
            			<filter triggerExpr="isdef root" expr="entity.customerType.key == 'CUSTOMER_TYPE_COUNTER_PARTY'"/>            		
                    </filters>
            </reference>
            <reference name="legalEntityType" entity-type="AttributeChoice" relation="refers-to" label="Legal Entity Type" required="false">
                <lookup>
                    <param name="key">LEGAL_ENTITY_TYPE</param>
                </lookup>
            </reference>
            <field name="entityName" type="text" label="Entity Name"/>
            <field name="requestedAmt" type="amount" label="Limit Amount"/>
			<field name="federalTaxId" type="secret" input-mask="99-9999999" label="Federal Tax ID"/>
			<reference name="contact" entity-type="Contact" relation="owner" />
			<reference name="contactCustomer" entity-type="Customer" relation="refers-to" label="Contact Customer" ruleTriggerOnEvent="true">
          		<filters>
          			<filter triggerExpr="isdef root" expr="entity.customerType.key == 'CUSTOMER_TYPE_INDIVIDUAL'"/>            		
                  </filters>			
			</reference>
        </entity>
        
        <entity name="BranchInformation" stereotype="managed" label="Branch Information">
         <reference name="financialCenter" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FINANCIAL_CENTER</param>
                </lookup>
         </reference>   
         <reference name="bankNumber" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BANK_NUMBER</param>
                </lookup>
         </reference> 
         <reference name="fimp" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FIMP</param>
                </lookup>
         </reference> 
         <reference name="assignmentUnit" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">ASSIGNMENT_UNIT</param>
                </lookup>
         </reference> 
        </entity>
        
        <entity name="ProductLimits" stereotype="managed" label="Limits">
 	        <field name="refNumber" type="auto" label="Product Number"/>
 	       <reference name="productType" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">PRODUCT_TYPE</param>
                </lookup>
            </reference>
            <field name="amount" type="amount" label="Amount"/>
            <reference name="facilityCategory" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_CATEGORY</param>
                </lookup>
            </reference>
             <reference name="facilityType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>
            <reference name="sbaType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">SBA_TYPE</param>
                </lookup>
            </reference>
            <reference name="purposeCode" entity-type="AttributeChoice" relation="refers-to">
            	<lookup>
                 	<param name="key">PURPOSE_CODE</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.facilityType != null) { return thiz.facilityType.key; } else { return null; }]]></param>
                </lookup>
            </reference>
            <field name="requestedLoanAmt" type="amount" label="Requested Amount" required="false"/>
            <reference name="natureOfSecurity" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">NATURE_OF_SECURITY</param>
                </lookup>
            </reference>
             <collection name="collaterals" collection-type="list" entity-type="Collateral" relation="owner" referred-by="limits"/>
             <reference name="commentGroup" entity-type="CommentGroup" relation="owner"/>
             <collection name="sublimits" collection-type="list" entity-type="ProductLimits" relation="owner"/>
             <reference name="pricingOption" entity-type="PricingOption" relation="owner"/>
             <reference name="facility" entity-type="Facility" relation="refers-to"/>
            
        </entity>
        
        <entity name="ComplianceDetail" stereotype="managed">
			<reference name="compliance" entity-type="Compliance" relation="owner" required="true"/>
			<field name="nameMatchedAgainst" type="text" required="true"/>
			<field name="accuracy" type="integer"/> <!--   required="true"-->
			<field name="categoryHierarchy" type="text" length="400"/>
			<reference name="address" entity-type="ContactInfo" relation="refers-to"/>
			<field name="nationality" type="text"/>
			<field name="passportNumber" type="text" length="400"/>
			<field name="birthDttm" type="date-time" label="Date Of Birth"/>
			<field name="lastUpdatedDttm" type="date-time"/>
			<field name="birthCity" type="text"/>
			<field name="deceasedDttm" type="date-time"/>
			<field name="itemId" type="text"/>
			<field name="aliasName" type="textarea"/>
			<field name="alternateSpelling" type="textarea"/>
			<field name="taxIdDetail" type="text"/>
			<field name="dbaNameDetail" type="text"/>
			<!-- <collection name="partyExtIdentifiers" collection-type="list" entity-type="PartyExtIdentifier" referred-by="complianceDetail" relation="owner"/> -->
		</entity>
        
        <entity name="CompanyInformation" stereotype="managed" label="Company Information">
        	<field name="businessName" type="text" label="Business Name"/>
        	<field name="contactName" type="text" label="Contact Name"/>
        	<field name="businessPhone" type="phone" label="Business Phone"/>
        	<field name="fax" type="phone" length="50"/>
        	<field name="email" type="email" label="Email"/>
        	<field name="zipCode" type="text" label="Zip Code"/>
        	<field name="howLongInBus" type="text" label="How Long in Business ?"/>
        	<reference name="stateOfIncorp" entity-type="State" relation="refers-to" label="State of incorporation"/>
        	<field name="dateOfIncorp" type="date-time" label="Date of incorporation"/>
        	<field name="soleProprietorship" type="text" label="Sole Proprietorship"/>
        	<field name="partnership" type="text" label="Partnership"/>
        	<field name="corporation" type="text" label="Corporation"/>
        	<field name="other" type="text" label="Other"/>
        	<field name="fedTaxId" type="secret" input-mask="99-9999999" label="Fed. Tax Id"/>
        	<field name="owner" type="text" label="Owner"/>
        	<field name="title" type="text" label="Title"/>
        	<field name="ownerShip" type="percent" />
        	<field name="ssn" type="secret"  input-mask="99-9999999" label="SSN"/>
        	<field name="cell" type="phone" label="cell"/>
        	<field name="website" type="url" label="Website"/>
        	<field name="ownerEmailAdd" type="email" label="Owner E-mail address"/>
        	<field name="city" type="text" label="City"/>
        	<reference name="state" entity-type="State" relation="refers-to" label="State"/>
        	<field name="address" type="text" label="Address"/>
        </entity>
        
        <entity name="BusinessInformation" stereotype="managed" label="Business Information">
        	<field name="typeOfEquipment" type="text" label="Type of equipment you sell"/>
        	<field name="annualSales" type="text" label="Annual Sales"/>
        	<field name="equipmentCostRange" type="text" label="Equipment Cost Range" />
        	<field name="percentageOfSystemsLeased" type="text" />
        	<field name="otherLeasingComUsed" type="text" label="Other Leasing Companies Used" />
        	<field name="noOfSalesStaff" type="text" label="Number of sales staff" />
        </entity>
        
		<entity name="BankInformation" stereotype="managed" label="Bank Information">        
        	<field name="primaryBankName" type="text" label="Primary bank name"/>
        	<field name="bankContact" type="text" label="Bank Contact"/>
        	<field name="city" type="text" label="City"/>
        	<field name="state" type="text" label="State"/>
        	<field name="phone" type="phone" label="Phone"/>
        </entity>
        
        <entity name="SupplierInformation" stereotype="managed" label="Manufacturer/ Supplier Trade Reference Information">
        	<field name="companyName" type="text" label="Company Name"/>
        	<field name="phone" type="phone" label="Phone"/>
        	<field name="fax" type="text" length="50"/>
        	<field name="email" type="email" label="Email"/>
        </entity>
        
          
          <entity name="ResidualReference" stereotype="configuration"  label="Residuals">
          	<field name="residualValue" type="amount"/>
          	<field name="depreciationLife" type="number"/>
          	<reference name="operatingUnit" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">OPERATING_UNIT</param>
				</lookup>
			</reference>
				
			<reference name="sbu" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">STRATEGIC_BUSINESS_UNIT</param>
				</lookup>
			</reference>
			
			 <reference name="assetClass" entity-type="AttributeChoice" relation="refers-to" >
                 <lookup>
                 	<param name="key">ASSET_CLASS</param>
                 	<param name="groupMvel"><![CDATA[return 'ROOT';]]></param>
                </lookup>
			</reference>
            <reference name="assetSubclass" entity-type="AttributeChoice" relation="refers-to" >
                 <lookup>
                 	<param name="key">ASSET_CLASS</param>
                 	<param name="groupMvel"><![CDATA[if(thiz.assetClass != null) { return thiz.assetClass.key; } else { return null; }]]></param>
                </lookup>
            </reference>
			
			<reference name="assetsCondition" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CONDITION_OF_EQUIPMENT</param>
				</lookup>
			</reference>
			<reference name="residualType" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RESIDUAL_TYPE</param>
				</lookup>
			</reference>
			<reference name="depreciationMethod" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">DEPRECIATION_METHOD</param>
				</lookup>
			</reference>
			<reference name="currency" entity-type="Currency" relation="refers-to"/>
			<find-queries>
                <query name="byAssetClassSubclassAndCondition" select="many" cacheable="true">where operatingUnit.key = :operatingUnit_key and sbu.key = :sbu_key and assetClass.key = :assetClass_key and assetSubclass.key = :assetSubclass_key and assetsCondition.key = :assetsCondition_key</query>
            	<query name="byAssetClassAndSubclass" select="many" cacheable="true">where operatingUnit.key = :operatingUnit_key and sbu.key = :sbu_key and assetClass.key = :assetClass_key and assetSubclass.key = :assetSubclass_key and assetsCondition is null</query>
            	<query name="byAssetClassAndCondition" select="many" cacheable="true">where operatingUnit.key = :operatingUnit_key and sbu.key = :sbu_key and assetClass.key = :assetClass_key  and assetsCondition.key = :assetsCondition_key and assetSubclass is null</query>
            	<query name="byAssetClass" select="many" cacheable="true">where operatingUnit.key = :operatingUnit_key and sbu.key = :sbu_key and assetClass.key = :assetClass_key and assetSubclass is null and assetsCondition is null</query>
            </find-queries>
          </entity>
          <entity name="ValueGrid" stereotype="configuration" label="ValueGrid">
			<field name="name" type="text" label="Name"/>
			<field name="effectiveFromDate" type="date-time" label="Effective From Date"/>
			<field name="effectiveToDate" type="date-time" label="Effective To Date"/>
			<field name="grid" type="grid" label="Grid"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>			
			<display-format>$o.name$</display-format>
            <find-queries>
                <query name="byName" select="one">where name = :name</query>
                <query name="byNameAndEffectiveDate" select="one">where name = :name and  effectiveFromDate &lt;= :currentDate and effectiveToDate &gt; :currentDate</query>
            </find-queries>
 		  </entity>
		  <entity name="PricingPolicy" stereotype="configuration" label="Pricing Policy">
			<field name="nameDer" type="derived:text" />
			<field name="descriptionDer" type="derived:text"/>
			<field name="statusDer" type="derived:text"/>
			<field name="name" type="text" label="Policy Name" tags="Header"/>
			<field name="refNumber" type="auto" tags="Header"/>
			<field name="description" type="textarea" length="755"/>
			<field name="active" type="boolean" required="false"/>
			<field name="effectiveFromDate" type="date-time" label="Effective From Date"/>
			<field name="effectiveToDate" type="date-time" label="Effective To Date"/>
			<field name="exceptionFormula" type="formula" />
			<field name="formula" type="formula" />
			<field name="validationFormula" type="formula" />
			<reference name="term" entity-type="Term" relation="owner"/>
			<reference name="currency" entity-type="Currency" relation="refers-to"/>
			<reference name="documentGroup" entity-type="DocumentGroup" relation="owner"/>
			<collection name="promotionPolicies" collection-type="list" label="Associated Promotions" entity-type="PromotionPolicy" relation="refers-to"/>			
			<collection name="associatedPrograms" collection-type="list" label="Associated Programs" entity-type="Program" relation="refers-to" referred-by="PricingProfiles"/>			
            <reference name="ou" entity-type="AttributeChoice" relation="refers-to" label="Operating Unit">
                <lookup>
                    <param name="key">OPERATING_UNIT</param>
                </lookup>
            </reference>
            <reference name="sbu" entity-type="AttributeChoice" relation="refers-to" label="Strategic Business Unit">
                <lookup>
                    <param name="key">STRATEGIC_BUSINESS_UNIT</param>
                </lookup>
            </reference>
             <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to"/>
               <!--  <lookup>
                    <param name="workflowEntity">WORKFLOW_ENTITY_CUSTOMER</param>
                </lookup>
            </reference> -->
			<feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>			
			<display-format>$o.name$</display-format> 
            <find-queries>
                <query name="byName" select="one">where name = :name</query>
                <query name="byNameCaseInsensitive" select="one">where lower(name) like lower(:name)</query>
            </find-queries>
		</entity> 
		
		<entity name="PromotionPolicy" stereotype="configuration" label="Promotions">
			<field name="nameDer" type="derived:text"/>
			<field name="descriptionDer" type="derived:text" />
			<field name="ouDer" type="derived:text" />
			<field name="sbuDer" type="derived:text" />
			<field name="active" type="boolean" required="false"/>
			<field name="isExclusive" type="boolean" required="false"/>
			<field name="useWhenExclusive" type="boolean" required="false"/>
			<reference name="currency" entity-type="Currency" relation="refers-to"/>
			<field name="isForAttachements" type="boolean" required="false"/>
			<field name="residualIncluded" type="boolean" required="false"/>
			<field name="notes" type="textarea" />
			<field name="exclude" type="boolean" required="false"/>
			<reference name="term" entity-type="Term" relation="owner"/>
            <reference name="rateType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RATE_TYPE</param>
                </lookup>
            </reference>
            <collection name="paymentFrequency" entity-type="AttributeChoice" collection-type="list" relation="refers-to">
                <lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                </lookup>
            </collection>
            <field name="maxFinanceAmt" type="amount"/>
            <field name="minFinanceAmt" type="amount"/>
			<collection name="facilityCategoryTypes" collection-type="list" entity-type="FacilityCategoryType" relation="refers-to"/>
            <collection name="program" collection-type="list" entity-type="Program" relation="refers-to"/>
			<reference name="ou" entity-type="AttributeChoice" relation="refers-to" label="Operating Unit">
                <lookup>
                    <param name="key">OPERATING_UNIT</param>
                </lookup>
            </reference>
            <reference name="sbu" entity-type="AttributeChoice" relation="refers-to" label="Strategic Business Unit">
                <lookup>
                    <param name="key">STRATEGIC_BUSINESS_UNIT</param>
                </lookup>
            </reference>
			<field name="name" type="text" label="Promotion Name" tags="Header"/>
			<field name="refNumber" type="auto" tags="Header"/>			
			<field name="description" type="textarea" length="755"/>
			<field name="effectiveFromDate" type="date-time" label="Effective From Date"/>
			<field name="effectiveToDate" type="date-time" label="Effective To Date"/>
			<field name="exceptionFormula" type="formula" />
			<field name="formula" type="formula" />
			<field name="validationFormula" type="formula" />
			<field name="rateReduction" type="percent" />
			<collection name="waivedFees" collection-type="list" entity-type="FeePolicy" relation="refers-to"/>
            <reference name="promotionType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">PROMOTION_POLICY_TYPE</param>
                </lookup>
            </reference>
            <reference name="afsPromotion" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AFS_PROMOTION</param>
                </lookup>
            </reference>
            <collection name="pricingPolicies" collection-type="list" entity-type="PricingPolicy" relation="refers-to" referred-by="promotionPolicies"/>
           	<collection name="partners" collection-type="list" entity-type="Partner" relation="refers-to" />
			<feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>			
			<display-format>$o.name$</display-format>
            <find-queries>
                <query name="byName" select="one">where name = :name</query>
            </find-queries>
		</entity> 
		
		<entity name="FeePolicy" stereotype="configuration" label="Fees">
			<change-log compare-profile="changeLog-FeePolicy"/>
			<field name="active" type="boolean" required="false"/>
			<field name="name" type="text" tags="Header" unique="name"/>
			<field name="refNumber" type="auto" tags="Header"/>		
			<field name="description" type="textarea" length="755"/>
			<field name="effectiveFromDate" type="date-time" label="Effective From Date" ruleTriggerOnEvent="true"/>
			<field name="effectiveToDate" type="date-time" label="Effective To Date" />
			<field name="mayBeDisclosed" type="boolean" required="false" label="May Be Disclosed"/>	
			<field name="adhocFee" type="boolean" required="false" label="Ad hoc Fee"/>
			<field name="excludeFromAPR" type="boolean" required="false" label="Exclude From APR"/>	
			<field name="exceptionFormula" type="formula" />
			<field name="formula" type="formula" />
			<field name="validationFormula" type="formula" />
			<field name="minimumAmt" type="amount"/>
			<field name="maximumAmt" type="amount"/>
			<field name="minimumPct" type="percent"/>
			<field name="maximumPct" type="percent"/>
			<field name="defaultAmt" type="amount"/>
			<field name="defaultPct" type="percent" ruleTriggerOnEvent="true"/>
			<field name="feeChanged" type="boolean"/>
			<field name="feeDesc" type="text"/>
<!-- 			<field name="effectiveDefaultFeePct" type="percent"/> -->
			<reference name="currency" entity-type="Currency" relation="refers-to"/>
			<reference name="calculationMethod" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">CALCULATION_METHOD</param>
                </lookup>
            </reference>
			<reference name="feeFrequency" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FEE_FREQUENCY</param>
                </lookup>
            </reference>
			 <reference name="ou" entity-type="AttributeChoice" relation="refers-to" label="Operating Unit">
                <lookup>
                    <param name="key">OPERATING_UNIT</param>
                </lookup>
            </reference>
            <reference name="sbu" entity-type="AttributeChoice" relation="refers-to" label="Strategic Business Unit">
                <lookup>
                    <param name="key">STRATEGIC_BUSINESS_UNIT</param>
                </lookup>
            </reference>
            <reference name="pricingIndex" entity-type="AttributeChoice" relation="refers-to">
            	<lookup>
            		<param name="key">PRICING_INDICES</param>
            	</lookup>
            </reference>
        	<reference name="feeType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">FEE_POLICY_TYPE</param>
                </lookup>
            </reference>
            <reference name="methodOfCollection" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AFS_COLLECTION_METHOD</param>
                </lookup>
            </reference>
			 <reference name="afsFeeType" entity-type="AfsFee" relation="refers-to"/>
			<feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>			
			<display-format>$o.name$</display-format>
            <find-queries>
            	<query name="byFeeChanged" select="many">where feeChanged = :feeChanged</query>
            	<query name="byPricingIndex" select="one">where pricingIndex.key = :key</query>
                <query name="byName" select="one">where name = :name</query>
			    <query name="byAdhocFee" select="many">where adhocFee = :adhocFee</query>
  			</find-queries>
		</entity> 		
		<entity name="AfsFee" stereotype="managed">
			<field name="afsValue" type="text"/>
            <field name="afsKey" type="text" tags="header" indexed="true" label="Key"/>
            <field name="afsCode" type="text" tags="header" indexed="true" />
            <display-format>$o.afsValue$</display-format>
            <find-queries>
                <query name="byAfsKey" select="one" cacheable="true">where afsKey = :afsKey</query>
                <query name="quickSearch" select="many" cacheable="true">where afsCode like :q</query>
            </find-queries>
		</entity>
		<entity name="Term" stereotype="managed">
			<field name="maximumTerm" type="integer" />
			<field name="eligibleTerms" type="integer" />
			<field name="termMax" type="integer" />
			<field name="termStart" type="integer" />
			<reference name="termIncrement" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">TERM_INCREMENT</param>
                </lookup>
            </reference>
			<reference name="missingTerms" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">MISSING_TERMS</param>
                </lookup>
            </reference>
			</entity>  
			<entity name="FacilityCategoryType" stereotype="managed">
			<field name="fixedRate" type="boolean"/>
			<field name="floatingRate" type="boolean"/>
			<field name="outputPayment" type="boolean"/> 
			<field name="allowBalloon" type="boolean"/>  
			<field name="outputRate" type="boolean"/>
			<field name="outputYield" type="boolean"/>
			<field name="drawingPeriod" type="boolean"/>
			<field name="advanceMonies" type="boolean"/>
			<field name="directExposure" type="boolean"/>
			<field name="active" type="boolean"/> 
			<field name="increaseAvailable" type="boolean" />
            <reference name="backOffice" entity-type="AttributeChoice" relation="refers-to">
		    	<lookup>
		        	<param name="key">BACK_OFFICE</param>
		      	</lookup> 
        	</reference>
			 <reference name="facilityCategory" entity-type="AttributeChoice" relation="refers-to">
		    	<lookup>
		        	<param name="key">CREDIT_FACILITY_CATEGORY</param>
		      	</lookup>
        	</reference>
           <reference name="facilityType" entity-type="AttributeChoice" relation="refers-to">
		    	<lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                    <param name="groupMvel"><![CDATA[if(thiz.facilityCategory != null) { return thiz.facilityCategory.key; } else { return null; }]]></param>
                </lookup>
        	</reference>
        	<reference name="prgPricingProfiles" entity-type="PricingPolicy" relation="refers-to">
        		<filters>
                    <filter triggerExpr="isdef root" expr=" entity.active !=null  &amp;&amp;  entity.getActive()"/>
				</filters>
        	</reference>
			<display-format>$o.facilityType.value$-($o.facilityCategory.value$)</display-format>
        </entity>
        <!-- Fraud Check Start -->
		<entity  name="FcParty" stereotype="configuration">
			<field name="recordNumber" type="auto" />
			<field name="reason" type="text"/>
			<field name="caseId" type="text"/>
			<field name="firstName" type="text"/>
			<field name="middleName" type="text"/>
			<field name="lastName" type="text"/>
			<field name="ssn" type="secret" input-mask="999-99-9999" />
			<field name="mothersMaidenName" type="text"/>
			<field name="alias" type="text"/>
			<field name="birthDate" type="date-time"/>
			<field name="placeOfBirth" type="text"/>
			<field name="driversLicenseNumber" type="text"/>
			<field name="passportNumber" type="text"/>
			<field name="countryOfCitizenship" type="text"/>
			<field name="employerName" type="text"/>
			<field name="federalTax" type="secret" input-mask="99-9999999"/>
			<field name="email" type="text"/>
			<reference name="active" entity-type="AttributeChoice"
				relation="refers-to">
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			</reference>	
			<reference name="partyType" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">CUSTOMER_TYPE</param>
                </lookup>
            </reference>
            <collection name="addresses" collection-type="list" entity-type="FcAddress" relation="owner"/>
            <reference name="displayAddress" entity-type="derived:FcAddress" relation="owner"/>
            <collection name="accInfo" collection-type="list" entity-type="FcAccInfo" relation="owner"/>
            <reference name="commentGroup" entity-type="FcCommentGroup" relation="owner"/><display-format>$o.refNumber$</display-format>
            <find-queries>
            	<query name="fetchAllFraudParties" select="many">where recordNumber IS NOT NULL</query>
            </find-queries>
		</entity>
		<entity name="FcAddress" stereotype="managed">
        	
			<field name="address1" type="text" label="Address Line 1" />
            <field name="address2" type="text" label="Address Line 2" />
            <field name="address3" type="text" label="Address Line 3" />
            <field name="city" type="text" />
            <reference name="stateProvince" entity-type="State" relation="refers-to" label="State/Province"/>
            <field name="zip" type="text" />
            <reference name="country" entity-type="Country" relation="refers-to" label="Country"/>
            
            <field name="phoneNumber" type="phone" />
            <field name="phoneNumber2" type="phone" />
            <field name="phoneNumber3" type="phone" />
            
            <field name="cellnumber" type="phone" />
            <field name="cellnumber2" type="phone" />
            <field name="cellnumber3" type="phone" />
            
            <field name="email" type="email" label="Email"/>
            <field name="email2" type="email" label="Email 2"/>
            <field name="email3" type="email" label="Email 3"/>
            
            <field name="fax" type="phone" label="Fax Number"/>
            
            <field name="website" type="url" label="Web Address 1"/>
            <field name="website2" type="url" label="Web Address 2"/>
            
            <reference name="addressType" entity-type="AttributeChoice" relation="refers-to" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">ADDRESS_USE_TYPE</param>
                </lookup>
            </reference>
        </entity>
		<entity  name="FcAccInfo" stereotype="managed">
			<field name="accType" type="text" />
			<field name="accNo" type="text"/>
			<field name="accOpenDate" type="date-time"/>
			<field name="businessName" type="text"/>
			<field name="custName" type="text"/>		
					
		</entity>
		<entity name="FcCommentGroup" stereotype="managed">
        	<cache strategy="nonstrict-read-write" />
            <field name="commentGroupName" type="text"/>
            <field name="entityId" type="text" length="36"/>
            <collection name="comments" collection-type="list" entity-type="FcComment" referred-by="fcCommentGroup" relation="owner"/>
        </entity>
         <entity name="FcComment" stereotype="managed">
            <cache strategy="nonstrict-read-write" />
            <field name="commentText" type="textarea" label="Text" required="false"/>
			<field name="numIndex" type="auto"/>
			<field name="date" type="date-time"/>
			<field name="time" type="derived:text"/>
			<field name="createdDttm" type="date-time"/>
			<field name="author" type="text"/>
            <field name="entityId" type="text" length="36"/>
            <reference name="commentType" entity-type="AttributeChoice" relation="refers-to" required="false">
               <lookup>
                    <param name="key">FC_COMMENT_TYPE</param>
               </lookup>
            </reference>
            <reference name="commentScope" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">COMMENT_SCOPE</param>
                </lookup>
            </reference>
            <reference name="commentGroup" entity-type="CommentGroup" relation="refers-to"/>
            <feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
            <display-format>$o.commentText$</display-format>
		 </entity>		
		<!-- Fraud Check End -->  
		<!-- Scoring Start -->    
		<entity name="ScrAttributeSeed"  stereotype="configuration" label="Score Attribute">
			<change-log compare-profile="changeLog-ScrAttributeSeed"/>
			<field name="name" type="name" label="Name" />
            <field name="description" type="textarea" label="Description" />
            <reference name="applicability" entity-type="AttributeChoice" relation="refers-to" label="Applicability" >
                <lookup>
                    <param name="key">SCORING_ATTRIBUTE_APPLICABILITY</param>
                </lookup>
            </reference>
            <field name="key" type="text" label="Key"/>
           	 <reference name="display" entity-type="AttributeChoice" relation="refers-to" label="Display On Scoring Tab" >
				<lookup>
					<param name="key">YES_OR_NO</param>
				</lookup>
			 </reference>
<!--             <field name="effectiveFrom" type="date-time" label="Effective From" /> -->
<!--             <field name="effectiveTo" type="date-time" label="Effective To" /> -->
             <feature operation="implements">
                <data>com.thirdpillar.foundation.model.EffectiveDateRange</data>
            </feature>
            <field name="value" type="textarea" label="Description"/>
    	    <field name="group" type="text" label="Group (as Comma Separated Values)"/> 
    	    <field name="ognl" type="text"/>
    	    <collection name="scrAttrParams" collection-type="list" entity-type="ScrAttrParam" referred-by="ScrAttributeSeed" relation="owner"/>
		    <display-format>- $o.name$</display-format>
    	    <find-queries>
                <query name="byKey" select="one" cacheable="true">where key = :key</query>
                <query name="byGroup" select="one" cacheable="true">where group = :group</query>
                <!-- <query name="byEntityAndAttributeKey" select="many" cacheable="true">where entityType = :entity_Type and attribute.key = :attribute_key</query> -->
                <query name="byApplicability" select="many" cacheable="true">where applicability.key = :applicability_key</query>
            </find-queries>
        </entity>
        <entity name="ScrRcmRuleSeed"  stereotype="configuration" label="Scoring Rule">
			<field name="name" type="name" label="Name Of the Rule"/>
			<field name="description" type="textarea" label="On Screen Description"/>
 			<reference name="firstScrRuleParam" entity-type="derived:ScrRuleParam" relation="owner" />
			<reference name="applicability" entity-type="AttributeChoice" relation="refers-to" label="Applicability" >
                <lookup>
                    <param name="key">SCORING_ATTRIBUTE_APPLICABILITY</param>
                </lookup>
            </reference>
            <reference name="recommendationCategory" entity-type="AttributeChoice" relation="refers-to" label="Recommendation Category">
                <lookup>
                    <param name="key">RECOMMENDATION_CATEGORY</param>
                    <param name="groupMvel"><![CDATA[ return 'SCRORING_RULE_RECOMMENDATION_CATEGORY'; ]]></param>
                </lookup>
            </reference>
            <reference name="recommendation" entity-type="AttributeChoice" relation="refers-to" label="Recommendation">
                <lookup>
                    <param name="key">RECOMMENDATION_DECISION</param>
              </lookup>
            </reference>
            <reference name="program" entity-type="AttributeChoice" relation="refers-to" label="Program">
            	<lookup>
                    <param name="key">SCORING_RECOMRULE_PROGRAM</param>
                </lookup>
            </reference>
            <reference name="recommendationLevel" entity-type="AttributeChoice" relation="refers-to" label="Recommendation Level" >
                <lookup>
                    <param name="key">RECOMMENDATION_LEVEL</param>
                </lookup>
            </reference>  
         <reference name="recommendationReasonCode" entity-type="RecomReasonSeed" relation="refers-to" label="Recommendation Reason Code" >
           		 <filters>
					<filter triggerExpr="isdef root" expr="entity.active !=null  &amp;&amp;  entity.active "/>
				 </filters>
            </reference>
            <reference name="reasonLevel" entity-type="AttributeChoice" relation="refers-to"  label="Reason Level">
                <lookup>
                    <param name="key">REASON_LEVEL</param>
                </lookup>
            </reference>
            <reference name="exceptionAuthority" entity-type="AttributeChoice" relation="refers-to" label="Exception Authority" >
                <lookup>
                    <param name="key">RAC_EXCEPTION_AUTHORITY</param>
                </lookup>
            </reference>
            <field name="effectiveFrom" type="date-time" label="Effective From"/>
            <field name="effectiveTo" type="date-time" label="Effective To"/>
            <field name="key" type="text" indexed="true" label="Key"/>
            <field name="value" type="textarea" label="Description"/>
           	
           	<!--<reference name="attribute" entity-type="ScoringSeed" relation="refers-to"/>
           	<field name="entityType" type="text"/> -->
    	    
    	    <field name="group" type="text" label="Group (as Comma Separated Values)"/> 
    	    <field name="ognl" type="text"/>
    	    <collection name="scrRuleParams" collection-type="list" entity-type="ScrRuleParam" referred-by="ScrRcmRuleSeed" relation="owner"/>
    	     <display-format>- $o.name$</display-format> 
    	    <find-queries>
                 <query name="byKey" select="one" cacheable="true">where key = :key</query>
                <query name="byGroup" select="one" cacheable="true">where group = :group</query>
                <!--  <query name="byEntityAndAttributeKey" select="many" cacheable="true">where entityType = :entity_Type and attribute.key = :attribute_key</query>-->
                <query name="byApplicability" select="many" cacheable="true">where applicability.key = :applicability_key</query>
            </find-queries>    	 
        </entity>          
        <entity name="ScrFactorSeed" stereotype="configuration" label="Score Factor">
            <change-log compare-profile="changeLog-ScrFactorSeed"/>
        	<field name="code" type="integer" label="Code" />
            <field name="message" type="textarea" label="Message" />
            <field name="derCodMsg" type="derived:text" label="Value" />
            <reference name="recommendationReason" entity-type="RecomReasonSeed" relation="refers-to" label="Recommendation Reason" >
           		 <filters>
					<filter triggerExpr="isdef root" expr="entity.active !=null  &amp;&amp;  entity.active "/>
				 </filters>
            </reference>
			<reference name="applicability" entity-type="AttributeChoice" relation="refers-to" label="Applicability" >
                <lookup>
                    <param name="key">RISK_MODEL_APPLICABILITY</param>
                </lookup>
            </reference>
		    <field name="active" type="boolean"  label="Active"/>
		     <display-format>- $o.message$</display-format>
		     <find-queries>
                <query name="quickSearch" select="many">where message like :q </query>
                <query name="byCode" select="one">where code = :code</query>
            </find-queries>	
		</entity>
		<entity name="ScrAttrParam" stereotype="configuration">
        	<field name="paramKey" type="text" label="Key"/>
            <field name="paramName" type="text" label="Name"/>
        	<field name="paramValue" type="text" label="Value"/>
        	<reference name="scrAttrSeed" entity-type="ScrAttributeSeed" relation="refers-to"/>
        	<find-queries>
        		<query name="byParamKeyAndAttrSeedId" select="one">where paramKey = :param_key and scrAttrSeed.key = :scrAttrSeed_key</query>
        	</find-queries>
        </entity>
        <entity name="ScrRuleParam" stereotype="configuration">
        	<field name="paramKey" type="text" label="Key"/>
            <field name="paramName" type="text" label="Parameter Name"/>
        	<field name="paramValue" type="text" label="Parameter Value" required="true"/>
        	<reference name="scrRcmRuleSeed" entity-type="ScrRcmRuleSeed" relation="refers-to"/>
        	<find-queries>
        		<query name="byParamKeyAndRuleSeedId" select="one">where paramKey = :param_key and scrRcmRuleSeed.key = :scrRcmRuleSeed_key</query>
        	</find-queries>
        </entity>
        <entity name="RecomReasonSeed" stereotype="configuration" label="Recommendation Reason">
			<change-log compare-profile="changeLog-RecomReasonSeed"/>		
            <field name="recomCode" type="integer" label="Recommendation Reason Code"  />
            <field name="recomReason" type="textarea"  label="Recommendation Reason" />
			<reference name="type" entity-type="AttributeChoice" relation="refers-to" label="Type" >
                <lookup>
                    <param name="key">CREDIT_DENIAL_REASON_TYPE</param>
                </lookup>
            </reference>
		    <field name="active" type="boolean"  label="Active"/>
		    <field name="key" type="text"  label="Key"/>
		    <display-format>$o.recomReason$</display-format>
		    <find-queries>
                <query name="quickSearch" select="many">where recomReason like :q </query>
                <query name="byRecomCode" select="one" cacheable="true">where recomCode = :recomCode</query>
<!--                 <query name="byKey" select="one" cacheable="true">where key = :key</query> -->
                <query name="findAllRecomsExceptCurrent" select="many">where recomCode = :recomCode and id not in (:id)</query>
                <query name="fetchAllRecomReason" select="many"></query>
            </find-queries>		    
		</entity>
		<entity name="PartyScoreRating" stereotype="managed">
			<field name="partyScore" type="text"/>
			<field name="scoreRatingDate" type="date"/>
			<reference name="partyScoring" entity-type="PartyScoring" relation="refers-to" required="false"/>
			<reference name="request" entity-type="Request" relation="refers-to" required="false"/>
		</entity>
		<entity name="ScoringAttribute" stereotype="managed">
			<field name="attributeKey" type="text" />
			<field name="attributeName" type="text"/>
			<field name="attributeDescription" type="text"/>
			<field name="dataType" type="text"/>
			<field name="display" type="text"/>
			<field name="value" type="text"/>
			<field name="cstmScrDiffVal" type="integer" transient="true"/> 
			<reference name="facility" entity-type="Facility" relation="refers-to" required="false"/>
			<reference name="customer" entity-type="Customer" relation="refers-to" required="false"/>
			<reference name="request" entity-type="Request" relation="refers-to" required="false"/>
			<reference name="bureauReport" entity-type="BureauReport" relation="refers-to" required="false"/>
            <reference name="scoring" entity-type="Scoring" relation="refers-to" required="false"/>
   			<reference name="facScoring" entity-type="FacScoring" relation="refers-to" required="false"/>
			<reference name="partyScoring" entity-type="PartyScoring" relation="refers-to" required="false"/>
			<find-queries>
				<query name="byBureauReport" select="many">where bureauReport.id in (:bureau)</query>
				<query name="fetchAllScoringAttributes" select="many">where bureauReport.id in (:bureau) and attributeName like :attributeName</query>
			</find-queries>
		</entity>
		<entity name="ScoringRecommRule" stereotype="managed">
			<field name="description" type="text"/>
			<field name="ruleName" type="text"/>
			<field name="ruleKey" type="text"/>
			<field name="reason" type="text"/>
			<field name="reasonLevel" type="text"/>
			<field name="entity" type="text"/>
			<field name="recommendationLevel" type="text"/>
			<field name="reasonCode" type="text"/>
			<field name="scoringResult" type="text"/>
			<field name="scoreResultingDeclineRecom" type="text"/>
			<reference name="reasonId" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CREDIT_DENIAL_REASONS</param>
				</lookup>
			</reference>
			<reference name="recommCategory" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RECOMMENDATION_CATEGORY</param>
				</lookup>
			</reference>
			<reference name="result" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">SCORING_RECOMM_RESULT</param>
				</lookup>
			</reference>
			<reference name="exceptionAuthority" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RAC_EXCEPTION_AUTHORITY</param>
				</lookup>
			</reference>
			<reference name="recommendationDecision" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">RECOMMENDATION_DECISION</param>
				</lookup>
			</reference>
			<reference name="facility" entity-type="Facility" relation="refers-to" required="false"/>
			<reference name="customer" entity-type="Customer" relation="refers-to" required="false"/>
            <reference name="request" entity-type="Request" relation="refers-to" required="false"/>
            <reference name="scoring" entity-type="Scoring" relation="refers-to" required="false"/>
   			<reference name="facScoring" entity-type="FacScoring" relation="refers-to" required="false"/>
			<reference name="partyScoring" entity-type="PartyScoring" relation="refers-to" required="false"/>
        </entity>
        <entity name="FacScoring" stereotype="managed">
			<reference name="facility" entity-type="Facility" relation="refers-to" required = "false" />
			
			<reference name="facilityDer" entity-type="derived:Facility" relation="owner" />
			<collection name="scoringRecommRules" collection-type="list" entity-type="ScoringRecommRule" referred-by="facScoring" relation="owner" internal="true"/>
			<collection name="scoringAttributes" collection-type="list" entity-type="ScoringAttribute" referred-by="facScoring" relation="owner" internal="true"/>
			<collection name="facRecomRsns" collection-type="list" entity-type="FacRecomRsn" relation="owner"/>
			<collection name="facRecomRsnsDer" collection-type="derived:list" entity-type="FacRecomRsn" relation="owner" internal="true"/>
			<reference name="facilityRecomm"  entity-type="FacilityRecomm" relation="owner" required="false" />
			<!-- <reference name="facRecomRsn"  entity-type="FacRecomRsn" relation="owner" required="false" /> -->
            <reference name="scoring" entity-type="Scoring" relation="refers-to" required="false"/>
		</entity>
		<entity name="PartyScoring" stereotype="managed">
			<reference name="party" entity-type="Customer" relation="refers-to" required = "false" />
			<reference name="customerType" entity-type="AttributeChoice" relation="refers-to" label="Customer Type">
                <lookup>
                    <param name="key">CUSTOMER_TYPE</param>
                </lookup>
            </reference>
            <field name="customerFirstName" type="text"/>            
            <field name="customerLastName" type="text"/>
            <field name="customerLegalName" type="text" label="Legal Name" />
			<field name="customerName" type="derived:text" />
			<reference name="scorecardDetail" entity-type="ScorecardDetails" relation="owner"/>
			<collection name="scoringRecommRules" collection-type="list" entity-type="ScoringRecommRule" referred-by="partyScoring" relation="owner" internal="true"/>
			<collection name="scoringAttributes" collection-type="list" entity-type="ScoringAttribute" referred-by="partyScoring" relation="owner" internal="true"/>
            <collection name="partyScoreRating" collection-type="list" entity-type="PartyScoreRating" referred-by="partyScoring" relation="owner"/>
            <reference name="scoring" entity-type="Scoring" relation="refers-to" required="false"/>
		</entity>
		<entity name="FacRecomRsn" stereotype="managed">
			<field name="verbiage" type="text"/>
			<field name="scoreFactorPriorityReason" type="integer" />
			<field name="counterOffrReasonLvl" type="integer" />
	 		<reference name="verbiageId" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CREDIT_DENIAL_REASONS</param>
				</lookup>
			</reference>
			<!-- new & upated refernece for VerbiageId -->
			<reference name="recommendationReason" entity-type="RecomReasonSeed" relation="refers-to" />
			<reference name="facility" entity-type="Facility" relation="refers-to" />
			<reference name="customer" entity-type="Customer" relation="refers-to" required="false"/>
			<reference name="cdReasonCustomer" entity-type="Customer" relation="refers-to" required="false">
				<lookup name="mvel">
                    <param name="expr">thiz.getFilteredCustomer</param>
                </lookup>
           </reference>
            <reference name="scoring" entity-type="FacScoring" relation="refers-to" required="false"/>
            <!-- new & upated refernece for VerbiageId Desicion UI-->
            <reference name="cdRecommendationReason" entity-type="RecomReasonSeed" relation="refers-to" />
			<reference name="creditDenialReason" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
					<param name="key">CREDIT_DENIAL_REASONS</param>
				</lookup>
			</reference>
			<reference name="scoringRecommRule" entity-type="ScoringRecommRule" relation="owner" />
			<collection name="crditScFct" collection-type="list" entity-type="CreditScoreFactor" relation="owner"/>
		</entity>
		<entity name="CreditScoreFactor" stereotype="managed">
            <field name="code" type="integer" />
            <field name="message" type="text" />
            <field name="recommendationReason" type="textarea" />
			<!--  <reference name="recommendationReasonId" entity-type="AttributeChoice" relation="refers-to" required="false">
                <lookup>
                    <param name="key">CREDIT_DENIAL_REASONS</param>
                </lookup>
            </reference> -->
            <!--  <reference name="recommendationReason" entity-type="RecomReasonSeed" relation="refers-to" />-->
			<reference name="scrRskMod" entity-type="ScrRskMod" relation="refers-to"/>
		</entity>
		<entity name="ScrRskMod" stereotype="managed">	
            <field name="name" type="text" />
            <field name="code" type="text" />
            <field name="value" type="text" />
            <field name="scoreValidity" type="text" />
			<reference name="bureauReport" entity-type="BureauReport" relation="refers-to"/>
            <collection name="crditScrFctrs" collection-type="list" entity-type="CreditScoreFactor" relation="owner"/>
            <collection name="bureauDer" collection-type="derived:list" entity-type="BureauReport" relation="owner"/>
		</entity>
		<!-- Scoring End -->  
		<!-- BusinessDetail entity  -->
		<entity name="BusinessDetail" stereotype="managed" label="BusinessDetail">
			<field name="franchiseFlag" type="boolean" label="Is the Business considered a Franchise?:" />
          	<field name="branchTradeFlag" type="boolean" label="Is the Client Outside of the Branch Trade Area?:" />
          	<field name="realEstatePropFlag" type="boolean" label="Business Owns Multiple Real Estate Properties:" />
		   	<field name="businessDescription" type="text"/>
		   	<reference name="legalEntityType" entity-type="AttributeChoice" relation="refers-to" label="Legal Entity Type" required="false">
	            <lookup>
	                <param name="key">LEGAL_STRUCTURE</param>
	            </lookup>
	       	</reference>
	       	<reference name="natureOfBusiness" entity-type="AttributeChoice" relation="refers-to" label="Premier Page"  >
                <lookup>
                  <param name="key">BUSINESS_TYPE</param>
                </lookup>
	       	</reference>
	       	<reference name="currCitiBussinessDetail" entity-type="AttributeChoice" relation="refers-to"  required="false">
                <lookup>
                    <param name="key">BUSINESS_RELATION</param>
                </lookup>
	       	</reference>
	        <field name="otherLegalEntityType" type="text" label="Other Legal Entity Type"/>
	        <reference name="specialIndustryType" entity-type="AttributeChoice" relation="refers-to">
	        	<filters>
	        		<filter expr="entity.attribute.key == 'SPECIAL_INDUSTRY_TYPE'" />
	        	</filters>
	        </reference> 
            <field name="businessStartDttm" type="date-time" />
            <field name="currentManagementStartDttm" type="date-time" label="Management Control Date" />
            <field name="primaryBorrower" type="boolean"/>
            <field name="judgmentalStartDate" type="date-time" label="Judgmental Start Date" />
            <field name="orAnyOwnGuarProtection" type="boolean" label="Has the Business or any Owner or Guarantor ever filed bankruptcy or requested court protection from creditors?:" />
            <field name="doesBussCurrLiens" type="boolean" label="Does the Business currently have any liens against its assets?:" />
            <field name="doesBussOrAnyOwnGuarTax" type="boolean" label="Does the Business or any Owner or Guarantor have open tax liens or judgments?:" />
            <field name="bussOrAnyOwnGuarStateTax" type="boolean" label="Does the Business or any Owner or Guarantor owe any federal or state taxes that are delinquent or under a payment arrangement?:" />
            <field name="bussAnyOwnGuarContingently" type="boolean" label="Is the Business or any Owner or Guarantor contingently liable as endorser or guarantor on another loan?:" />
            <field name="bussExpAnyManagThreeYears" type="boolean" label="  Has the Business experienced any management or ownership changes in the past three years?:" />
            <field name="salesToCust" type="boolean" label="Are more than 20% of sales to one customer?:" />
            <field name="areAnyAssetsOfBusiness" type="boolean" label="Are any assets of the Business or any Owner or Guarantor held in trust?:" />
            <field name="isAnyOwnGuarDesignated" type="boolean" label="Is any Owner or Guarantor designated as a Senior Public Figure(SPF)?:" />
            <field name="isThisHomeBasedBuss" type="boolean" label="  Is this a Home Based business?:" />
            <reference name="underLaws" entity-type="AttributeChoice" relation="refers-to"  >
                <lookup>
                    <param name="key">ORGANIZED_UNDER_LAWS</param>
                </lookup>
            </reference>
            <reference name="stateIncorporated" entity-type="State" relation="refers-to" label="Organized under laws of (State/Jurisdiction)"/>     
            <field name="website" type="url"/>
            <field name="numOfEmployees" type="integer" label="Number of employees"/>
            <reference name="sicCode" entity-type="AttributeChoice" relation="refers-to">
            	<filters>
            		<filter expr="entity.attribute.key == 'SIC_CODE'" />
            	</filters>
            </reference>
            <reference name="naicsCode" entity-type="AttributeChoice" relation="refers-to">
            	<filters>
            		<filter expr="entity.attribute.key == 'NAICS_CODE'" />
            	</filters>
            </reference>
            <reference name="businessProgram" entity-type="BusinessPrgm" relation="refers-to">
            	<filters>
                    <filter triggerExpr="isdef root" expr="entity.isActive()"/>
				</filters>
            </reference>
            <field name="annualRevenue" type="money" label="Annual Revenue" />
            <field name="bankruptcyDeclared" type="boolean" label="Have you ever declared Bankruptcy?"/>
            <field name="partyType" type="boolean" />	
        </entity>
		<entity name="BusinessPrgm" stereotype="configuration" label="Business Program">
			<field name="nameDer" type="derived:text"/>
			<field name="descriptionDer" type="derived:text" />
			<field name="name" type="text" tags="Header"/>
			<field name="refNumber" type="auto" tags="Header"/>			
			<field name="description" type="textarea" length="755"/>
			<field name="effectiveFromDate" type="date-time"/>
			<field name="effectiveToDate" type="date-time"/>
			<field name="notes" type="textarea" />
			<field name="maxFinanceAmt" type="amount"/>
            <field name="minFinanceAmt" type="amount"/>
			<field name="formula" type="formula" />
			<field name="bpRateReduction" type="percent" />
			<field name="facTypsDer" type="derived:text"/>
			<field name="busiPrgTypsDer" type="derived:text"/>
			<reference name="term" entity-type="Term" relation="owner"/>
			 <reference name="rateType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RATE_TYPE</param>
                </lookup>
            </reference>
            <reference name="paymentFrequency" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                	<param name="groupMvel"><![CDATA[ return 'PAYMENT_FREQUENCY_BUSINESS_PROGRAM'; ]]></param>
                </lookup>
            </reference>
            <reference name="currency" entity-type="Currency" relation="refers-to"/>
            <reference name="busiPrgType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BUSINESS_PROGRAM_TYPE</param>
                </lookup>
            </reference>
            <reference name="afsPromotion" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AFS_PROMOTION</param>
                </lookup>
            </reference>
            <reference name="facilityTypeCategory" entity-type="FacilityTypeCategory" relation="refers-to"/>
            <reference name="program" entity-type="Program" relation="refers-to"/>
           	<collection name="partners" collection-type="list" entity-type="Partner" relation="refers-to" />
			<collection name="waivedFees" collection-type="list" entity-type="FeePolicy" relation="refers-to"/>
			
			<collection name="subBsnsPrgms" collection-type="list" entity-type="SubBsnsPrgm" relation="owner" referred-by="businessProgram"/>
			
			<feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>			
			<display-format>$o.name$</display-format>
            <find-queries>
                <query name="byName" select="one">where name = :name</query>
                <query name="fetchAllBusinessPrograms" select="many">where name IS NOT NULL</query>
                
            </find-queries>
		</entity>
		<entity name="SubBsnsPrgm" stereotype="managed" label="Business Program">
			<field name="nameDer" type="derived:text"/>
			<field name="descriptionDer" type="derived:text" />
			<field name="effectiveFromDateDer" type="derived:date-time"/>
			<field name="effectiveToDateDer" type="derived:date-time"/>
			<field name="name" type="text" tags="Header"/>
			<field name="refNumber" type="auto" tags="Header"/>			
			<field name="description" type="textarea" length="755"/>
			<field name="effectiveFromDate" type="date-time" ruleTriggerOnEvent="true"/>
			<field name="effectiveToDate" type="date-time" ruleTriggerOnEvent="true"/>
			<field name="notes" type="textarea" />
			<field name="maxFinanceAmt" type="amount"/>
            <field name="minFinanceAmt" type="amount"/>
			<field name="formula" type="formula" />
			<field name="bpRateReduction" type="percent" />
			<reference name="term" entity-type="Term" relation="owner"/>
			 <reference name="rateType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">RATE_TYPE</param>
                </lookup>
            </reference>
            <reference name="paymentFrequency" entity-type="AttributeChoice" relation="refers-to">
				<lookup>
                    <param name="key">PAYMENT_FREQUENCY</param>
                	<param name="groupMvel"><![CDATA[ return 'PAYMENT_FREQUENCY_BUSINESS_PROGRAM'; ]]></param>
                </lookup>
            </reference>
            <reference name="currency" entity-type="Currency" relation="refers-to"/>
            <reference name="busiPrgType" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">BUSINESS_PROGRAM_TYPE</param>
                </lookup>
            </reference>
            <reference name="afsPromotion" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">AFS_PROMOTION</param>
                </lookup>
            </reference>
            
            <reference name="businessProgram" entity-type="BusinessPrgm" relation="refers-to"/>
            <reference name="facilityTypeCategory" entity-type="FacilityTypeCategory" relation="refers-to"/>
            <reference name="program" entity-type="Program" relation="refers-to"/>
           	<collection name="partners" collection-type="list" entity-type="Partner" relation="refers-to" />
			<collection name="waivedFees" collection-type="list" entity-type="FeePolicy" relation="refers-to"/>
			<feature operation="implements">
                <data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>			
			<display-format>$o.name$</display-format>
            <find-queries>
                <query name="byName" select="one">where name = :name</query>
                <query name="fetchAllSubBusinessPrograms" select="many">where refNumber IS NOT NULL</query>
            </find-queries>
		</entity>		                           	
        <!-- end -->
        <entity name="PartyExposure" stereotype="managed">
    		 <collection name="partyFacilities" collection-type="list" entity-type="PartyFacility" relation="owner" />
        </entity> 
        <entity name="PartyFacility" stereotype="managed">
	         <field name="obligationNumber" type="text"/>
	         <field name="existingDirectExposure" type="amount"/>
	         <field name="outstanding" type="amount"/>
	         <field name="obligationTypeCode" type="number"/>
	         <field name="productTypeCode" type="text"/>
	         <field name="sourceSystem" type="text"/>
       </entity>  
       <entity name="MasterLeaseAgreement" stereotype="managed">
	         <collection name="promotions" collection-type="list" entity-type="MasterLeasePromotion" referred-by="masterLeaseAgreement" relation="owner"/>
       </entity> 
       <entity name="MasterLeasePromotion" stereotype="managed" label="Master Lease Promotion">
           <field name="refNumber" type="integer"/>
           <field name="promotionName" type="text" length="36" required="false"/>
           <field name="promotionDescription" type="text" length="36" required="false"/>
           <field name="effectiveDttm" type="date-time" label="Effective Date"/>
           <field name="expirationDttm" type="date-time" label="Expiration Date"/>
           <field name="exclude" type="boolean" required="false"/>
           <field name="promotionRefId" type="text" length="36" required="false" label="Promotion Number"/>
           <field name="numIndex" type="integer"/>
           <reference name="promotionPolicy" entity-type="PromotionPolicy" relation="refers-to" ruleTriggerOnEvent="true"/>
           <reference name="masterLeaseAgreement" entity-type="MasterLeaseAgreement" relation="refers-to" required="false"/>
       </entity>
       
       <entity name="FacilityPayment" stereotype="business-entity" label="Payments">
       	<field name="refNumber" type="auto"/>
       	<field name="servicingIdentifier" type="text" internal = "true" tags="Header" indexed="true"/>
       	<field name="payment" type="amount" ruleTriggerOnEvent="true"/>
       	<field name="paymentDate" type="date" />
       	<field name="totalDisbursedPercent" type="derived:percent"/>
       	<field name="totalDisbursedAmt" type="derived:amount"/>
       	<collection name="selectedFacilityPayment" entity-type="FacilityPayment" collection-type="derived:list" relation="owner" referred-by="FacilityPayment"/>
       	<reference name="facilityBE" entity-type="FacilityBE" relation="refers-to" ruleTriggerOnEvent="true">
            <filters>
                    <filter expr="entity.wfStatus.statusKey == 'DEALS_STATUS_ACCEPTED'"/>
             </filters>
       	</reference>
       	<reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="workflowEntity">FACILITY_PAYMENT_STATUS</param>
                </lookup>
        </reference>
        <collection name="facilityPaymentPlacements" collection-type="list" entity-type="FacilityPaymentPlacement" relation="owner"/>
        <feature operation="implements">
			<data>com.thirdpillar.foundation.model.WorkflowAware</data>
			<data>com.thirdpillar.foundation.model.Metafied</data>
         </feature>
       </entity>
       <entity name="FacilityPaymentPlacement" stereotype="managed">
       	<field name="refNumber" type="auto"/>
       	<field name="disbursedAmt" type="amount" internal="true"/>
       	<reference name="facAllocator" entity-type="FacAllocator" relation="refers-to" ruleTriggerOnEvent="true">
       		<lookup name="mvel">
                    <param name="expr">return root.facilityBE.facAllocators</param>
            </lookup>
       	</reference>
       	<reference name="facilityPayment" entity-type="FacilityPayment" relation="refers-to"/>
       	<reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true">
           <lookup>
              <param name="workflowEntity">FACILITY_PAYMENT_PLACEMENT_STATUS</param>
           </lookup>
        </reference>
		<feature operation="implements">
			<data>com.thirdpillar.foundation.model.WorkflowAware</data>
			<data>com.thirdpillar.foundation.model.Metafied</data>
         </feature>
       </entity>
       
       <!-- Order Object -->
        <entity name="Deal" stereotype="business-entity" label="Funding Requests">
        	<change-log compare-profile="changeLog-Deal"/>
            <field name="initialFundingReq" type="money"  />
            <field name="estimatedYield" type="text" label="Estimated Yield" />
            <field name="term" type="text" label="Term" />
            <!-- <reference name="customer" entity-type="Customer" relation="refers-to"/> --><!--  accNo, clName, clRating, industry ` -->
			<field name="refNumber" type="auto" tags="Header"/>
            <field name="drawRqDt" type="date" />
            <field name="productType" type="text" label="Product Type" />
            <field name="maturityDt" type="date"  label="Maturity Date" />
            <field name="creditFacAmt" type="amount" label="Credit Facility" />
            <field name="largestDebtorConcenPer" type="text" label="% Largest Debtor Concentration" />
            <field name="yearsUnderOwnership" type="text" label="Years In Ownership" />
<!--             <reference name="status" entity-type="AttributeChoice" relation="refers-to" label="Status" ruleTriggerOnEvent="true"> -->
<!--                 <lookup> -->
<!--                     <param name="key">FUNDING_REQUEST_STATUS</param> -->
<!--                 </lookup> -->
<!--             </reference> -->
            <reference name="facilityBE" entity-type="FacilityBE" relation="refers-to"/>
            <field name="statusChngDt" type="date" internal="true" label="Date"/>
            <field name="fundedDate" type="date-time" internal="true" label="Funded Date"/>
            <collection name="selectedDeal" collection-type="derived:list" entity-type="Deal" relation="refers-to"/>
            <collection name="capitalProviders" collection-type="derived:list" entity-type="CapitalProvider" relation="refers-to"/>
            <collection name="facilityCapitalProviders" collection-type="derived:list" entity-type="CapitalProvider" relation="refers-to"/>
            <collection name="fundAllocators" collection-type="list" entity-type="FundAllocator" referred-by="deal" relation="owner"/>
			<collection name="facilitiesBE" collection-type="derived:list" entity-type="FacilityBE" relation="refers-to"/>
			<field name="availableCashDer"  type="derived:amount" label="Remaining To Allocate" />
			<field name="stateCountry" type="derived:text"  />
            <field name="sumAllocatedAmt"  type="derived:amount" />
            <field name="sumAllocatedPer"  type="derived:amount" />
            <field name="noOfCps" type="derived:number" label="# of CPs" />
            <field name="submitFundingRequestFlag" type="boolean" />
            <field name="servicingIdentifier" type="text" internal = "true" tags="Header" indexed="true" />
            <field name="drawRequestedDt" type="derived:date"/>
            <collection name="serviceMessages" collection-type="list" entity-type="ServiceMessage" relation="owner"/>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" internal="true" label="Status" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="workflowEntity">FUNDING_REQUEST_STATUS</param>
                </lookup>
            </reference>
            <feature operation="implements">
				<data>com.thirdpillar.foundation.model.WorkflowAware</data>
				<data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
            <find-queries>
            	<query name="byRefNumber" select="one">where refNumber = :refNumber</query>
            	<query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query>
                <query name="fetchAllOrder" select="many"></query>
            </find-queries>
        </entity>  
<!--         <entity name="Concentration" stereotype="managed" > -->
<!--             <field name="consPer" type="integer" label="% Largest Debtor Concentration" /> -->
<!--             <reference name="client" entity-type="Customer" relation="refers-to"/> -->
<!--             <field name="allAmt" type="amount" label="Max $ Allocation"/> -->
<!--         </entity>         -->
         <entity name="CapitalProvider" stereotype="business-entity" label="Capital Provider">
            <reference name="customerAssociated" entity-type="CustomerBackend" relation="refers-to" label="Capital Provider" unique="true"/>
            <field name="availableCash" type="amount" label="Available Cash" />
            <field name="refNumber" type="auto" tags="Header"/>
            <field name="availableCashDer"  type="derived:amount" label="Remaining To Fund" />
            <field name="pending" type="amount" label="Pending" />
            <field name="outstandingPrincipal" type="amount" label="Amount Outstanding"/>
<!--             <field name="accValue" type="money" label="Account Value" /> -->
            <field name="participatingInMPsince" type="date"  label="Participating In Marketplace since" />
            <field name="noOfFundedDeal" type="integer" label="# Of Funded Deal" internal="true" scale="0"/>
            <field name="lastDealDt" type="date" label="Date of Last Deal" internal="true"/>
<!--             <field name="maxConcentrationPercent" type="number" label="Max Debtor Concentration Allowed %" /> -->
            <field name="capacityToFund"  type="derived:amount" label="Capacity To Fund" />
            <field name="cpBalance" type="amount" />
            <field name="cpSettlementAmt" type="amount" />
          <collection name="region" collection-type="derived:list" entity-type="State" relation="refers-to" label="Exclude Geograpy" />
 		<collection name="exIndustry" collection-type="derived:list" entity-type="AttributeChoice" relation="refers-to" label="Exclude Industry">
            </collection> 
             <!--<collection name="exIndustry" collection-type="list" entity-type="AttributeChoice" relation="refers-to" label="Exclude Industry">
                <lookup>
                 	<param name="key">NAICS_CODE</param>
                </lookup>
            </collection>    -->   
            <field name="hasExIndustry"  type="derived:text" label="Exclude Industry"/>
<!--       	<collection name="allocations" collection-type="derived:list" entity-type="Allocation" referred-by="capitalProvider" relation="owner"/> -->
            <display-format>$o.customerAssociated$</display-format>
            <find-queries>
                <query name="quickSearch" select="many" cacheable="true">where customerAssociated.legalName like :q or customerAssociated.firstName like :q or customerAssociated.lastName like :q</query>
                <query name="fetchAllCapitalProvider" select="many">where id not in (:ids) </query> <!-- and customerAssociated.isInxCp is not true -->
                <query name="fetchAllInxCapitalProvider" select="many">where customerAssociated.isInxCp = :isInxCp_key</query>
            	<query name="byAssociatedCustomerId" select="many">where customerAssociated.id = :id</query>
            </find-queries>
        </entity> 
        <entity name="Allocation" stereotype="managed" >
			<reference name="clientRating" entity-type="AttributeChoice" relation="refers-to" label="Client Rating">
                <lookup>
                    <param name="key">CLIENT_RATING</param>
                </lookup>
            </reference> 
            <field name="allocPercentage" type="integer" label="Max % Allocation" />
            <field name="allAmt" type="amount" label="Max $ Allocation"/>
        	<reference name="capitalProvider" entity-type="CapitalProvider" relation="refers-to"/>
            <find-queries>
                <query name="fetchAllAllocation" select="many"></query>
            </find-queries>
        </entity> 
        <entity name="FundAllocator" stereotype="managed" >
        	<field name="refNumber" type="auto" tags="Header"/>
        	<field name="dbid" type="derived:text" label="ID"  />
            <reference name="capitalProvider" entity-type="CapitalProvider" relation="refers-to" label="Funding Provider" ruleTriggerOnEvent="true">
				<lookup name="mvel">
                    <param name="expr">thiz.deal.capitalProviders</param>
                </lookup> 
            </reference>
            <reference name="newCapitalProvider" entity-type="CapitalProvider" relation="refers-to" ruleTriggerOnEvent="true" transient="true">
                <lookup name="mvel">
                    <param name="expr">thiz.deal.facilityCapitalProviders</param>
                </lookup>              
            </reference>
            <reference name="newCP" entity-type="CapitalProvider" relation="refers-to" ruleTriggerOnEvent="true" transient="true" label="New Capital Provider">
                <lookup name="mvel">
                    <param name="expr">thiz.deal.facilityNewCapitalProviders</param>
                </lookup>              
            </reference>
 			<field name="availableCashDer"  type="derived:amount" label="Availability to Lend"  ruleTriggerOnEvent="true"/>
 			<field name="availableCash"  type="amount" label="Availability to Lend"/>
            <field name="fundAmt"  type="amount" label="Funding Request Amount"  internal="true"/>
            <field name="fundPer" type="percent" label="Facility Commitment %" internal="true" ruleTriggerOnEvent="true" />
            <field name="inxTempCp"  type="derived:text" label="INX Temp Funding for CP"  internal="true"/>
            <field name="inxTempFundAmt"  type="derived:amount" label="INX Temp Funding Amount"  internal="true"/>
            <field name="rejReason" type="textarea" label="Reason for Decline" />
           	<reference name="deal" entity-type="Deal" relation="refers-to"/>
           	<field name="lastUpdate" type="date" label="Last Update" internal="true"/>
           	<field name="drawRequestedDate" type="date" label="Draw Requested Date" internal="true"/>
           	<field name="fundedDate" type="date-time" internal="true" label="Funded by Capital Provider Date"/>
           	<field name="servicingIdentifier" type="text" internal = "true" tags="Header" indexed="true" />
           	<reference name="facAllocator" entity-type="FacAllocator" relation="refers-to"/>
           	<collection name="oldCPs" collection-type="derived:list" entity-type="FundAllocatorHistory" relation="refers-to" label="Sold Placement"/>
			<collection name="fundAllocatorsHistory" collection-type="list" entity-type="FundAllocatorHistory" referred-by="fundAllocator" relation="owner"/>
           	<reference name="temp" entity-type="AttributeChoice" relation="refers-to" label="Temp?" internal="true">
                <lookup>
                    <param name="key">FUNDING_PLACEMENT_TEMP</param>
                </lookup>
            </reference>
<!--            	<reference name="status" entity-type="AttributeChoice" relation="refers-to" label="Funding Status" internal="true" ruleTriggerOnEvent="true"> -->
<!--                 <lookup> -->
<!--                     <param name="key">FUNDING_PLACEMENT_STATUS</param> -->
<!--                 </lookup> -->
<!--             </reference> -->
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" label="Funding Status" ruleTriggerOnEvent="true" internal="true">
                <lookup>
                    <param name="workflowEntity">FUNDING_PLACEMENT_STATUS</param>
                </lookup>
            </reference>
            <feature operation="implements">
				<data>com.thirdpillar.foundation.model.WorkflowAware</data>
            </feature>
            <find-queries>
                <query name="fetchAllFundAllocator" select="many"></query>
                <query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query>
            </find-queries>
        </entity>

        <entity name="FundAllocatorHistory" stereotype="managed" >
        	<field name="dbid" type="derived:text" label="ID"  />
<!--             <reference name="capitalProvider" entity-type="CapitalProvider" relation="refers-to" label="Funding Provider" /> -->
			<reference name="capitalProvider" entity-type="CapitalProvider" relation="refers-to" label="Old CP">
                <lookup name="mvel">
                    <param name="expr">thiz.deal.capitalProviders</param>
                </lookup>              
            </reference>
            <reference name="newCP" entity-type="CapitalProvider" relation="refers-to" label="New Capital Provider">
                <lookup name="mvel">
                    <param name="expr">thiz.deal.capitalProviders</param>
                </lookup>              
            </reference>

 			<field name="availableCash"  type="amount" label="Availability to Lend"/>
            <field name="fundAmt"  type="amount" label="Funding Request Amount"/>
            <field name="fundPer" type="percent" label="Facility Commitment %"/>
            <field name="rejReason" type="textarea" label="Reason for Decline" />
           	<field name="lastUpdate" type="date" label="Last Update" internal="true"/>
           	<field name="drawRequestedDate" type="date" label="Draw Requested Date" />
           	<reference name="deal" entity-type="Deal" relation="refers-to"/>
           	<reference name="fundAllocator" entity-type="FundAllocator" relation="refers-to"/>
           	<reference name="temp" entity-type="AttributeChoice" relation="refers-to" label="Temp?">
                <lookup>
                    <param name="key">FUNDING_PLACEMENT_TEMP</param>
                </lookup>
            </reference>
<!--            	<reference name="status" entity-type="AttributeChoice" relation="refers-to" label="Funding Status" internal="true"> -->
<!--                 <lookup> -->
<!--                     <param name="key">FUNDING_PLACEMENT_STATUS</param> -->
<!--                 </lookup> -->
<!--             </reference> -->
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" label="Funding Status" internal="true">
                <lookup>
                    <param name="workflowEntity">FUNDING_PLACEMENT_STATUS</param>
                </lookup>
            </reference>
            <feature operation="implements">
				<data>com.thirdpillar.foundation.model.WorkflowAware</data>
            </feature>
            <find-queries>
<!--                 <query name="fetchAllFundAllocatorHistory" select="many"></query> -->
                <query name="fetchAllFundAllocatorHistory" select="many">where deal.id  = :id </query>
              	<query name="fetchAllByFundAllocatorId" select="many">where fundAllocator.id  = :id </query>
              	<query name="fetchAllByFundAllocatorInx" select="many">where fundAllocator.id = :id</query>
              	<query name="fetchAllByFundAllocatorReplaced" select="many">where fundAllocator.id = :id and newCP.id = :newCP</query>
            </find-queries>
        </entity>

         <entity name="CustomerBackend" stereotype="business-entity" label="Capital Provider Profile">
        	<field name="tradingName" type="text" label="Trading Name"/>            
            <reference name="fpType" entity-type="AttributeChoice" relation="refers-to" label="Funding Provider Type" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">FP_TYPE</param>
                </lookup>
            </reference>
            <field name="fundType" type="text" label="Fund Type"/>            
            <field name="domicile" type="text" label="Domicile"/>            
            <reference name="bankCharter" entity-type="AttributeChoice" relation="refers-to" label="Bank Charter" ruleTriggerOnEvent="true">
                <lookup>
                    <param name="key">BANK_CHARTER</param>
                </lookup>
            </reference>   
            <field name="stateBnkChrtr" type="text" label="State"/>            
            <field name="refNumber" type="auto" tags="Header"/>
            <field name="firstName" type="text" indexed="true" ruleTriggerOnEvent="true"/>            
            <field name="middleName" type="text" ruleTriggerOnEvent="true"/>
            <field name="lastName" type="text" indexed="true" ruleTriggerOnEvent="true"/>
            <field name="legalName" type="text" label="Legal Name" required="true" indexed="true"/>
            <field name="accountingFirm" type="boolean" />
<!--             <field name="customerName" type="derived:text" label="Customer Name"/> -->
            <field name="federalTaxId" type="secret" input-mask="99-9999999" label="Federal Tax ID"/>
        	<field name="portalCustomerId" type="text" length="36" label="Portal Customer ID" internal="true" tags="Header" indexed="true"/>
			<reference name="primarySite" entity-type="CustomerSite" relation="owner"/>
			<field name="fundAdministrator" type="boolean" />
			<field name="isInxCp" type="boolean" />
			<field name="settlementTerms" type="text" label="Settlement Terms"/>  
            <field name="servicingFee" type="text" label="Servicing Fee"/>
            <!-- Business Details -->
            <reference name="businessDetail" entity-type="BusinessDetail" relation="owner" />
            <field name="businessStartDttm" type="date"/>
            <reference name="natureOfBusiness" entity-type="AttributeChoice" relation="refers-to" label="Premier Page">
                <lookup>
                    <param name="key">NATURE_OF_BUSINESS</param>
                </lookup>
            </reference>
            <reference name="ownership" entity-type="AttributeChoice" relation="refers-to" label="Premier Page">
                <lookup>
                    <param name="key">OWNERSHIP_TYPE</param>
                </lookup>
            </reference>
            <reference name="sicCode" entity-type="AttributeChoice" relation="refers-to" label="SIC Code" required="false">
                <lookup>
                    <param name="key">SIC_CODE</param>
                </lookup>
            </reference>
            <reference name="naicsCode" entity-type="AttributeChoice" relation="refers-to">
                <lookup>
                    <param name="key">NAICS_CODE</param>
                </lookup>
            </reference>                       
			<reference name="partyExposure" entity-type="PartyExposure" relation="owner"/>            
			<!-- Individual Details -->
            <collection name="bankTrades" collection-type="list" entity-type="BankAndTrade" referred-by="customerBackend" relation="owner"/>
            
           <!-- Allocation Details -->				
           <collection name="allocations" collection-type="list" entity-type="Allocation" referred-by="customerBackend" relation="owner"/>
           <field name="maxConcentrationPercent" type="percent" label="Max Debtor Concentration Allowed %" />
            <collection name="region" collection-type="list" entity-type="State" relation="refers-to" label="Exclude Geograpy" />
 			<collection name="exIndustry" collection-type="list" entity-type="AttributeChoice" relation="refers-to" label="Exclude Industry">
                <lookup>
                 	<param name="key">NAICS_CODE</param>
                </lookup>
            </collection>
            <reference name="capitalProvider"  entity-type="CapitalProvider" relation="refers-to"/>
            <!-- Balance Details  -->
<!--  			<field name="accValue" type="amount" label="Acc Val to be removed"/>  -->
 			<field name="pledgedAmt" type="money" label="Pledged Amount"/> 
            <field name="committedFacAmt"  type="amount" label="Committed Amount" internal="true" />
            <field name="offeredFacAmt"  type="amount" label="Pending Committment Amount" internal="true" />
            <field name="pendingAmt"  type="amount" label="Pending Funding Amount" />
            <field name="fundedAmt"  type="amount" label="Funded Amount" />
             <field name="capacityToLendAmt"  type="amount" internal="false" label="Availability to Fund"/>
            <!-- Balance Details -Cummulative Amounts-->
			<field name="fundedAmtMTD"  type="amount" internal="true" label="Funded Amount MTD" />
			<field name="fundedAmtYTD"  type="amount" internal="true" label="Funded Amount YTD" />
			<field name="fundedAmtLTD"  type="amount" internal="true" label="Funded Amount LTD" />
			<field name="interestEarned"  type="amount" internal="true"/>
			<field name="interestEarnedMTD"  type="amount" internal="true" label="Interest Earned MTD" />
			<field name="interestEarnedYTD"  type="amount" internal="true" label="Interest Earned YTD" />
			<field name="interestEarnedLTD"  type="amount" internal="true" label="Interest Earned LTD" />
			<field name="servicingFeeAccured"  type="amount" internal="true"/>
			<field name="servicingFeeCaMTD"  type="amount" internal="true"/>
			<field name="servicingFeeCaYTD"  type="amount" internal="true"/>
			<field name="servicingFeeCaLTD"  type="amount" internal="true"/>
			<field name="unusedLineFeeAccured"  type="amount" internal="true"/>
			<field name="unusedLineFeeMTD"  type="amount" internal="true"/>
			<field name="unusedLineFeeYTD"  type="amount" internal="true"/>
			<field name="unusedLineFeeLTD"  type="amount" internal="true"/>
			
			<field name="interestPaidMTD"  type="amount" internal="true"/>
			<field name="interestPaidYTD"  type="amount" internal="true"/>
			<field name="interestPaidLTD"  type="amount" internal="true" />
			<field name="servicingFeeCpMTD"  type="amount" internal="true"/>
			<field name="servicingFeeCpYTD"  type="amount" internal="true"/>
			<field name="servicingFeeCpLTD"  type="amount" internal="true" />
			<field name="unusedFeePaidMTD"  type="amount" internal="true"/>
			<field name="unusedFeePaidYTD"  type="amount" internal="true"/>
			<field name="unusedFeePaidLTD"  type="amount" internal="true" />
			<field name="interestBalance" type="derived:amount"/>
        	<field name="unusedFeeBalance" type="derived:amount"/>
        	<field name="servicingFeeBalance" type="derived:amount"/>
			
			<field name="intCalcDt" type="date-time"/>
			<field name="fundsINX"  type="amount" internal="true"/>
			<field name="fundsClient"  type="amount" internal="true" />
			
             <!-- Account Designees -->
            <field name="reportAccess" type="text" label="Report Access"/>
             
        	<field name="date" type="date-time"/>
            <display-format>$o.legalName$</display-format>
            <find-queries>
                <query name="fetchAllCustomersByINX" select="many">where isInxCp = :isInxCp</query>
                <query name="quickSearch" select="many">where firstName like :q or lastName like :q or legalName like :q</query>
                <query name="byRefNumber" select="one">where refNumber = :refNumber</query>
                <query name="bySalesForcecomId" select="one">where externalIdentifier = :externalIdentifier</query>
                <query name="byPortalCustomerId" select="one">where portalCustomerId = :portalCustomerId</query>
                
            </find-queries>
        </entity>    
        <entity name="FacilityRange" stereotype="configuration">
            <field name="reqLoanAmtMin" type="amount"/>
            <field name="reqLoanAmtMax" type="amount"/>
            <field name="locReqMaxAmt" type="amount"/>
            <reference name="stateProvince" entity-type="State" relation="refers-to" label="State/Province"/>
            <find-queries>
                <query name="byState" select="one">where stateProvince.name = :stateProvince</query>
            </find-queries>
        </entity>
        <!-- Facility Entity for MPEBE -->
        <entity name="FacilityBE" stereotype="business-entity" label="Facility">
<!--        <change-log compare-profile="changeLog-Deal"/> -->
            <field name="refNumber" type="auto"/>
            <field name="minUtilizationAmt" type="amount" label="Minimum Utilization Amount"  />
            <field name="minUtilizationAmtDer" type="derived:text" label="Minimum Utilization Amount" />
            <field name="estimatedYield" type="text" label="Interest Rate" />
			<reference name="term" entity-type="AttributeChoice" relation="refers-to" label="Term">
                <lookup>
                    <param name="key">FACILTYBE_TERM</param>
                </lookup>
            </reference>            
            <reference name="customer" entity-type="Customer" relation="refers-to"/><!--  accNo, clName, clRating, industry ` -->
            <!--  client Rating should be from customer entity below one is temporary -->
            <reference name="clientRating" entity-type="AttributeChoice" relation="refers-to" label="Client Rating">
                <lookup>
                    <param name="key">CLIENT_RATING</param>
                </lookup>
            </reference>
			<reference name="productType" entity-type="AttributeChoice" relation="refers-to" label="Product Type">
                <lookup>
                    <param name="key">CREDIT_FACILITY_TYPE</param>
                </lookup>
            </reference>         
            <field name="maturityDt" type="date"  label="Maturity Date" />
            <field name="creditFacAmt" type="money" label="Credit Facility" />
<!--             <field name="largestDebtorConcenPer" type="text" label="% Largest Debtor Concentration" /> -->
            <field name="yearsInBusiness" type="text" label="Years in Business"  length ="2"/>
            <field name="facBalance" type="amount" label="Facility Balance" internal="true" ruleTriggerOnEvent="true"/>
            <field name="interimBal"  type="derived:amount" label="Interim Balance" />
            
<!--             <reference name="status" entity-type="AttributeChoice" relation="refers-to" label="Status"  ruleTriggerOnEvent="true"> -->
<!--                 <lookup> -->
<!--                     <param name="key">DEALS_STATUS</param> -->
<!--                 </lookup> -->
<!--             </reference>   -->
            <field name="statusChngDt" type="date" internal="true" label="Date"/>
            <collection name="selectedFacilityBE" collection-type="derived:list" entity-type="FacilityBE" relation="refers-to"/>
            <collection name="capitalProviders" collection-type="derived:list" entity-type="CapitalProvider" relation="refers-to"/>
            <collection name="facAllocators" collection-type="list" entity-type="FacAllocator" referred-by="facilityBE" relation="owner"/>
            <collection name="deal" collection-type="list" entity-type="Deal" referred-by="facilityBE" relation="refers-to"/>
			<field name="availableCashDer"  type="derived:amount" label="Remaining To Assign" />
			<field name="stateCountry" type="derived:text"  />
            <field name="sumAllocatedAmt"  type="derived:amount" />
            <field name="sumAllocatedPer"  type="derived:amount" />
            <field name="totalCpBalance" type="amount" internal="true"/>
            <field name="interimBalance" type="amount" internal="true"/>
            <field name="settlementAmt" type="amount" internal="true"/>
            <field name="grossAR" type="amount" internal="true"/>
            <field name="unusedAmtDer" type="derived:amount" internal="true"/>
            <field name="servicingIdentifier" type="text" tags="Header" internal = "true" indexed="true"/>
            <field name="externalIdentifier" type="text" tags="Header" internal = "true" indexed="true"/>
            <field name="cpCommittedFlag" type="boolean" /> 
            <field name="unusedLineRate" type="percent" internal="true" label="Facility Unused Line Rate"/> <!-- Facility Unused Line Rate -->
            <field name="pendingFundingReq" type="amount" internal="true"/>
            <collection name="serviceMessages" collection-type="list" entity-type="ServiceMessage" relation="owner"/>
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" label="Status"  ruleTriggerOnEvent="true" internal="true">
                <lookup>
                    <param name="workflowEntity">DEALS_STATUS</param>
                </lookup>
            </reference>
            <feature operation="implements">
				<data>com.thirdpillar.foundation.model.WorkflowAware</data>
				<data>com.thirdpillar.foundation.model.Metafied</data>
            </feature>
            <display-format>$o.customer.legalName$ - $o.productType$</display-format>
            <find-queries>
                <query name="byServicingIdentifier" select="one">where servicingIdentifier = :servicingIdentifier</query>
                <query name="byRefNumber" select="one">where refNumber = :refNumber</query>
                <query name="fetchAllFacilityBE" select="many"></query>
				<query name="fetchAllAcceptedFacilityBE" select="many" cacheable="true">where customer.legalName = :legalName_key and productType like :productType_key</query>
            </find-queries>
            <quick-search>where refNumber like :q</quick-search>
        </entity>
        <entity name="FacAllocatorTxn" stereotype="managed" label="Transaction">
        	<field name="refNumber" type="auto"/>
        	<field name="paidInterest" type="amount"/>
        	<field name="paidUnusedFee" type="amount"/>
        	<field name="paidServicingFee" type="amount"/>
        	<field name="txnDate" type="date-time" internal="true"/>
        	<field name="netOff" type="boolean"/>
        	<field name="netPaidToCp" type="amount" internal="true"/>
        	<field name="totalPaidToCp" type="derived:amount" internal="true"/>
        	<reference name="facAllocator" entity-type="FacAllocator" relation="refers-to"/>
        	<reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" label="Status" internal="true">
                <lookup>
                    <param name="workflowEntity">TXN_STATUS</param>
                </lookup>
            </reference>
        	<feature operation="implements">
        		<data>com.thirdpillar.foundation.model.WorkflowAware</data>
        		<data>com.thirdpillar.foundation.model.Metafied</data>
        	</feature>
        </entity>
        <entity name="FacAllocatorHistory" stereotype="managed">
        	<field name="refNumber" type="auto" tags="Header"/>
        	<field name="cpBalance" type="amount"/>
        	<field name="settlementAmt" type="amount"/>
        	<reference name="facAllocator" entity-type="FacAllocator" relation="refers-to"/>
        	<feature operation="implements">
        		<data>com.thirdpillar.foundation.model.Metafied</data>
        	</feature>
        	<find-queries>
        		<query name="byCreatedAt" select="many">where metaInfo.createdAt &lt;= :startDttm and facAllocator.id = :id order by metaInfo.createdAt desc</query>
        	</find-queries>
        </entity>
        <entity name="FacAllocatorIntRecord" stereotype="managed">
        	<field name="refnumber" type="auto"/>
        	<field name="cpBalance" type="amount"/>
        	<field name="grossAR" type="amount"/>
        	<field name="collateralBase" type="amount"/>
        	<field name="earnedInterest" type="amount"/>
        	<field name="servicingFee" type="amount"/>
        	<field name="unUsedLineFee" type="amount"/>
        	<field name="unusedLineRate" type="percent" />
        	<field name="servicefeeRate" type="percent"/>
        	<field name="placementRate" type="percent"/>
        	<field name="intCalcDt" type="date-time"/>
        	<field name="facFIU" type="amount"/>
        	<field name="principle" type="amount"/>
        	<field name="minUtilization" type="amount"/>
        	<field name="fundingLimit" type="amount"/>
        	<field name="commitmentPercent" type="percent"/>
        	<reference name="facAllocator" entity-type="FacAllocator" relation="refers-to"/>
        	<feature operation="implements">
        		<data>com.thirdpillar.foundation.model.Metafied</data>
        	</feature>
        </entity>
        <entity name="FacAllocator" stereotype="managed"  label="Placement" >
        	<field name="dbid" type="derived:text" label="ID" />
 			<reference name="capitalProvider" entity-type="CapitalProvider" relation="refers-to">
                <lookup name="mvel">
                    <param name="expr">thiz.facilityBE.capitalProviders</param>
                </lookup>              
            </reference>
            <reference name="newCP" entity-type="CapitalProvider" relation="refers-to" transient="true">
                <lookup name="mvel">
                    <param name="expr">thiz.facilityBE.capitalProviders</param>
                </lookup>              
            </reference>
            <reference name="percentOrAmt" entity-type="AttributeChoice" relation="refers-to" label="Amount / Percent">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <field name="minUtilizationAmt" type="amount" label="Minimum Utilization" internal="true"/>
            <field name="minUtilizationAmtDer" type="derived:text" label="Minimum Utilization"/>
            <field name="cpBalance" type="amount" label="CP Balance" internal="true"/>
            <field name="cpSettlementAmt" type="amount" internal="true"/>
            <field name="availableCashDer"  type="derived:amount" label="Available Cash"  ruleTriggerOnEvent="true"/>
            <field name="fundAmt"  type="amount" label="Facility Commitment Amount"  ruleTriggerOnEvent="true"/>
            <field name="fundAmtDer"  type="derived:amount" label="Facility Commitment Amount"  ruleTriggerOnEvent="true"/>
            <field name="fundPer" type="percent" label="Facility Commitment %"  ruleTriggerOnEvent="true" />
            <field name="rejReason" type="textarea" label="Reason for Decline" />
            <field name="placementRate" type="percent" label="Interest Rate" ruleTriggerOnEvent="true" />
            <field name="spread" type="text" label="INX Interest Spread" internal="true" />
            <field name="unusedLineRate" type="percent"   ruleTriggerOnEvent="true" />
            <field name="servicefee" type="text" label="Servicing fee" />
            <field name="collateralBase" type="amount"/>
            <field name="dailyIntAccrual" type="amount" internal="true"/>
            <field name="servicingFeeCollateral" type="amount" internal="true"/>
            <field name="unusedLineFee" type="amount" internal="true"/>
            <field name="intCalcDt" type="date-time"/>
            <field name="principle" type="derived:amount"/>
           	<reference name="facilityBE" entity-type="FacilityBE" relation="refers-to"/>
<!--            	 <reference name="status" entity-type="AttributeChoice" relation="refers-to" label="Status" internal="true"> -->
<!--                 <lookup> -->
<!--                     <param name="key">FUND_ALLOCATION_STATUS</param> -->
<!--                 </lookup> -->
<!--             </reference> -->
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" label="Status" internal="true">
                <lookup>
                    <param name="workflowEntity">DEALS_STATUS</param>
                </lookup>
            </reference>
            <feature operation="implements">
				<data>com.thirdpillar.foundation.model.WorkflowAware</data>
            </feature>
            <collection name="oldCPs" collection-type="derived:list" entity-type="FacPlacementAudit" relation="refers-to" label="Placement History"/>
            <collection name="transactions" collection-type="list" entity-type="FacAllocatorTxn" relation="owner" referred-by="facAllocator" />
            <field name="offeredDt" type="date" label="Offered Date" internal="true"/>
          	<field name="lastUpdate" type="date" label="Last Update" internal="true"/>
            <field name="inxMiscFee" type="amount" label="INX Misc Fee"/>
            <field name="unusedLineFeeSpr" type="amount"  internal="true" label="INX Unused Line Fee spread"/> 
            <find-queries>
                <query name="byCapitalProviderIdAndStatus" select="many">where capitalProvider.id = :id and wfStatus.statusKey in (:statuses)</query>
                <query name="byWfStatus" select="many">where wfStatus.statusKey = :statusKey</query>
                <query name="fetchAllFacAllocator" select="many"></query>
                <query name="fetchAllocatedPercent" select="one" cacheable="true">where capitalProvider.customerAssociated.legalName = :legalName_key</query>
            </find-queries>
        </entity>
       <entity name="CPInterestRecord" stereotype="managed">
        	<field name="dailyIntAccrual" type="amount" internal="true"/>
        	<field name="unusedLineFee" type="amount" internal="true"/>
        	<field name="collateralBase" type="amount" internal="true"/>
        	<field name="servicingFee" type="amount" internal="true"/>
        	<field name="earnedIntMTD" type="amount" internal="true"/>
        	<field name="earnedIntYTD" type="amount" internal="true"/>
        	<field name="earnedIntLTD" type="amount" internal="true"/>
        	<field name="servicingFeeMTD" type="amount" internal="true"/>
        	<field name="servicingFeeYTD" type="amount" internal="true"/>
        	<field name="servicingFeeLTD" type="amount" internal="true"/>
        	<field name="unusedLineFeeMTD" type="amount" internal="true"/>
        	<field name="unusedLineFeeYTD" type="amount" internal="true"/>
        	<field name="unusedLineFeeLTD" type="amount" internal="true"/>
        	<field name="intCalcDt" type="date-time" internal="true"/>
        	<reference name="customerBackend" entity-type="CustomerBackend" relation="refers-to"/>
        	<feature operation="implements">
        		<data>com.thirdpillar.foundation.model.Metafied</data>
        	</feature>
        	<find-queries>
        		<query name="byCustomerBackend" select="many">where customerBackend.id=:id and intCalcDt between :intCalcDt and :intCalcDtEnd order by intCalcDt desc</query>
        	</find-queries>
        </entity>
     
       
        <entity name="bankruptcyFiling" stereotype="managed">
         	<field name="refNumber" type="auto" internal="true"/>
        	<field name="bfType" type="text"/>
			<reference name="bfStatus" entity-type="AttributeChoice" relation="refers-to">
						<lookup>
							<param name="key">BANKRUPTCYFILING_STATUS</param>
						</lookup>
			</reference>
			<field name="filingDate" type="date"/>
			<field name="caseNumber" type="number"/>
			<field name="bfJurisdiction" type="text"/>
        </entity> 
        <entity name="judgmentLien" stereotype="managed">
        	<field name="refNumber" type="auto" internal="true"/>
        	<field name="judgFilingType" type="text"/>
			<field name="judgAmount" type="amount"/>
			<field name="judgOriginalDate" type="date"/>
			<field name="judgFileNumber" type="number"/>
			<field name="jurisdiction" type="text"/>
        </entity> 
         <entity name="FacPlacementAudit" stereotype="managed" >
        	<field name="dbid" type="derived:text" label="ID"  />
        	
 			<reference name="capitalProvider" entity-type="CapitalProvider" relation="refers-to" label="Old CP">
                <lookup name="mvel">
                    <param name="expr">thiz.facilityBE.capitalProviders</param>
                </lookup>              
            </reference>
            <reference name="newCP" entity-type="CapitalProvider" relation="refers-to" label="New Capital Provider">
            </reference>
            <reference name="percentOrAmt" entity-type="AttributeChoice" relation="refers-to" label="Amount / Percent">
                <lookup>
                    <param name="key">AMOUNT_OR_PERCENT</param>
                </lookup>
            </reference>
            <field name="minUtilizationAmt" type="amount" label="Minimum Utilization" internal="true"/>
            <field name="minUtilizationAmtDer" type="derived:text" label="Minimum Utilization" />
            <field name="availableCashDer"  type="derived:amount" label="Available Cash"  ruleTriggerOnEvent="true"/>
            <field name="fundAmt"  type="amount" label="Amount Assigned"  ruleTriggerOnEvent="true"/>
            <field name="fundAmtDer"  type="derived:text" label="Amount Assigned"  ruleTriggerOnEvent="true"/>
            <field name="fundPer" type="percent" label="%"  ruleTriggerOnEvent="true" />
            <field name="rejReason" type="textarea" label="Reason for Decline" />
            <field name="placementRate" type="percent" label="Placement Rate" />
            <field name="spread" type="text" label="Spread" />
            <field name="servicefee" type="text" label="Servicing fee" />
           	<reference name="facilityBE" entity-type="FacilityBE" relation="refers-to"/>
           	<reference name="facAllocator" entity-type="FacAllocator" relation="refers-to"/>
<!--            	<reference name="status" entity-type="AttributeChoice" relation="refers-to" label="Status" internal="true"> -->
<!--                 <lookup> -->
<!--                     <param name="key">FUND_ALLOCATION_STATUS</param> -->
<!--                 </lookup> -->
<!--             </reference> -->
            <reference name="wfStatus" entity-type="WorkflowStatus" relation="refers-to" label="Status" internal="true">
                <lookup>
                    <param name="workflowEntity">DEALS_STATUS</param>
                </lookup>
            </reference>
            <feature operation="implements">
				<data>com.thirdpillar.foundation.model.WorkflowAware</data>
            </feature>     
            <field name="createdAt" type="date-time" internal="true" label="Date"/>
            <field name="inxMiscFee" type="amount" label="INX Misc Fee" />
            <field name="unusedLineFeeSpr" type="amount"  label="INX Unused Line Fee spread"/> 
            <find-queries>
                <query name="fetchAll" select="many"></query>
              	 <query name="fetchAllFacPlacementAudits" select="many">where facilityBE.id  = :id </query>
              	 <query name="fetchAllByFacAllocatroId" select="many">where facAllocator.id  = :id </query>
              	 
            </find-queries>
        </entity> 

        <entity name="passwordResetHistory" stereotype="managed">
        	<field name="refNumber" type="auto" tags="Header"/>
        	<field name="userName" type="text"/>
        	<field name="password" type="secret"/>
        	<feature operation="implements">
        		<data>com.thirdpillar.foundation.model.Metafied</data>
        	</feature>
        	<find-queries>
        		<query name="byCreatedAt" select="many">where userName = :userName order by metaInfo.createdAt desc limit 0,10</query>
        	</find-queries>
        </entity>  
    </module>
</meta-model>